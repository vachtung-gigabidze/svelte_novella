(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const To=!1;var va=Array.isArray,Fu=Array.prototype.indexOf,$u=Array.from,Xi=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Du=Object.getOwnPropertyDescriptors,Uu=Object.prototype,Bu=Array.prototype,ga=Object.getPrototypeOf,Ro=Object.isExtensible;function Nu(r){return r()}function Qi(r){for(var e=0;e<r.length;e++)r[e]()}function Wu(){var r,e,t=new Promise((i,o)=>{r=i,e=o});return{promise:t,resolve:r,reject:e}}const lt=2,gs=4,_i=8,Cr=16,Gt=32,Qn=64,ma=128,at=256,li=512,Be=1024,ut=2048,Sn=4096,ln=8192,Zn=16384,ms=32768,_s=65536,Io=1<<17,Vu=1<<18,ys=1<<19,ws=1<<20,Zi=1<<21,bs=1<<22,En=1<<23,Kn=Symbol("$state"),As=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function qu(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function zu(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Hu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Gu(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ku(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Yu(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Ju(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const el=1,tl=2,ze=Symbol();function _a(r){return r===this.v}function nl(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ya(r){return!nl(r,this.v)}let Sr=!1,rl=!1;function il(){Sr=!0}let Me=null;function ci(r){Me=r}function yi(r,e=!1,t){Me={p:Me,c:null,e:null,s:r,x:null,l:Sr&&!e?{s:null,u:null,$:[]}:null}}function wi(r){var e=Me,t=e.e;if(t!==null){e.e=null;for(var i of t)Oa(i)}return Me=e.p,{}}function Tr(){return!Sr||Me!==null&&Me.l===null}const sl=new WeakMap;function ol(r){var e=ye;if(e===null)return ge.f|=En,r;if((e.f&ms)===0){if((e.f&ma)===0)throw!e.parent&&r instanceof Error&&wa(r),r;e.b.error(r)}else Es(r,e)}function Es(r,e){for(;e!==null;){if((e.f&ma)!==0)try{e.b.error(r);return}catch{}e=e.parent}throw r instanceof Error&&wa(r),r}function wa(r){const e=sl.get(r);e&&(Xi(r,"message",{value:e.message}),Xi(r,"stack",{value:e.stack}))}let hi=[];function al(){var r=hi;hi=[],Qi(r)}function ba(r){hi.length===0&&queueMicrotask(al),hi.push(r)}function ul(){for(var r=ye.b;r!==null&&!r.has_pending_snippet();)r=r.parent;return r===null&&qu(),r}function ks(r){var e=lt|ut,t=ge!==null&&(ge.f&lt)!==0?ge:null;return ye===null||t!==null&&(t.f&at)!==0?e|=at:ye.f|=ys,{ctx:Me,deps:null,effects:null,equals:_a,f:e,fn:r,reactions:null,rv:0,v:ze,wv:0,parent:t??ye,ac:null}}function ll(r,e){let t=ye;t===null&&Hu();var i=t.b,o=void 0,u=Cs(ze),h=null,f=!ge;return Al(()=>{try{var v=r()}catch(g){v=Promise.reject(g)}var _=()=>v;o=h?.then(_,_)??Promise.resolve(v),h=o;var y=pt,A=i.pending;f&&(i.update_pending_count(1),A||y.increment());const k=(g,O=void 0)=>{h=null,A||y.activate(),O?O!==As&&(u.f|=En,ts(u,O)):((u.f&En)!==0&&(u.f^=En),ts(u,g)),f&&(i.update_pending_count(-1),A||y.decrement()),ka()};if(o.then(k,g=>k(null,g||"unknown")),y)return()=>{queueMicrotask(()=>y.neuter())}}),new Promise(v=>{function _(y){function A(){y===o?v(u):_(o)}y.then(A,A)}_(o)})}function cl(r){const e=ks(r);return e.equals=ya,e}function Aa(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Cn(e[t])}}function hl(r){for(var e=r.parent;e!==null;){if((e.f&lt)===0)return e;e=e.parent}return null}function Ps(r){var e,t=ye;cn(hl(r));try{Aa(r),e=Ba(r)}finally{cn(t)}return e}function Ea(r){var e=Ps(r);if(r.equals(e)||(r.v=e,r.wv=Da()),!er)if(Jn!==null)Jn.set(r,r.v);else{var t=(on||(r.f&at)!==0)&&r.deps!==null?Sn:Be;He(r,t)}}function dl(r,e,t){const i=Tr()?ks:cl;if(e.length===0){t(r.map(i));return}var o=pt,u=ye,h=fl(),f=ul();Promise.all(e.map(v=>ll(v))).then(v=>{o?.activate(),h();try{t([...r.map(i),...v])}catch(_){(u.f&Zn)===0&&Es(_,u)}o?.deactivate(),ka()}).catch(v=>{f.error(v)})}function fl(){var r=ye,e=ge,t=Me;return function(){cn(r),jt(e),ci(t)}}function ka(){cn(null),jt(null),ci(null)}const ti=new Set;let pt=null,Jn=null;let gr=[],di=null,es=!1;class bi{#u=new Map;#s=new Map;#o=new Set;#t=0;#l=null;#c=!1;#r=[];#a=[];#n=[];#e=[];#i=[];skipped_effects=new Set;#d(e){gr=[];var t=null;if(ti.size>1){t=new Map,Jn=new Map;for(const[u,h]of this.#u)t.set(u,{v:u.v,wv:u.wv}),u.v=h;for(const u of ti)if(u!==this)for(const[h,f]of u.#s)t.has(h)||(t.set(h,{v:h.v,wv:h.wv}),h.v=f)}for(const u of e)this.#f(u);if(this.#r.length===0&&this.#t===0){var i=this.#n,o=this.#e;this.#n=[],this.#e=[],this.#i=[],this.#h(),Oo(i),Oo(o),this.#l?.resolve()}else{for(const u of this.#n)He(u,Be);for(const u of this.#e)He(u,Be);for(const u of this.#i)He(u,Be)}if(t){for(const[u,{v:h,wv:f}]of t)u.wv<=f&&(u.v=h);Jn=null}for(const u of this.#r)br(u);for(const u of this.#a)br(u);this.#r=[],this.#a=[]}#f(e){e.f^=Be;for(var t=e.first;t!==null;){var i=t.f,o=(i&(Gt|Qn))!==0,u=o&&(i&Be)!==0,h=u||(i&ln)!==0||this.skipped_effects.has(t);if(!h&&t.fn!==null){if(o)t.f^=Be;else if((i&gs)!==0)this.#e.push(t);else if(Ai(t))if((i&bs)!==0){var f=t.b?.pending?this.#a:this.#r;f.push(t)}else(t.f&Cr)!==0&&this.#i.push(t),br(t);var v=t.first;if(v!==null){t=v;continue}}var _=t.parent;for(t=t.next;t===null&&_!==null;)t=_.next,_=_.parent}}capture(e,t){this.#s.has(e)||this.#s.set(e,t),this.#u.set(e,e.v)}activate(){pt=this}deactivate(){pt=null}neuter(){this.#c=!0}flush(){gr.length>0?this.flush_effects():this.#h(),pt===this&&(this.#t===0&&ti.delete(this),pt=null)}flush_effects(){var e=Yn;es=!0;try{var t=0;for(xo(!0);gr.length>0;)t++>1e3&&pl(),this.#d(gr),kn.clear()}finally{es=!1,xo(e),di=null}}#h(){if(!this.#c)for(const e of this.#o)e();this.#o.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#n)He(e,ut),un(e);for(const e of this.#e)He(e,ut),un(e);for(const e of this.#i)He(e,ut),un(e);this.#n=[],this.#e=[],this.flush()}}add_callback(e){this.#o.add(e)}settled(){return(this.#l??=Wu()).promise}static ensure(){if(pt===null){const e=pt=new bi;ti.add(pt),queueMicrotask(()=>{pt===e&&e.flush()})}return pt}}function pl(){try{Ju()}catch(r){if(di!==null)Es(r,di);else throw r}}function Oo(r){var e=r.length;if(e!==0){for(var t=0;t<e;t++){var i=r[t];if((i.f&(Zn|ln))===0&&Ai(i)){var o=pi;if(br(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?xa(i):i.fn=null),pi>o&&(i.f&ws)!==0)break}}for(;t<e;t+=1)un(r[t])}}function un(r){for(var e=di=r;e.parent!==null;){e=e.parent;var t=e.f;if(es&&e===ye&&(t&Cr)!==0)return;if((t&(Qn|Gt))!==0){if((t&Be)===0)return;e.f^=Be}}gr.push(e)}const kn=new Map;function Cs(r,e){var t={f:0,v:r,reactions:null,equals:_a,rv:0,wv:0};return t}function Vt(r,e){const t=Cs(r);return Rl(t),t}function oi(r,e=!1,t=!0){const i=Cs(r);return e||(i.equals=ya),Sr&&t&&Me!==null&&Me.l!==null&&(Me.l.s??=[]).push(i),i}function Qe(r,e,t=!1){ge!==null&&(!Ot||(ge.f&Io)!==0)&&Tr()&&(ge.f&(lt|Cr|bs|Io))!==0&&!Ht?.includes(r)&&Zu();let i=t?mr(e):e;return ts(r,i)}function ts(r,e){if(!r.equals(e)){var t=r.v;er?kn.set(r,e):kn.set(r,t),r.v=e,bi.ensure().capture(r,t),(r.f&lt)!==0&&((r.f&ut)!==0&&Ps(r),He(r,(r.f&at)===0?Be:Sn)),r.wv=Da(),Pa(r,ut),Tr()&&ye!==null&&(ye.f&Be)!==0&&(ye.f&(Gt|Qn))===0&&(vt===null?Il([r]):vt.push(r))}return e}function Wi(r){Qe(r,r.v+1)}function Pa(r,e){var t=r.reactions;if(t!==null)for(var i=Tr(),o=t.length,u=0;u<o;u++){var h=t[u],f=h.f;(f&ut)===0&&(!i&&h===ye||(He(h,e),(f&(Be|at))!==0&&((f&lt)!==0?Pa(h,Sn):un(h))))}}function mr(r){if(typeof r!="object"||r===null||Kn in r)return r;const e=ga(r);if(e!==Uu&&e!==Bu)return r;var t=new Map,i=va(r),o=Vt(0),u=Pn,h=f=>{if(Pn===u)return f();var v=ge,_=Pn;jt(null),Fo(u);var y=f();return jt(v),Fo(_),y};return i&&t.set("length",Vt(r.length)),new Proxy(r,{defineProperty(f,v,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Xu();var y=t.get(v);return y===void 0?y=h(()=>{var A=Vt(_.value);return t.set(v,A),A}):Qe(y,_.value,!0),!0},deleteProperty(f,v){var _=t.get(v);if(_===void 0){if(v in f){const k=h(()=>Vt(ze));t.set(v,k),Wi(o)}}else{if(i&&typeof v=="string"){var y=t.get("length"),A=Number(v);Number.isInteger(A)&&A<y.v&&Qe(y,A)}Qe(_,ze),Wi(o)}return!0},get(f,v,_){if(v===Kn)return r;var y=t.get(v),A=v in f;if(y===void 0&&(!A||wr(f,v)?.writable)&&(y=h(()=>{var g=mr(A?f[v]:ze),O=Vt(g);return O}),t.set(v,y)),y!==void 0){var k=Ne(y);return k===ze?void 0:k}return Reflect.get(f,v,_)},getOwnPropertyDescriptor(f,v){var _=Reflect.getOwnPropertyDescriptor(f,v);if(_&&"value"in _){var y=t.get(v);y&&(_.value=Ne(y))}else if(_===void 0){var A=t.get(v),k=A?.v;if(A!==void 0&&k!==ze)return{enumerable:!0,configurable:!0,value:k,writable:!0}}return _},has(f,v){if(v===Kn)return!0;var _=t.get(v),y=_!==void 0&&_.v!==ze||Reflect.has(f,v);if(_!==void 0||ye!==null&&(!y||wr(f,v)?.writable)){_===void 0&&(_=h(()=>{var k=y?mr(f[v]):ze,g=Vt(k);return g}),t.set(v,_));var A=Ne(_);if(A===ze)return!1}return y},set(f,v,_,y){var A=t.get(v),k=v in f;if(i&&v==="length")for(var g=_;g<A.v;g+=1){var O=t.get(g+"");O!==void 0?Qe(O,ze):g in f&&(O=h(()=>Vt(ze)),t.set(g+"",O))}if(A===void 0)(!k||wr(f,v)?.writable)&&(A=h(()=>Vt(void 0)),Qe(A,mr(_)),t.set(v,A));else{k=A.v!==ze;var U=h(()=>mr(_));Qe(A,U)}var D=Reflect.getOwnPropertyDescriptor(f,v);if(D?.set&&D.set.call(y,_),!k){if(i&&typeof v=="string"){var K=t.get("length"),J=Number(v);Number.isInteger(J)&&J>=K.v&&Qe(K,J+1)}Wi(o)}return!0},ownKeys(f){Ne(o);var v=Reflect.ownKeys(f).filter(A=>{var k=t.get(A);return k===void 0||k.v!==ze});for(var[_,y]of t)y.v!==ze&&!(_ in f)&&v.push(_);return v},setPrototypeOf(){Qu()}})}var jo,Ca,Sa,Ta;function vl(){if(jo===void 0){jo=window,Ca=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Sa=wr(e,"firstChild").get,Ta=wr(e,"nextSibling").get,Ro(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ro(t)&&(t.__t=void 0)}}function Ss(r=""){return document.createTextNode(r)}function fi(r){return Sa.call(r)}function Ts(r){return Ta.call(r)}function ai(r,e){return fi(r)}function Ra(r,e){{var t=fi(r);return t instanceof Comment&&t.data===""?Ts(t):t}}function Vi(r,e=1,t=!1){let i=r;for(;e--;)i=Ts(i);return i}function gl(){return!1}function Ia(r){ye===null&&ge===null&&Yu(),ge!==null&&(ge.f&at)!==0&&ye===null&&Ku(),er&&Gu()}function ml(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Mt(r,e,t,i=!0){var o=ye;o!==null&&(o.f&ln)!==0&&(r|=ln);var u={ctx:Me,deps:null,nodes_start:null,nodes_end:null,f:r|ut,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{br(u),u.f|=ms}catch(v){throw Cn(u),v}else e!==null&&un(u);var h=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&ys)===0;if(!h&&i&&(o!==null&&ml(u,o),ge!==null&&(ge.f&lt)!==0)){var f=ge;(f.effects??=[]).push(u)}return u}function _l(r){const e=Mt(_i,null,!1);return He(e,Be),e.teardown=r,e}function ns(r){Ia();var e=ye.f,t=!ge&&(e&Gt)!==0&&(e&ms)===0;if(t){var i=Me;(i.e??=[]).push(r)}else return Oa(r)}function Oa(r){return Mt(gs|ws,r,!1)}function yl(r){return Ia(),Mt(_i|ws,r,!0)}function wl(r){bi.ensure();const e=Mt(Qn,r,!0);return(t={})=>new Promise(i=>{t.outro?La(e,()=>{Cn(e),i(void 0)}):(Cn(e),i(void 0))})}function bl(r){return Mt(gs,r,!1)}function Al(r){return Mt(bs|ys,r,!0)}function El(r,e=0){return Mt(_i|e,r,!0)}function Mo(r,e=[],t=[]){dl(e,t,i=>{Mt(_i,()=>r(...i.map(Ne)),!0)})}function kl(r,e=0){var t=Mt(Cr|e,r,!0);return t}function rs(r,e=!0){return Mt(Gt,r,!0,e)}function ja(r){var e=r.teardown;if(e!==null){const t=er,i=ge;Lo(!0),jt(null);try{e.call(null)}finally{Lo(t),jt(i)}}}function Ma(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){t.ac?.abort(As);var i=t.next;(t.f&Qn)!==0?t.parent=null:Cn(t,e),t=i}}function Pl(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Gt)===0&&Cn(e),e=t}}function Cn(r,e=!0){var t=!1;(e||(r.f&Vu)!==0)&&r.nodes_start!==null&&r.nodes_end!==null&&(Cl(r.nodes_start,r.nodes_end),t=!0),Ma(r,e&&!t),vi(r,0),He(r,Zn);var i=r.transitions;if(i!==null)for(const u of i)u.stop();ja(r);var o=r.parent;o!==null&&o.first!==null&&xa(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function Cl(r,e){for(;r!==null;){var t=r===e?null:Ts(r);r.remove(),r=t}}function xa(r){var e=r.parent,t=r.prev,i=r.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===r&&(e.first=i),e.last===r&&(e.last=t))}function La(r,e){var t=[];Fa(r,t,!0),Sl(t,()=>{Cn(r),e&&e()})}function Sl(r,e){var t=r.length;if(t>0){var i=()=>--t||e();for(var o of r)o.out(i)}else e()}function Fa(r,e,t){if((r.f&ln)===0){if(r.f^=ln,r.transitions!==null)for(const h of r.transitions)(h.is_global||t)&&e.push(h);for(var i=r.first;i!==null;){var o=i.next,u=(i.f&_s)!==0||(i.f&Gt)!==0;Fa(i,e,u?t:!1),i=o}}}function Tl(r){$a(r,!0)}function $a(r,e){if((r.f&ln)!==0){r.f^=ln,(r.f&Be)===0&&(He(r,ut),un(r));for(var t=r.first;t!==null;){var i=t.next,o=(t.f&_s)!==0||(t.f&Gt)!==0;$a(t,o?e:!1),t=i}if(r.transitions!==null)for(const u of r.transitions)(u.is_global||e)&&u.in()}}let Yn=!1;function xo(r){Yn=r}let er=!1;function Lo(r){er=r}let ge=null,Ot=!1;function jt(r){ge=r}let ye=null;function cn(r){ye=r}let Ht=null;function Rl(r){ge!==null&&(Ht===null?Ht=[r]:Ht.push(r))}let Xe=null,ot=0,vt=null;function Il(r){vt=r}let pi=1,kr=0,Pn=kr;function Fo(r){Pn=r}let on=!1;function Da(){return++pi}function Ai(r){var e=r.f;if((e&ut)!==0)return!0;if((e&Sn)!==0){var t=r.deps,i=(e&at)!==0;if(t!==null){var o,u,h=(e&li)!==0,f=i&&ye!==null&&!on,v=t.length;if((h||f)&&(ye===null||(ye.f&Zn)===0)){var _=r,y=_.parent;for(o=0;o<v;o++)u=t[o],(h||!u?.reactions?.includes(_))&&(u.reactions??=[]).push(_);h&&(_.f^=li),f&&y!==null&&(y.f&at)===0&&(_.f^=at)}for(o=0;o<v;o++)if(u=t[o],Ai(u)&&Ea(u),u.wv>r.wv)return!0}(!i||ye!==null&&!on)&&He(r,Be)}return!1}function Ua(r,e,t=!0){var i=r.reactions;if(i!==null&&!Ht?.includes(r))for(var o=0;o<i.length;o++){var u=i[o];(u.f&lt)!==0?Ua(u,e,!1):e===u&&(t?He(u,ut):(u.f&Be)!==0&&He(u,Sn),un(u))}}function Ba(r){var e=Xe,t=ot,i=vt,o=ge,u=on,h=Ht,f=Me,v=Ot,_=Pn,y=r.f;Xe=null,ot=0,vt=null,on=(y&at)!==0&&(Ot||!Yn||ge===null),ge=(y&(Gt|Qn))===0?r:null,Ht=null,ci(r.ctx),Ot=!1,Pn=++kr,r.ac!==null&&(r.ac.abort(As),r.ac=null);try{r.f|=Zi;var A=(0,r.fn)(),k=r.deps;if(Xe!==null){var g;if(vi(r,ot),k!==null&&ot>0)for(k.length=ot+Xe.length,g=0;g<Xe.length;g++)k[ot+g]=Xe[g];else r.deps=k=Xe;if(!on||(y&lt)!==0&&r.reactions!==null)for(g=ot;g<k.length;g++)(k[g].reactions??=[]).push(r)}else k!==null&&ot<k.length&&(vi(r,ot),k.length=ot);if(Tr()&&vt!==null&&!Ot&&k!==null&&(r.f&(lt|Sn|ut))===0)for(g=0;g<vt.length;g++)Ua(vt[g],r);return o!==null&&o!==r&&(kr++,vt!==null&&(i===null?i=vt:i.push(...vt))),(r.f&En)!==0&&(r.f^=En),A}catch(O){return ol(O)}finally{r.f^=Zi,Xe=e,ot=t,vt=i,ge=o,on=u,Ht=h,ci(f),Ot=v,Pn=_}}function Ol(r,e){let t=e.reactions;if(t!==null){var i=Fu.call(t,r);if(i!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[i]=t[o],t.pop())}}t===null&&(e.f&lt)!==0&&(Xe===null||!Xe.includes(e))&&(He(e,Sn),(e.f&(at|li))===0&&(e.f^=li),Aa(e),vi(e,0))}function vi(r,e){var t=r.deps;if(t!==null)for(var i=e;i<t.length;i++)Ol(r,t[i])}function br(r){var e=r.f;if((e&Zn)===0){He(r,Be);var t=ye,i=Yn;ye=r,Yn=!0;try{(e&Cr)!==0?Pl(r):Ma(r),ja(r);var o=Ba(r);r.teardown=typeof o=="function"?o:null,r.wv=pi;var u;To&&rl&&(r.f&ut)!==0&&r.deps}finally{Yn=i,ye=t}}}function Ne(r){var e=r.f,t=(e&lt)!==0;if(ge!==null&&!Ot){var i=ye!==null&&(ye.f&Zn)!==0;if(!i&&!Ht?.includes(r)){var o=ge.deps;if((ge.f&Zi)!==0)r.rv<kr&&(r.rv=kr,Xe===null&&o!==null&&o[ot]===r?ot++:Xe===null?Xe=[r]:(!on||!Xe.includes(r))&&Xe.push(r));else{(ge.deps??=[]).push(r);var u=r.reactions;u===null?r.reactions=[ge]:u.includes(ge)||u.push(ge)}}}else if(t&&r.deps===null&&r.effects===null){var h=r,f=h.parent;f!==null&&(f.f&at)===0&&(h.f^=at)}if(er){if(kn.has(r))return kn.get(r);if(t){h=r;var v=h.v;return((h.f&Be)!==0||Na(h))&&(v=Ps(h)),kn.set(h,v),v}}else if(t){if(h=r,Jn?.has(h))return Jn.get(h);Ai(h)&&Ea(h)}if((r.f&En)!==0)throw r.v;return r.v}function Na(r){if(r.v===ze)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(kn.has(e)||(e.f&lt)!==0&&Na(e))return!0;return!1}function Rs(r){var e=Ot;try{return Ot=!0,r()}finally{Ot=e}}const jl=-7169;function He(r,e){r.f=r.f&jl|e}function Ml(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(Kn in r)is(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&Kn in t&&is(t)}}}function is(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let i in r)try{is(r[i],e)}catch{}const t=ga(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=Du(t);for(let o in i){const u=i[o].get;if(u)try{u.call(r)}catch{}}}}}const xl=["touchstart","touchmove"];function Ll(r){return xl.includes(r)}function Fl(r){var e=ge,t=ye;jt(null),cn(null);try{return r()}finally{jt(e),cn(t)}}const $l=new Set,$o=new Set;function Dl(r,e,t,i={}){function o(u){if(i.capture||_r.call(e,u),!u.cancelBubble)return Fl(()=>t?.call(this,u))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?ba(()=>{e.addEventListener(r,o,i)}):e.addEventListener(r,o,i),o}function Wa(r,e,t,i,o){var u={capture:i,passive:o},h=Dl(r,e,t,u);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&_l(()=>{e.removeEventListener(r,h,u)})}function _r(r){var e=this,t=e.ownerDocument,i=r.type,o=r.composedPath?.()||[],u=o[0]||r.target,h=0,f=r.__root;if(f){var v=o.indexOf(f);if(v!==-1&&(e===document||e===window)){r.__root=e;return}var _=o.indexOf(e);if(_===-1)return;v<=_&&(h=v)}if(u=o[h]||r.target,u!==e){Xi(r,"currentTarget",{configurable:!0,get(){return u||t}});var y=ge,A=ye;jt(null),cn(null);try{for(var k,g=[];u!==null;){var O=u.assignedSlot||u.parentNode||u.host||null;try{var U=u["__"+i];if(U!=null&&(!u.disabled||r.target===u))if(va(U)){var[D,...K]=U;D.apply(u,[r,...K])}else U.call(u,r)}catch(J){k?g.push(J):k=J}if(r.cancelBubble||O===e||O===null)break;u=O}if(k){for(let J of g)queueMicrotask(()=>{throw J});throw k}}finally{r.__root=e,delete r.currentTarget,jt(y),cn(A)}}}function Ul(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function ss(r,e){var t=ye;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function Tn(r,e){var t=(e&el)!==0,i=(e&tl)!==0,o,u=!r.startsWith("<!>");return()=>{o===void 0&&(o=Ul(u?r:"<!>"+r),t||(o=fi(o)));var h=i||Ca?document.importNode(o,!0):o.cloneNode(!0);if(t){var f=fi(h),v=h.lastChild;ss(f,v)}else ss(h,h);return h}}function Bl(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Ss();return r.append(e,t),ss(e,t),r}function an(r,e){r!==null&&r.before(e)}function Do(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??=r.nodeValue)&&(r.__t=t,r.nodeValue=t+"")}function Nl(r,e){return Wl(r,e)}const Ln=new Map;function Wl(r,{target:e,anchor:t,props:i={},events:o,context:u,intro:h=!0}){vl();var f=new Set,v=A=>{for(var k=0;k<A.length;k++){var g=A[k];if(!f.has(g)){f.add(g);var O=Ll(g);e.addEventListener(g,_r,{passive:O});var U=Ln.get(g);U===void 0?(document.addEventListener(g,_r,{passive:O}),Ln.set(g,1)):Ln.set(g,U+1)}}};v($u($l)),$o.add(v);var _=void 0,y=wl(()=>{var A=t??e.appendChild(Ss());return rs(()=>{if(u){yi({});var k=Me;k.c=u}o&&(i.$$events=o),_=r(A,i)||{},u&&wi()}),()=>{for(var k of f){e.removeEventListener(k,_r);var g=Ln.get(k);--g===0?(document.removeEventListener(k,_r),Ln.delete(k)):Ln.set(k,g)}$o.delete(v),A!==t&&A.parentNode?.removeChild(A)}});return Vl.set(_,y),_}let Vl=new WeakMap;function os(r,e,t=!1){var i=r,o=null,u=null,h=ze,f=t?_s:0,v=!1;const _=(g,O=!0)=>{v=!0,k(O,g)};var y=null;function A(){y!==null&&(y.lastChild.remove(),i.before(y),y=null);var g=h?o:u,O=h?u:o;g&&Tl(g),O&&La(O,()=>{h?u=null:o=null})}const k=(g,O)=>{if(h!==(h=g)){var U=gl(),D=i;if(U&&(y=document.createDocumentFragment(),y.append(D=Ss())),h?o??=O&&rs(()=>O(D)):u??=O&&rs(()=>O(D)),U){var K=pt,J=h?o:u,N=h?u:o;J&&K.skipped_effects.delete(J),N&&K.skipped_effects.add(N),K.add_callback(A)}else A()}};kl(()=>{v=!1,e(_),v||k(null,null)},f)}function Uo(r,e){return r===e||r?.[Kn]===e}function ql(r={},e,t,i){return bl(()=>{var o,u;return El(()=>{o=u,u=[],Rs(()=>{r!==t(...u)&&(e(r,...u),o&&Uo(t(...o),r)&&e(null,...o))})}),()=>{ba(()=>{u&&Uo(t(...u),r)&&e(null,...u)})}}),r}function Va(r=!1){const e=Me,t=e.l.u;if(!t)return;let i=()=>Ml(e.s);if(r){let o=0,u={};const h=ks(()=>{let f=!1;const v=e.s;for(const _ in v)v[_]!==u[_]&&(u[_]=v[_],f=!0);return f&&o++,o});i=()=>Ne(h)}t.b.length&&yl(()=>{Bo(e,i),Qi(t.b)}),ns(()=>{const o=Rs(()=>t.m.map(Nu));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&ns(()=>{Bo(e,i),Qi(t.a)})}function Bo(r,e){if(r.l.s)for(const t of r.l.s)Ne(t);e()}function Is(r){Me===null&&zu(),Sr&&Me.l!==null?zl(Me).m.push(r):ns(()=>{const e=Rs(r);if(typeof e=="function")return e})}function zl(r){var e=r.l;return e.u??={a:[],b:[],m:[]}}const Hl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Hl);il();function Gl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Kl(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var o=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return r[i]}})}),t}var ui={exports:{}},Yl=ui.exports,No;function Jl(){return No||(No=1,function(r,e){(function(i,o){r.exports=o()})(Yl,()=>(()=>{var t=[,(h,f,v)=>{v.r(f),v.d(f,{default:()=>y});var _=(()=>{var A=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(k={}){var g=k,O,U;g.ready=new Promise((n,s)=>{O=n,U=s});function D(){function n(E){const T=d;l=s=0,d=new Map,T.forEach(R=>{try{R(E)}catch(S){console.error(S)}}),this.pb(),m&&m.Tb()}let s=0,l=0,d=new Map,m=null,b=null;this.requestAnimationFrame=function(E){s||(s=requestAnimationFrame(n.bind(this)));const T=++l;return d.set(T,E),T},this.cancelAnimationFrame=function(E){d.delete(E),s&&d.size==0&&(cancelAnimationFrame(s),s=0)},this.Rb=function(E){b&&(document.body.remove(b),b=null),E||(b=document.createElement("div"),b.style.backgroundColor="black",b.style.position="fixed",b.style.right=0,b.style.top=0,b.style.color="white",b.style.padding="4px",b.innerHTML="RIVE FPS",E=function(T){b.innerHTML="RIVE FPS "+T.toFixed(1)},document.body.appendChild(b)),m=new function(){let T=0,R=0;this.Tb=function(){var S=performance.now();R?(++T,S-=R,1e3<S&&(E(1e3*T/S),T=R=0)):(R=S,T=0)}}},this.Ob=function(){b&&(document.body.remove(b),b=null),m=null},this.pb=function(){}}function K(n){console.assert(!0);const s=new Map;let l=-1/0;this.push=function(d){return d=d+((1<<n)-1)>>n,s.has(d)&&clearTimeout(s.get(d)),s.set(d,setTimeout(function(){s.delete(d),s.length==0?l=-1/0:d==l&&(l=Math.max(...s.keys()),console.assert(l<d))},1e3)),l=Math.max(d,l),l<<n}}const J=g.onRuntimeInitialized;g.onRuntimeInitialized=function(){J&&J();let n=g.decodeAudio;g.decodeAudio=function(m,b){m=n(m),b(m)};let s=g.decodeFont;g.decodeFont=function(m,b){m=s(m),b(m)};const l=g.FileAssetLoader;g.ptrToAsset=m=>{let b=g.ptrToFileAsset(m);return b.isImage?g.ptrToImageAsset(m):b.isFont?g.ptrToFontAsset(m):b.isAudio?g.ptrToAudioAsset(m):b},g.CustomFileAssetLoader=l.extend("CustomFileAssetLoader",{__construct:function({loadContents:m}){this.__parent.__construct.call(this),this.Gb=m},loadContents:function(m,b){return m=g.ptrToAsset(m),this.Gb(m,b)}}),g.CDNFileAssetLoader=l.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(m){let b=g.ptrToAsset(m);return m=b.cdnUuid,m===""?!1:(function(E,T){var R=new XMLHttpRequest;R.responseType="arraybuffer",R.onreadystatechange=function(){R.readyState==4&&R.status==200&&T(R)},R.open("GET",E,!0),R.send(null)}(b.cdnBaseUrl+"/"+m,E=>{b.decode(new Uint8Array(E.response))}),!0)}}),g.FallbackFileAssetLoader=l.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.lb=[]},addLoader:function(m){this.lb.push(m)},loadContents:function(m,b){for(let E of this.lb)if(E.loadContents(m,b))return!0;return!1}});let d=g.computeAlignment;g.computeAlignment=function(m,b,E,T,R=1){return d.call(this,m,b,E,T,R)}};const N="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),Y=new function(){function n(){if(!s){let ie=function(oe,V,Se){if(V=x.createShader(V),x.shaderSource(V,Se),x.compileShader(V),Se=x.getShaderInfoLog(V),0<(Se||"").length)throw Se;x.attachShader(oe,V)};var P=document.createElement("canvas"),L={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let x;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(x=P.getContext("webgl",L),l=1,!x)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(x=P.getContext("webgl2",L))l=2;else if(x=P.getContext("webgl",L))l=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(x=new Proxy(x,{get(oe,V){if(oe.isContextLost()){if(R||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",V),R=!0),typeof oe[V]=="function")return function(){}}else return typeof oe[V]=="function"?function(...Se){return oe[V].apply(oe,Se)}:oe[V]},set(oe,V,Se){if(oe.isContextLost())R||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+V),R=!0);else return oe[V]=Se,!0}}),d=Math.min(x.getParameter(x.MAX_RENDERBUFFER_SIZE),x.getParameter(x.MAX_TEXTURE_SIZE)),P=x.createProgram(),ie(P,x.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),ie(P,x.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),x.bindAttribLocation(P,0,"vertex"),x.bindAttribLocation(P,1,"uv"),x.linkProgram(P),L=x.getProgramInfoLog(P),0<(L||"").trim().length)throw L;m=x.getUniformLocation(P,"mat"),b=x.getUniformLocation(P,"translate"),x.useProgram(P),x.bindBuffer(x.ARRAY_BUFFER,x.createBuffer()),x.enableVertexAttribArray(0),x.enableVertexAttribArray(1),x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,x.createBuffer()),x.uniform1i(x.getUniformLocation(P,"image"),0),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s=x}return!0}let s=null,l=0,d=0,m=null,b=null,E=0,T=0,R=!1;n(),this.hc=function(){return n(),d},this.Mb=function(P){s.deleteTexture&&s.deleteTexture(P)},this.Lb=function(P){if(!n())return null;const L=s.createTexture();return L?(s.bindTexture(s.TEXTURE_2D,L),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,P),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),l==2?(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),s.generateMipmap(s.TEXTURE_2D)):s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),L):null};const S=new K(8),F=new K(8),B=new K(10),z=new K(10);this.Qb=function(P,L,x,ie,oe){if(n()){var V=S.push(P),Se=F.push(L);if(s.canvas){(s.canvas.width!=V||s.canvas.height!=Se)&&(s.canvas.width=V,s.canvas.height=Se),s.viewport(0,Se-L,P,L),s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.enable(s.SCISSOR_TEST),x.sort((de,It)=>It.xb-de.xb),V=B.push(ie),E!=V&&(s.bufferData(s.ARRAY_BUFFER,8*V,s.DYNAMIC_DRAW),E=V),V=0;for(var qe of x)s.bufferSubData(s.ARRAY_BUFFER,V,qe.Ua),V+=4*qe.Ua.length;console.assert(V==4*ie);for(var Rt of x)s.bufferSubData(s.ARRAY_BUFFER,V,Rt.Db),V+=4*Rt.Db.length;console.assert(V==8*ie),V=z.push(oe),T!=V&&(s.bufferData(s.ELEMENT_ARRAY_BUFFER,2*V,s.DYNAMIC_DRAW),T=V),qe=0;for(var gn of x)s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,qe,gn.indices),qe+=2*gn.indices.length;console.assert(qe==2*oe),gn=0,Rt=!0,V=qe=0;for(const de of x){de.image.Ka!=gn&&(s.bindTexture(s.TEXTURE_2D,de.image.Ja||null),gn=de.image.Ka),de.mc?(s.scissor(de.Za,Se-de.$a-de.kb,de.Ac,de.kb),Rt=!0):Rt&&(s.scissor(0,Se-L,P,L),Rt=!1),x=2/P;const It=-2/L;s.uniform4f(m,de.ha[0]*x*de.Ba,de.ha[1]*It*de.Ca,de.ha[2]*x*de.Ba,de.ha[3]*It*de.Ca),s.uniform2f(b,de.ha[4]*x*de.Ba+x*(de.Za-de.ic*de.Ba)-1,de.ha[5]*It*de.Ca+It*(de.$a-de.jc*de.Ca)+1),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,V),s.vertexAttribPointer(1,2,s.FLOAT,!1,0,V+4*ie),s.drawElements(s.TRIANGLES,de.indices.length,s.UNSIGNED_SHORT,qe),V+=4*de.Ua.length,qe+=2*de.indices.length}console.assert(V==4*ie),console.assert(qe==2*oe)}}},this.canvas=function(){return n()&&s.canvas}},ee=g.onRuntimeInitialized;g.onRuntimeInitialized=function(){function n(j){switch(j){case S.srcOver:return"source-over";case S.screen:return"screen";case S.overlay:return"overlay";case S.darken:return"darken";case S.lighten:return"lighten";case S.colorDodge:return"color-dodge";case S.colorBurn:return"color-burn";case S.hardLight:return"hard-light";case S.softLight:return"soft-light";case S.difference:return"difference";case S.exclusion:return"exclusion";case S.multiply:return"multiply";case S.hue:return"hue";case S.saturation:return"saturation";case S.color:return"color";case S.luminosity:return"luminosity"}}function s(j){return"rgba("+((16711680&j)>>>16)+","+((65280&j)>>>8)+","+((255&j)>>>0)+","+((4278190080&j)>>>24)/255+")"}function l(){0<Se.length&&(Y.Qb(V.drawWidth(),V.drawHeight(),Se,qe,Rt),Se=[],Rt=qe=0,V.reset(512,512));for(const j of oe){for(const q of j.H)q();j.H=[]}oe.clear()}ee&&ee();var d=g.RenderPaintStyle;const m=g.RenderPath,b=g.RenderPaint,E=g.Renderer,T=g.StrokeCap,R=g.StrokeJoin,S=g.BlendMode,F=d.fill,B=d.stroke,z=g.FillRule.evenOdd;let P=1;var L=g.RenderImage.extend("CanvasRenderImage",{__construct:function({la:j,xa:q}={}){this.__parent.__construct.call(this),this.Ka=P,P=P+1&2147483647||1,this.la=j,this.xa=q},__destruct:function(){this.Ja&&(Y.Mb(this.Ja),URL.revokeObjectURL(this.Xa)),this.__parent.__destruct.call(this)},decode:function(j){var q=this;q.xa&&q.xa(q);var le=new Image;q.Xa=URL.createObjectURL(new Blob([j],{type:"image/png"})),le.onload=function(){q.Fb=le,q.Ja=Y.Lb(le),q.size(le.width,le.height),q.la&&q.la(q)},le.src=q.Xa}}),x=m.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(j,q,le,fe,se,he,Ae){var Ee=this.T,Et=Ee.addPath;j=j.T;const Fe=new DOMMatrix;Fe.a=q,Fe.b=le,Fe.c=fe,Fe.d=se,Fe.e=he,Fe.f=Ae,Et.call(Ee,j,Fe)},fillRule:function(j){this.Wa=j},moveTo:function(j,q){this.T.moveTo(j,q)},lineTo:function(j,q){this.T.lineTo(j,q)},cubicTo:function(j,q,le,fe,se,he){this.T.bezierCurveTo(j,q,le,fe,se,he)},close:function(){this.T.closePath()}}),ie=b.extend("CanvasRenderPaint",{color:function(j){this.Ya=s(j)},thickness:function(j){this.Ib=j},join:function(j){switch(j){case R.miter:this.Ia="miter";break;case R.round:this.Ia="round";break;case R.bevel:this.Ia="bevel"}},cap:function(j){switch(j){case T.butt:this.Ha="butt";break;case T.round:this.Ha="round";break;case T.square:this.Ha="square"}},style:function(j){this.Hb=j},blendMode:function(j){this.Eb=n(j)},clearGradient:function(){this.ja=null},linearGradient:function(j,q,le,fe){this.ja={zb:j,Ab:q,cb:le,eb:fe,Ra:[]}},radialGradient:function(j,q,le,fe){this.ja={zb:j,Ab:q,cb:le,eb:fe,Ra:[],ec:!0}},addStop:function(j,q){this.ja.Ra.push({color:j,stop:q})},completeGradient:function(){},draw:function(j,q,le){let fe=this.Hb;var se=this.Ya,he=this.ja;if(j.globalCompositeOperation=this.Eb,he!=null){se=he.zb;var Ae=he.Ab;const Et=he.cb;var Ee=he.eb;const Fe=he.Ra;he.ec?(he=Et-se,Ee-=Ae,se=j.createRadialGradient(se,Ae,0,se,Ae,Math.sqrt(he*he+Ee*Ee))):se=j.createLinearGradient(se,Ae,Et,Ee);for(let ft=0,$e=Fe.length;ft<$e;ft++)Ae=Fe[ft],se.addColorStop(Ae.stop,s(Ae.color));this.Ya=se,this.ja=null}switch(fe){case B:j.strokeStyle=se,j.lineWidth=this.Ib,j.lineCap=this.Ha,j.lineJoin=this.Ia,j.stroke(q);break;case F:j.fillStyle=se,j.fill(q,le)}}});const oe=new Set;let V=null,Se=[],qe=0,Rt=0;var gn=g.CanvasRenderer=E.extend("Renderer",{__construct:function(j){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=j.getContext("2d"),this.Va=j,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const j=this.S.length-6;if(6>j)throw"restore() called without matching save().";this.S.splice(j),this.H.push(this.C.restore.bind(this.C))},transform:function(j,q,le,fe,se,he){const Ae=this.S,Ee=Ae.length-6;Ae.splice(Ee,6,Ae[Ee]*j+Ae[Ee+2]*q,Ae[Ee+1]*j+Ae[Ee+3]*q,Ae[Ee]*le+Ae[Ee+2]*fe,Ae[Ee+1]*le+Ae[Ee+3]*fe,Ae[Ee]*se+Ae[Ee+2]*he+Ae[Ee+4],Ae[Ee+1]*se+Ae[Ee+3]*he+Ae[Ee+5]),this.H.push(this.C.transform.bind(this.C,j,q,le,fe,se,he))},rotate:function(j){const q=Math.sin(j);j=Math.cos(j),this.transform(j,q,-q,j,0,0)},_drawPath:function(j,q){this.H.push(q.draw.bind(q,this.C,j.T,j.Wa===z?"evenodd":"nonzero"))},_drawRiveImage:function(j,q,le,fe){var se=j.Fb;if(se){var he=this.C,Ae=n(le);this.H.push(function(){he.globalCompositeOperation=Ae,he.globalAlpha=fe,he.drawImage(se,0,0),he.globalAlpha=1})}},_getMatrix:function(j){const q=this.S,le=q.length-6;for(let fe=0;6>fe;++fe)j[fe]=q[le+fe]},_drawImageMesh:function(j,q,le,fe,se,he,Ae,Ee,Et,Fe,ft){q=this.C.canvas.width;var $e=this.C.canvas.height;const Eo=Fe-Ee,ko=ft-Et;Ee=Math.max(Ee,0),Et=Math.max(Et,0),Fe=Math.min(Fe,q),ft=Math.min(ft,$e);const dr=Fe-Ee,fr=ft-Et;if(console.assert(dr<=Math.min(Eo,q)),console.assert(fr<=Math.min(ko,$e)),!(0>=dr||0>=fr)){Fe=dr<Eo||fr<ko,q=ft=1;var mn=Math.ceil(dr*ft),_n=Math.ceil(fr*q);$e=Y.hc(),mn>$e&&(ft*=$e/mn,mn=$e),_n>$e&&(q*=$e/_n,_n=$e),V||(V=new g.DynamicRectanizer($e),V.reset(512,512)),$e=V.addRect(mn,_n),0>$e&&(l(),oe.add(this),$e=V.addRect(mn,_n),console.assert(0<=$e));var Po=$e&65535,Co=$e>>16;Se.push({ha:this.S.slice(this.S.length-6),image:j,Za:Po,$a:Co,ic:Ee,jc:Et,Ac:mn,kb:_n,Ba:ft,Ca:q,Ua:new Float32Array(se),Db:new Float32Array(he),indices:new Uint16Array(Ae),mc:Fe,xb:j.Ka<<1|(Fe?1:0)}),qe+=se.length,Rt+=Ae.length;var xn=this.C,Lu=n(le);this.H.push(function(){xn.save(),xn.resetTransform(),xn.globalCompositeOperation=Lu,xn.globalAlpha=fe;const So=Y.canvas();So&&xn.drawImage(So,Po,Co,mn,_n,Ee,Et,dr,fr),xn.restore()})}},_clipPath:function(j){this.H.push(this.C.clip.bind(this.C,j.T,j.Wa===z?"evenodd":"nonzero"))},clear:function(){oe.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Va.width,this.Va.height))},flush:function(){},translate:function(j,q){this.transform(1,0,0,1,j,q)}});g.makeRenderer=function(j){const q=new gn(j),le=q.C;return new Proxy(q,{get(fe,se){if(typeof fe[se]=="function")return function(...he){return fe[se].apply(fe,he)};if(typeof le[se]=="function"){if(-1<N.indexOf(se))throw Error("RiveException: Method call to '"+se+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...he){q.H.push(le[se].bind(le,...he))}}return fe[se]},set(fe,se,he){if(se in le)return q.H.push(()=>{le[se]=he}),!0}})},g.decodeImage=function(j,q){new L({la:q}).decode(j)},g.renderFactory={makeRenderPaint:function(){return new ie},makeRenderPath:function(){return new x},makeRenderImage:function(){let j=It;return new L({xa:()=>{j.total++},la:()=>{if(j.loaded++,j.loaded===j.total){const q=j.ready;q&&(q(),j.ready=null)}}})}};let de=g.load,It=null;g.load=function(j,q,le=!0){const fe=new g.FallbackFileAssetLoader;return q!==void 0&&fe.addLoader(q),le&&(q=new g.CDNFileAssetLoader,fe.addLoader(q)),new Promise(function(se){let he=null;It={total:0,loaded:0,ready:function(){se(he)}},he=de(j,fe),It.total==0&&se(he)})};let xu=g.RendererWrapper.prototype.align;g.RendererWrapper.prototype.align=function(j,q,le,fe,se=1){xu.call(this,j,q,le,fe,se)},d=new D,g.requestAnimationFrame=d.requestAnimationFrame.bind(d),g.cancelAnimationFrame=d.cancelAnimationFrame.bind(d),g.enableFPSCounter=d.Rb.bind(d),g.disableFPSCounter=d.Ob,d.pb=l,g.resolveAnimationFrame=l,g.cleanup=function(){V&&V.delete()}};var $=Object.assign({},g),W="./this.program",me=typeof window=="object",we=typeof importScripts=="function",Ie="",Q,Pe;(me||we)&&(we?Ie=self.location.href:typeof document<"u"&&document.currentScript&&(Ie=document.currentScript.src),A&&(Ie=A),Ie.indexOf("blob:")!==0?Ie=Ie.substr(0,Ie.replace(/[?#].*/,"").lastIndexOf("/")+1):Ie="",we&&(Pe=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),Q=(n,s,l)=>{var d=new XMLHttpRequest;d.open("GET",n,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?s(d.response):l()},d.onerror=l,d.send(null)});var Ye=g.print||console.log.bind(console),Je=g.printErr||console.error.bind(console);Object.assign(g,$),$=null,g.thisProgram&&(W=g.thisProgram);var We;g.wasmBinary&&(We=g.wasmBinary),g.noExitRuntime,typeof WebAssembly!="object"&&Yt("no native wasm support detected");var xt,pe,In=!1,xe,Re,Ve,gt,ce,_e,mt,ke;function rt(){var n=xt.buffer;g.HEAP8=xe=new Int8Array(n),g.HEAP16=Ve=new Int16Array(n),g.HEAP32=ce=new Int32Array(n),g.HEAPU8=Re=new Uint8Array(n),g.HEAPU16=gt=new Uint16Array(n),g.HEAPU32=_e=new Uint32Array(n),g.HEAPF32=mt=new Float32Array(n),g.HEAPF64=ke=new Float64Array(n)}var je,Lt=[],Kt=[],Ft=[];function dn(){var n=g.preRun.shift();Lt.unshift(n)}var Ze=0,_t=null;function Yt(n){throw g.onAbort&&g.onAbort(n),n="Aborted("+n+")",Je(n),In=!0,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),U(n),n}function nr(n){return n.startsWith("data:application/octet-stream;base64,")}var $t;if($t="canvas_advanced.wasm",!nr($t)){var Or=$t;$t=g.locateFile?g.locateFile(Or,Ie):Ie+Or}function it(n){if(n==$t&&We)return new Uint8Array(We);if(Pe)return Pe(n);throw"both async and sync fetching of the wasm failed"}function ki(n){if(!We&&(me||we)){if(typeof fetch=="function"&&!n.startsWith("file://"))return fetch(n,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+n+"'";return s.arrayBuffer()}).catch(()=>it(n));if(Q)return new Promise((s,l)=>{Q(n,d=>s(new Uint8Array(d)),l)})}return Promise.resolve().then(()=>it(n))}function jr(n,s,l){return ki(n).then(d=>WebAssembly.instantiate(d,s)).then(d=>d).then(l,d=>{Je("failed to asynchronously prepare wasm: "+d),Yt(d)})}function Pi(n,s){var l=$t;return We||typeof WebAssembly.instantiateStreaming!="function"||nr(l)||l.startsWith("file://")||typeof fetch!="function"?jr(l,n,s):fetch(l,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,n).then(s,function(m){return Je("wasm streaming compile failed: "+m),Je("falling back to ArrayBuffer instantiation"),jr(l,n,s)}))}var Jt,p,a={459036:(n,s,l,d,m)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(typeof window.h>"u"){window.h={Aa:0},window.h.I={},window.h.I.ya=n,window.h.I.capture=s,window.h.I.La=l,window.h.ga={},window.h.ga.stopped=d,window.h.ga.yb=m;let b=window.h;b.D=[],b.yc=function(E){for(var T=0;T<b.D.length;++T)if(b.D[T]==null)return b.D[T]=E,T;return b.D.push(E),b.D.length-1},b.Cb=function(E){for(b.D[E]=null;0<b.D.length&&b.D[b.D.length-1]==null;)b.D.pop()},b.Sc=function(E){for(var T=0;T<b.D.length;++T)if(b.D[T]==E)return b.Cb(T)},b.ra=function(E){return b.D[E]},b.Ta=["touchend","click"],b.unlock=function(){for(var E=0;E<b.D.length;++E){var T=b.D[E];T!=null&&T.J!=null&&T.state===b.ga.yb&&T.J.resume().then(()=>{_o(T.qb)},R=>{console.error("Failed to resume audiocontext",R)})}b.Ta.map(function(R){document.removeEventListener(R,b.unlock,!0)})},b.Ta.map(function(E){document.addEventListener(E,b.unlock,!0)})}return window.h.Aa+=1,1},461214:()=>{typeof window.h<"u"&&(window.h.Ta.map(function(n){document.removeEventListener(n,window.h.unlock,!0)}),--window.h.Aa,window.h.Aa===0&&delete window.h)},461518:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,461622:()=>{try{var n=new(window.AudioContext||window.webkitAudioContext),s=n.sampleRate;return n.close(),s}catch{return 0}},461793:(n,s,l,d,m,b)=>{if(typeof window.h>"u")return-1;var E={},T={};return n==window.h.I.ya&&l!=0&&(T.sampleRate=l),E.J=new(window.AudioContext||window.webkitAudioContext)(T),E.J.suspend(),E.state=window.h.ga.stopped,l=0,n!=window.h.I.ya&&(l=s),E.Z=E.J.createScriptProcessor(d,l,s),E.Z.onaudioprocess=function(R){if((E.sa==null||E.sa.length==0)&&(E.sa=new Float32Array(mt.buffer,m,d*s)),n==window.h.I.capture||n==window.h.I.La){for(var S=0;S<s;S+=1)for(var F=R.inputBuffer.getChannelData(S),B=E.sa,z=0;z<d;z+=1)B[z*s+S]=F[z];yo(b,d,m)}if(n==window.h.I.ya||n==window.h.I.La)for(wo(b,d,m),S=0;S<R.outputBuffer.numberOfChannels;++S)for(F=R.outputBuffer.getChannelData(S),B=E.sa,z=0;z<d;z+=1)F[z]=B[z*s+S];else for(S=0;S<R.outputBuffer.numberOfChannels;++S)R.outputBuffer.getChannelData(S).fill(0)},n!=window.h.I.capture&&n!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(R){E.Da=E.J.createMediaStreamSource(R),E.Da.connect(E.Z),E.Z.connect(E.J.destination)}).catch(function(R){console.log("Failed to get user media: "+R)}),n==window.h.I.ya&&E.Z.connect(E.J.destination),E.qb=b,window.h.yc(E)},464670:n=>window.h.ra(n).J.sampleRate,464743:n=>{n=window.h.ra(n),n.Z!==void 0&&(n.Z.onaudioprocess=function(){},n.Z.disconnect(),n.Z=void 0),n.Da!==void 0&&(n.Da.disconnect(),n.Da=void 0),n.J.close(),n.J=void 0,n.qb=void 0},465143:n=>{window.h.Cb(n)},465193:n=>{n=window.h.ra(n),n.J.resume(),n.state=window.h.ga.yb},465332:n=>{n=window.h.ra(n),n.J.suspend(),n.state=window.h.ga.stopped}},c=n=>{for(;0<n.length;)n.shift()(g)},w=(n,s)=>{for(var l=0,d=n.length-1;0<=d;d--){var m=n[d];m==="."?n.splice(d,1):m===".."?(n.splice(d,1),l++):l&&(n.splice(d,1),l--)}if(s)for(;l;l--)n.unshift("..");return n},C=n=>{var s=n.charAt(0)==="/",l=n.substr(-1)==="/";return(n=w(n.split("/").filter(d=>!!d),!s).join("/"))||s||(n="."),n&&l&&(n+="/"),(s?"/":"")+n},I=n=>{var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1);return n=s[0],s=s[1],!n&&!s?".":(s&&(s=s.substr(0,s.length-1)),n+s)},M=n=>{if(n==="/")return"/";n=C(n),n=n.replace(/\/$/,"");var s=n.lastIndexOf("/");return s===-1?n:n.substr(s+1)},X=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return n=>crypto.getRandomValues(n);Yt("initRandomDevice")},te=n=>(te=X())(n);function G(){for(var n="",s=!1,l=arguments.length-1;-1<=l&&!s;l--){if(s=0<=l?arguments[l]:"/",typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";n=s+"/"+n,s=s.charAt(0)==="/"}return n=w(n.split("/").filter(d=>!!d),!s).join("/"),(s?"/":"")+n||"."}var ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,be=(n,s,l)=>{var d=s+l;for(l=s;n[l]&&!(l>=d);)++l;if(16<l-s&&n.buffer&&ae)return ae.decode(n.subarray(s,l));for(d="";s<l;){var m=n[s++];if(m&128){var b=n[s++]&63;if((m&224)==192)d+=String.fromCharCode((m&31)<<6|b);else{var E=n[s++]&63;m=(m&240)==224?(m&15)<<12|b<<6|E:(m&7)<<18|b<<12|E<<6|n[s++]&63,65536>m?d+=String.fromCharCode(m):(m-=65536,d+=String.fromCharCode(55296|m>>10,56320|m&1023))}}else d+=String.fromCharCode(m)}return d},Le=[],Te=n=>{for(var s=0,l=0;l<n.length;++l){var d=n.charCodeAt(l);127>=d?s++:2047>=d?s+=2:55296<=d&&57343>=d?(s+=4,++l):s+=3}return s},yt=(n,s,l,d)=>{if(!(0<d))return 0;var m=l;d=l+d-1;for(var b=0;b<n.length;++b){var E=n.charCodeAt(b);if(55296<=E&&57343>=E){var T=n.charCodeAt(++b);E=65536+((E&1023)<<10)|T&1023}if(127>=E){if(l>=d)break;s[l++]=E}else{if(2047>=E){if(l+1>=d)break;s[l++]=192|E>>6}else{if(65535>=E){if(l+2>=d)break;s[l++]=224|E>>12}else{if(l+3>=d)break;s[l++]=240|E>>18,s[l++]=128|E>>12&63}s[l++]=128|E>>6&63}s[l++]=128|E&63}}return s[l]=0,l-m};function ct(n,s){var l=Array(Te(n)+1);return n=yt(n,l,0,l.length),s&&(l.length=n),l}var et=[];function tt(n,s){et[n]={input:[],F:[],V:s},Si(n,ht)}var ht={open:function(n){var s=et[n.node.za];if(!s)throw new H(43);n.s=s,n.seekable=!1},close:function(n){n.s.V.qa(n.s)},qa:function(n){n.s.V.qa(n.s)},read:function(n,s,l,d){if(!n.s||!n.s.V.jb)throw new H(60);for(var m=0,b=0;b<d;b++){try{var E=n.s.V.jb(n.s)}catch{throw new H(29)}if(E===void 0&&m===0)throw new H(6);if(E==null)break;m++,s[l+b]=E}return m&&(n.node.timestamp=Date.now()),m},write:function(n,s,l,d){if(!n.s||!n.s.V.Oa)throw new H(60);try{for(var m=0;m<d;m++)n.s.V.Oa(n.s,s[l+m])}catch{throw new H(29)}return d&&(n.node.timestamp=Date.now()),m}},Xt={jb:function(){e:{if(!Le.length){var n=null;if(typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`)),!n){n=null;break e}Le=ct(n,!0)}n=Le.shift()}return n},Oa:function(n,s){s===null||s===10?(Ye(be(n.F,0)),n.F=[]):s!=0&&n.F.push(s)},qa:function(n){n.F&&0<n.F.length&&(Ye(be(n.F,0)),n.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},Qt={Oa:function(n,s){s===null||s===10?(Je(be(n.F,0)),n.F=[]):s!=0&&n.F.push(s)},qa:function(n){n.F&&0<n.F.length&&(Je(be(n.F,0)),n.F=[])}};function Ct(n,s){var l=n.j?n.j.length:0;l>=s||(s=Math.max(s,l*(1048576>l?2:1.125)>>>0),l!=0&&(s=Math.max(s,256)),l=n.j,n.j=new Uint8Array(s),0<n.v&&n.j.set(l.subarray(0,n.v),0))}var Z={O:null,U(){return Z.createNode(null,"/",16895,0)},createNode(n,s,l,d){if((l&61440)===24576||(l&61440)===4096)throw new H(63);return Z.O||(Z.O={dir:{node:{Y:Z.l.Y,P:Z.l.P,ka:Z.l.ka,va:Z.l.va,vb:Z.l.vb,Bb:Z.l.Bb,wb:Z.l.wb,tb:Z.l.tb,Ea:Z.l.Ea},stream:{ba:Z.m.ba}},file:{node:{Y:Z.l.Y,P:Z.l.P},stream:{ba:Z.m.ba,read:Z.m.read,write:Z.m.write,pa:Z.m.pa,mb:Z.m.mb,ob:Z.m.ob}},link:{node:{Y:Z.l.Y,P:Z.l.P,ma:Z.l.ma},stream:{}},ab:{node:{Y:Z.l.Y,P:Z.l.P},stream:du}}),l=Bs(n,s,l,d),(l.mode&61440)===16384?(l.l=Z.O.dir.node,l.m=Z.O.dir.stream,l.j={}):(l.mode&61440)===32768?(l.l=Z.O.file.node,l.m=Z.O.file.stream,l.v=0,l.j=null):(l.mode&61440)===40960?(l.l=Z.O.link.node,l.m=Z.O.link.stream):(l.mode&61440)===8192&&(l.l=Z.O.ab.node,l.m=Z.O.ab.stream),l.timestamp=Date.now(),n&&(n.j[s]=l,n.timestamp=l.timestamp),l},Kc(n){return n.j?n.j.subarray?n.j.subarray(0,n.v):new Uint8Array(n.j):new Uint8Array(0)},l:{Y(n){var s={};return s.Jc=(n.mode&61440)===8192?n.id:1,s.Mc=n.id,s.mode=n.mode,s.Oc=1,s.uid=0,s.Lc=0,s.za=n.za,(n.mode&61440)===16384?s.size=4096:(n.mode&61440)===32768?s.size=n.v:(n.mode&61440)===40960?s.size=n.link.length:s.size=0,s.Bc=new Date(n.timestamp),s.Nc=new Date(n.timestamp),s.Ic=new Date(n.timestamp),s.Jb=4096,s.Cc=Math.ceil(s.size/s.Jb),s},P(n,s){if(s.mode!==void 0&&(n.mode=s.mode),s.timestamp!==void 0&&(n.timestamp=s.timestamp),s.size!==void 0&&(s=s.size,n.v!=s))if(s==0)n.j=null,n.v=0;else{var l=n.j;n.j=new Uint8Array(s),l&&n.j.set(l.subarray(0,Math.min(s,n.v))),n.v=s}},ka(){throw Ci[44]},va(n,s,l,d){return Z.createNode(n,s,l,d)},vb(n,s,l){if((n.mode&61440)===16384){try{var d=xr(s,l)}catch{}if(d)for(var m in d.j)throw new H(55)}delete n.parent.j[n.name],n.parent.timestamp=Date.now(),n.name=l,s.j[l]=n,s.timestamp=n.parent.timestamp,n.parent=s},Bb(n,s){delete n.j[s],n.timestamp=Date.now()},wb(n,s){var l=xr(n,s),d;for(d in l.j)throw new H(55);delete n.j[s],n.timestamp=Date.now()},tb(n){var s=[".",".."],l;for(l in n.j)n.j.hasOwnProperty(l)&&s.push(l);return s},Ea(n,s,l){return n=Z.createNode(n,s,41471,0),n.link=l,n},ma(n){if((n.mode&61440)!==40960)throw new H(28);return n.link}},m:{read(n,s,l,d,m){var b=n.node.j;if(m>=n.node.v)return 0;if(n=Math.min(n.node.v-m,d),8<n&&b.subarray)s.set(b.subarray(m,m+n),l);else for(d=0;d<n;d++)s[l+d]=b[m+d];return n},write(n,s,l,d,m,b){if(s.buffer===xe.buffer&&(b=!1),!d)return 0;if(n=n.node,n.timestamp=Date.now(),s.subarray&&(!n.j||n.j.subarray)){if(b)return n.j=s.subarray(l,l+d),n.v=d;if(n.v===0&&m===0)return n.j=s.slice(l,l+d),n.v=d;if(m+d<=n.v)return n.j.set(s.subarray(l,l+d),m),d}if(Ct(n,m+d),n.j.subarray&&s.subarray)n.j.set(s.subarray(l,l+d),m);else for(b=0;b<d;b++)n.j[m+b]=s[l+b];return n.v=Math.max(n.v,m+d),d},ba(n,s,l){if(l===1?s+=n.position:l===2&&(n.node.mode&61440)===32768&&(s+=n.node.v),0>s)throw new H(28);return s},pa(n,s,l){Ct(n.node,s+l),n.node.v=Math.max(n.node.v,s+l)},mb(n,s,l,d,m){if((n.node.mode&61440)!==32768)throw new H(43);if(n=n.node.j,m&2||n.buffer!==xe.buffer){if((0<l||l+s<n.length)&&(n.subarray?n=n.subarray(l,l+s):n=Array.prototype.slice.call(n,l,l+s)),l=!0,Yt(),s=void 0,!s)throw new H(48);xe.set(n,s)}else l=!1,s=n.byteOffset;return{o:s,M:l}},ob(n,s,l,d){return Z.m.write(n,s,0,d,l,!1),0}}};function ve(n,s){var l=0;return n&&(l|=365),s&&(l|=146),l}var St=null,Fs={},Mr=[],cu=1,rr=null,$s=!0,H=null,Ci={},fn=(n,s={})=>{if(n=G(n),!n)return{path:"",node:null};if(s=Object.assign({hb:!0,Qa:0},s),8<s.Qa)throw new H(32);n=n.split("/").filter(E=>!!E);for(var l=St,d="/",m=0;m<n.length;m++){var b=m===n.length-1;if(b&&s.parent)break;if(l=xr(l,n[m]),d=C(d+"/"+n[m]),l.wa&&(!b||b&&s.hb)&&(l=l.wa.root),!b||s.gb){for(b=0;(l.mode&61440)===40960;)if(l=fu(d),d=G(I(d),l),l=fn(d,{Qa:s.Qa+1}).node,40<b++)throw new H(32)}}return{path:d,node:l}},Ds=n=>{for(var s;;){if(n===n.parent)return n=n.U.nb,s?n[n.length-1]!=="/"?`${n}/${s}`:n+s:n;s=s?`${n.name}/${s}`:n.name,n=n.parent}},Us=(n,s)=>{for(var l=0,d=0;d<s.length;d++)l=(l<<5)-l+s.charCodeAt(d)|0;return(n+l>>>0)%rr.length},xr=(n,s)=>{var l;if(l=(l=Lr(n,"x"))?l:n.l.ka?0:2)throw new H(l,n);for(l=rr[Us(n.id,s)];l;l=l.lc){var d=l.name;if(l.parent.id===n.id&&d===s)return l}return n.l.ka(n,s)},Bs=(n,s,l,d)=>(n=new po(n,s,l,d),s=Us(n.parent.id,n.name),n.lc=rr[s],rr[s]=n),Ns=n=>{var s=["r","w","rw"][n&3];return n&512&&(s+="w"),s},Lr=(n,s)=>{if($s)return 0;if(!s.includes("r")||n.mode&292){if(s.includes("w")&&!(n.mode&146)||s.includes("x")&&!(n.mode&73))return 2}else return 2;return 0},Ws=(n,s)=>{try{return xr(n,s),20}catch{}return Lr(n,"wx")},hu=()=>{for(var n=0;4096>=n;n++)if(!Mr[n])return n;throw new H(33)},Zt=n=>{if(n=Mr[n],!n)throw new H(8);return n},Vs=(n,s=-1)=>(sr||(sr=function(){this.h={}},sr.prototype={},Object.defineProperties(sr.prototype,{object:{get(){return this.node},set(l){this.node=l}},flags:{get(){return this.h.flags},set(l){this.h.flags=l}},position:{get(){return this.h.position},set(l){this.h.position=l}}})),n=Object.assign(new sr,n),s==-1&&(s=hu()),n.X=s,Mr[s]=n),du={open:n=>{n.m=Fs[n.node.za].m,n.m.open&&n.m.open(n)},ba:()=>{throw new H(70)}},Si=(n,s)=>{Fs[n]={m:s}},qs=(n,s)=>{var l=s==="/",d=!s;if(l&&St)throw new H(10);if(!l&&!d){var m=fn(s,{hb:!1});if(s=m.path,m=m.node,m.wa)throw new H(10);if((m.mode&61440)!==16384)throw new H(54)}s={type:n,Qc:{},nb:s,kc:[]},n=n.U(s),n.U=s,s.root=n,l?St=n:m&&(m.wa=s,m.U&&m.U.kc.push(s))},wt=(n,s,l)=>{var d=fn(n,{parent:!0}).node;if(n=M(n),!n||n==="."||n==="..")throw new H(28);var m=Ws(d,n);if(m)throw new H(m);if(!d.l.va)throw new H(63);return d.l.va(d,n,s,l)},Fr=(n,s,l)=>{typeof l>"u"&&(l=s,s=438),wt(n,s|8192,l)},Ti=(n,s)=>{if(!G(n))throw new H(44);var l=fn(s,{parent:!0}).node;if(!l)throw new H(44);s=M(s);var d=Ws(l,s);if(d)throw new H(d);if(!l.l.Ea)throw new H(63);l.l.Ea(l,s,n)},fu=n=>{if(n=fn(n).node,!n)throw new H(44);if(!n.l.ma)throw new H(28);return G(Ds(n.parent),n.l.ma(n))},$r=(n,s,l)=>{if(n==="")throw new H(44);if(typeof s=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[s];if(typeof d>"u")throw Error(`Unknown file open mode: ${s}`);s=d}if(l=s&64?(typeof l>"u"?438:l)&4095|32768:0,typeof n=="object")var m=n;else{n=C(n);try{m=fn(n,{gb:!(s&131072)}).node}catch{}}if(d=!1,s&64)if(m){if(s&128)throw new H(20)}else m=wt(n,l,0),d=!0;if(!m)throw new H(44);if((m.mode&61440)===8192&&(s&=-513),s&65536&&(m.mode&61440)!==16384)throw new H(54);if(!d&&(l=m?(m.mode&61440)===40960?32:(m.mode&61440)===16384&&(Ns(s)!=="r"||s&512)?31:Lr(m,Ns(s)):44))throw new H(l);if(s&512&&!d){if(l=m,l=typeof l=="string"?fn(l,{gb:!0}).node:l,!l.l.P)throw new H(63);if((l.mode&61440)===16384)throw new H(31);if((l.mode&61440)!==32768)throw new H(28);if(d=Lr(l,"w"))throw new H(d);l.l.P(l,{size:0,timestamp:Date.now()})}return s&=-131713,m=Vs({node:m,path:Ds(m),flags:s,seekable:!0,position:0,m:m.m,zc:[],error:!1}),m.m.open&&m.m.open(m),!g.logReadFiles||s&1||(Dr||(Dr={}),n in Dr||(Dr[n]=1)),m},zs=(n,s,l)=>{if(n.X===null)throw new H(8);if(!n.seekable||!n.m.ba)throw new H(70);if(l!=0&&l!=1&&l!=2)throw new H(28);n.position=n.m.ba(n,s,l),n.zc=[]},Hs=()=>{H||(H=function(n,s){this.name="ErrnoError",this.node=s,this.pc=function(l){this.aa=l},this.pc(n),this.message="FS error"},H.prototype=Error(),H.prototype.constructor=H,[44].forEach(n=>{Ci[n]=new H(n),Ci[n].stack="<generic error, no stack>"}))},Gs,ir=(n,s,l)=>{n=C("/dev/"+n);var d=ve(!!s,!!l);Ri||(Ri=64);var m=Ri++<<8|0;Si(m,{open:b=>{b.seekable=!1},close:()=>{l&&l.buffer&&l.buffer.length&&l(10)},read:(b,E,T,R)=>{for(var S=0,F=0;F<R;F++){try{var B=s()}catch{throw new H(29)}if(B===void 0&&S===0)throw new H(6);if(B==null)break;S++,E[T+F]=B}return S&&(b.node.timestamp=Date.now()),S},write:(b,E,T,R)=>{for(var S=0;S<R;S++)try{l(E[T+S])}catch{throw new H(29)}return R&&(b.node.timestamp=Date.now()),S}}),Fr(n,d,m)},Ri,pn={},sr,Dr,or=void 0;function Dt(){return or+=4,ce[or-4>>2]}function Ks(n){if(n===void 0)return"_unknown";n=n.replace(/[^a-zA-Z0-9_]/g,"$");var s=n.charCodeAt(0);return 48<=s&&57>=s?`_${n}`:n}function Ur(n,s){return n=Ks(n),{[n]:function(){return s.apply(this,arguments)}}[n]}function Ys(){this.M=[void 0],this.ib=[]}var dt=new Ys,On=void 0;function re(n){throw new On(n)}var bt=n=>(n||re("Cannot use deleted val. handle = "+n),dt.get(n).value),At=n=>{switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return dt.pa({ub:1,value:n})}};function Js(n){var s=Error,l=Ur(n,function(d){this.name=n,this.message=d,d=Error(d).stack,d!==void 0&&(this.stack=this.toString()+`
`+d.replace(/^Error(:[^\n]*)?\n/,""))});return l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},l}var Xs=void 0,Qs=void 0;function Oe(n){for(var s="";Re[n];)s+=Qs[Re[n++]];return s}var ar=[];function Ii(){for(;ar.length;){var n=ar.pop();n.g.fa=!1,n.delete()}}var ur=void 0,Ut={};function Oi(n,s){for(s===void 0&&re("ptr should not be undefined");n.A;)s=n.na(s),n=n.A;return s}var vn={};function Zs(n){n=bo(n);var s=Oe(n);return Wt(n),s}function lr(n,s){var l=vn[n];return l===void 0&&re(s+" has unknown type "+Zs(n)),l}function Br(){}var ji=!1;function eo(n){--n.count.value,n.count.value===0&&(n.G?n.L.W(n.G):n.u.i.W(n.o))}function to(n,s,l){return s===l?n:l.A===void 0?null:(n=to(n,s,l.A),n===null?null:l.Pb(n))}var no={};function pu(n,s){return s=Oi(n,s),Ut[s]}var ro=void 0;function Nr(n){throw new ro(n)}function Wr(n,s){return s.u&&s.o||Nr("makeClassHandle requires ptr and ptrType"),!!s.L!=!!s.G&&Nr("Both smartPtrType and smartPtr must be specified"),s.count={value:1},jn(Object.create(n,{g:{value:s}}))}function jn(n){return typeof FinalizationRegistry>"u"?(jn=s=>s,n):(ji=new FinalizationRegistry(s=>{eo(s.g)}),jn=s=>{var l=s.g;return l.G&&ji.register(s,{g:l},s),s},Br=s=>{ji.unregister(s)},jn(n))}var Vr={};function cr(n){for(;n.length;){var s=n.pop();n.pop()(s)}}function hr(n){return this.fromWireType(ce[n>>2])}var Mn={},qr={};function st(n,s,l){function d(T){T=l(T),T.length!==n.length&&Nr("Mismatched type converter count");for(var R=0;R<n.length;++R)Tt(n[R],T[R])}n.forEach(function(T){qr[T]=s});var m=Array(s.length),b=[],E=0;s.forEach((T,R)=>{vn.hasOwnProperty(T)?m[R]=vn[T]:(b.push(T),Mn.hasOwnProperty(T)||(Mn[T]=[]),Mn[T].push(()=>{m[R]=vn[T],++E,E===b.length&&d(m)}))}),b.length===0&&d(m)}function zr(n){switch(n){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${n}`)}}function vu(n,s,l={}){var d=s.name;if(n||re(`type "${d}" must have a positive integer typeid pointer`),vn.hasOwnProperty(n)){if(l.$b)return;re(`Cannot register type '${d}' twice`)}vn[n]=s,delete qr[n],Mn.hasOwnProperty(n)&&(s=Mn[n],delete Mn[n],s.forEach(m=>m()))}function Tt(n,s,l={}){if(!("argPackAdvance"in s))throw new TypeError("registerType registeredInstance requires argPackAdvance");vu(n,s,l)}function Mi(n){re(n.g.u.i.name+" instance already deleted")}function en(){}function xi(n,s,l){if(n[s].B===void 0){var d=n[s];n[s]=function(){return n[s].B.hasOwnProperty(arguments.length)||re(`Function '${l}' called with an invalid number of arguments (${arguments.length}) - expects one of (${n[s].B})!`),n[s].B[arguments.length].apply(this,arguments)},n[s].B=[],n[s].B[d.ea]=d}}function Li(n,s,l){g.hasOwnProperty(n)?((l===void 0||g[n].B!==void 0&&g[n].B[l]!==void 0)&&re(`Cannot register public name '${n}' twice`),xi(g,n,n),g.hasOwnProperty(l)&&re(`Cannot register multiple overloads of a function with the same number of arguments (${l})!`),g[n].B[l]=s):(g[n]=s,l!==void 0&&(g[n].Pc=l))}function gu(n,s,l,d,m,b,E,T){this.name=n,this.constructor=s,this.N=l,this.W=d,this.A=m,this.Ub=b,this.na=E,this.Pb=T,this.rb=[]}function Hr(n,s,l){for(;s!==l;)s.na||re(`Expected null or instance of ${l.name}, got an instance of ${s.name}`),n=s.na(n),s=s.A;return n}function mu(n,s){return s===null?(this.Na&&re(`null is not a valid ${this.name}`),0):(s.g||re(`Cannot pass "${$i(s)}" as a ${this.name}`),s.g.o||re(`Cannot pass deleted object as a pointer of type ${this.name}`),Hr(s.g.o,s.g.u.i,this.i))}function _u(n,s){if(s===null){if(this.Na&&re(`null is not a valid ${this.name}`),this.ua){var l=this.Pa();return n!==null&&n.push(this.W,l),l}return 0}if(s.g||re(`Cannot pass "${$i(s)}" as a ${this.name}`),s.g.o||re(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&s.g.u.ta&&re(`Cannot convert argument of type ${s.g.L?s.g.L.name:s.g.u.name} to parameter type ${this.name}`),l=Hr(s.g.o,s.g.u.i,this.i),this.ua)switch(s.g.G===void 0&&re("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:s.g.L===this?l=s.g.G:re(`Cannot convert argument of type ${s.g.L?s.g.L.name:s.g.u.name} to parameter type ${this.name}`);break;case 1:l=s.g.G;break;case 2:if(s.g.L===this)l=s.g.G;else{var d=s.clone();l=this.oc(l,At(function(){d.delete()})),n!==null&&n.push(this.W,l)}break;default:re("Unsupporting sharing policy")}return l}function yu(n,s){return s===null?(this.Na&&re(`null is not a valid ${this.name}`),0):(s.g||re(`Cannot pass "${$i(s)}" as a ${this.name}`),s.g.o||re(`Cannot pass deleted object as a pointer of type ${this.name}`),s.g.u.ta&&re(`Cannot convert argument of type ${s.g.u.name} to parameter type ${this.name}`),Hr(s.g.o,s.g.u.i,this.i))}function Bt(n,s,l,d){this.name=n,this.i=s,this.Na=l,this.ta=d,this.ua=!1,this.W=this.oc=this.Pa=this.sb=this.tc=this.nc=void 0,s.A!==void 0?this.toWireType=_u:(this.toWireType=d?mu:yu,this.K=null)}function io(n,s,l){g.hasOwnProperty(n)||Nr("Replacing nonexistant public symbol"),g[n].B!==void 0&&l!==void 0?g[n].B[l]=s:(g[n]=s,g[n].ea=l)}var Gr=[],so=n=>{var s=Gr[n];return s||(n>=Gr.length&&(Gr.length=n+1),Gr[n]=s=je.get(n)),s},wu=(n,s)=>{var l=[];return function(){if(l.length=0,Object.assign(l,arguments),n.includes("j")){var d=g["dynCall_"+n];d=l&&l.length?d.apply(null,[s].concat(l)):d.call(null,s)}else d=so(s).apply(null,l);return d}};function Ge(n,s){n=Oe(n);var l=n.includes("j")?wu(n,s):so(s);return typeof l!="function"&&re(`unknown function pointer with signature ${n}: ${s}`),l}var oo=void 0;function Nt(n,s){function l(b){m[b]||vn[b]||(qr[b]?qr[b].forEach(l):(d.push(b),m[b]=!0))}var d=[],m={};throw s.forEach(l),new oo(`${n}: `+d.map(Zs).join([", "]))}function Kr(n,s,l,d,m){var b=s.length;2>b&&re("argTypes array size mismatch! Must at least get return value and 'this' types!");var E=s[1]!==null&&l!==null,T=!1;for(l=1;l<s.length;++l)if(s[l]!==null&&s[l].K===void 0){T=!0;break}var R=s[0].name!=="void",S=b-2,F=Array(S),B=[],z=[];return function(){if(arguments.length!==S&&re(`function ${n} called with ${arguments.length} arguments, expected ${S} args!`),z.length=0,B.length=E?2:1,B[0]=m,E){var P=s[1].toWireType(z,this);B[1]=P}for(var L=0;L<S;++L)F[L]=s[L+2].toWireType(z,arguments[L]),B.push(F[L]);if(L=d.apply(null,B),T)cr(z);else for(var x=E?1:2;x<s.length;x++){var ie=x===1?P:F[x-2];s[x].K!==null&&s[x].K(ie)}return P=R?s[0].fromWireType(L):void 0,P}}function Yr(n,s){for(var l=[],d=0;d<n;d++)l.push(_e[s+4*d>>2]);return l}function ao(n,s,l){return n instanceof Object||re(`${l} with invalid "this": ${n}`),n instanceof s.i.constructor||re(`${l} incompatible with "this" of type ${n.constructor.name}`),n.g.o||re(`cannot call emscripten binding method ${l} on deleted object`),Hr(n.g.o,n.g.u.i,s.i)}function Fi(n){n>=dt.h&&--dt.get(n).ub===0&&dt.Zb(n)}function bu(n,s,l){switch(s){case 0:return function(d){return this.fromWireType((l?xe:Re)[d])};case 1:return function(d){return this.fromWireType((l?Ve:gt)[d>>1])};case 2:return function(d){return this.fromWireType((l?ce:_e)[d>>2])};default:throw new TypeError("Unknown integer type: "+n)}}function $i(n){if(n===null)return"null";var s=typeof n;return s==="object"||s==="array"||s==="function"?n.toString():""+n}function Au(n,s){switch(s){case 2:return function(l){return this.fromWireType(mt[l>>2])};case 3:return function(l){return this.fromWireType(ke[l>>3])};default:throw new TypeError("Unknown float type: "+n)}}function Eu(n,s,l){switch(s){case 0:return l?function(d){return xe[d]}:function(d){return Re[d]};case 1:return l?function(d){return Ve[d>>1]}:function(d){return gt[d>>1]};case 2:return l?function(d){return ce[d>>2]}:function(d){return _e[d>>2]};default:throw new TypeError("Unknown integer type: "+n)}}var uo=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ku=(n,s)=>{for(var l=n>>1,d=l+s/2;!(l>=d)&&gt[l];)++l;if(l<<=1,32<l-n&&uo)return uo.decode(Re.subarray(n,l));for(l="",d=0;!(d>=s/2);++d){var m=Ve[n+2*d>>1];if(m==0)break;l+=String.fromCharCode(m)}return l},Pu=(n,s,l)=>{if(l===void 0&&(l=2147483647),2>l)return 0;l-=2;var d=s;l=l<2*n.length?l/2:n.length;for(var m=0;m<l;++m)Ve[s>>1]=n.charCodeAt(m),s+=2;return Ve[s>>1]=0,s-d},Cu=n=>2*n.length,Su=(n,s)=>{for(var l=0,d="";!(l>=s/4);){var m=ce[n+4*l>>2];if(m==0)break;++l,65536<=m?(m-=65536,d+=String.fromCharCode(55296|m>>10,56320|m&1023)):d+=String.fromCharCode(m)}return d},Tu=(n,s,l)=>{if(l===void 0&&(l=2147483647),4>l)return 0;var d=s;l=d+l-4;for(var m=0;m<n.length;++m){var b=n.charCodeAt(m);if(55296<=b&&57343>=b){var E=n.charCodeAt(++m);b=65536+((b&1023)<<10)|E&1023}if(ce[s>>2]=b,s+=4,s+4>l)break}return ce[s>>2]=0,s-d},Ru=n=>{for(var s=0,l=0;l<n.length;++l){var d=n.charCodeAt(l);55296<=d&&57343>=d&&++l,s+=4}return s},Iu={};function Jr(n){var s=Iu[n];return s===void 0?Oe(n):s}var Xr=[];function Ou(n){var s=Xr.length;return Xr.push(n),s}function ju(n,s){for(var l=Array(n),d=0;d<n;++d)l[d]=lr(_e[s+4*d>>2],"parameter "+d);return l}var lo=[],Di=[],Ui={},co=()=>{if(!Bi){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},s;for(s in Ui)Ui[s]===void 0?delete n[s]:n[s]=Ui[s];var l=[];for(s in n)l.push(`${s}=${n[s]}`);Bi=l}return Bi},Bi,Qr=n=>n%4===0&&(n%100!==0||n%400===0),ho=[31,29,31,30,31,30,31,31,30,31,30,31],fo=[31,28,31,30,31,30,31,31,30,31,30,31],Mu=(n,s,l,d)=>{function m(P,L,x){for(P=typeof P=="number"?P.toString():P||"";P.length<L;)P=x[0]+P;return P}function b(P,L){return m(P,L,"0")}function E(P,L){function x(oe){return 0>oe?-1:0<oe?1:0}var ie;return(ie=x(P.getFullYear()-L.getFullYear()))===0&&(ie=x(P.getMonth()-L.getMonth()))===0&&(ie=x(P.getDate()-L.getDate())),ie}function T(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function R(P){var L=P.ca;for(P=new Date(new Date(P.da+1900,0,1).getTime());0<L;){var x=P.getMonth(),ie=(Qr(P.getFullYear())?ho:fo)[x];if(L>ie-P.getDate())L-=ie-P.getDate()+1,P.setDate(1),11>x?P.setMonth(x+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+L);break}}return x=new Date(P.getFullYear()+1,0,4),L=T(new Date(P.getFullYear(),0,4)),x=T(x),0>=E(L,P)?0>=E(x,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}var S=ce[d+40>>2];d={wc:ce[d>>2],vc:ce[d+4>>2],Fa:ce[d+8>>2],Sa:ce[d+12>>2],Ga:ce[d+16>>2],da:ce[d+20>>2],R:ce[d+24>>2],ca:ce[d+28>>2],Rc:ce[d+32>>2],uc:ce[d+36>>2],xc:S&&S?be(Re,S):""},l=l?be(Re,l):"",S={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var F in S)l=l.replace(new RegExp(F,"g"),S[F]);var B="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),z="January February March April May June July August September October November December".split(" ");S={"%a":P=>B[P.R].substring(0,3),"%A":P=>B[P.R],"%b":P=>z[P.Ga].substring(0,3),"%B":P=>z[P.Ga],"%C":P=>b((P.da+1900)/100|0,2),"%d":P=>b(P.Sa,2),"%e":P=>m(P.Sa,2," "),"%g":P=>R(P).toString().substring(2),"%G":P=>R(P),"%H":P=>b(P.Fa,2),"%I":P=>(P=P.Fa,P==0?P=12:12<P&&(P-=12),b(P,2)),"%j":P=>{for(var L=0,x=0;x<=P.Ga-1;L+=(Qr(P.da+1900)?ho:fo)[x++]);return b(P.Sa+L,3)},"%m":P=>b(P.Ga+1,2),"%M":P=>b(P.vc,2),"%n":()=>`
`,"%p":P=>0<=P.Fa&&12>P.Fa?"AM":"PM","%S":P=>b(P.wc,2),"%t":()=>"	","%u":P=>P.R||7,"%U":P=>b(Math.floor((P.ca+7-P.R)/7),2),"%V":P=>{var L=Math.floor((P.ca+7-(P.R+6)%7)/7);if(2>=(P.R+371-P.ca-2)%7&&L++,L)L==53&&(x=(P.R+371-P.ca)%7,x==4||x==3&&Qr(P.da)||(L=1));else{L=52;var x=(P.R+7-P.ca-1)%7;(x==4||x==5&&Qr(P.da%400-1))&&L++}return b(L,2)},"%w":P=>P.R,"%W":P=>b(Math.floor((P.ca+7-(P.R+6)%7)/7),2),"%y":P=>(P.da+1900).toString().substring(2),"%Y":P=>P.da+1900,"%z":P=>{P=P.uc;var L=0<=P;return P=Math.abs(P)/60,(L?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.xc,"%%":()=>"%"},l=l.replace(/%%/g,"\0\0");for(F in S)l.includes(F)&&(l=l.replace(new RegExp(F,"g"),S[F](d)));return l=l.replace(/\0\0/g,"%"),F=ct(l,!1),F.length>s?0:(xe.set(F,n),F.length-1)};function po(n,s,l,d){n||(n=this),this.parent=n,this.U=n.U,this.wa=null,this.id=cu++,this.name=s,this.mode=l,this.l={},this.m={},this.za=d}Object.defineProperties(po.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(n){n?this.mode|=146:this.mode&=-147}}}),Hs(),rr=Array(4096),qs(Z,"/"),wt("/tmp",16895,0),wt("/home",16895,0),wt("/home/web_user",16895,0),(()=>{wt("/dev",16895,0),Si(259,{read:()=>0,write:(d,m,b,E)=>E}),Fr("/dev/null",259),tt(1280,Xt),tt(1536,Qt),Fr("/dev/tty",1280),Fr("/dev/tty1",1536);var n=new Uint8Array(1024),s=0,l=()=>(s===0&&(s=te(n).byteLength),n[--s]);ir("random",l),ir("urandom",l),wt("/dev/shm",16895,0),wt("/dev/shm/tmp",16895,0)})(),(()=>{wt("/proc",16895,0);var n=wt("/proc/self",16895,0);wt("/proc/self/fd",16895,0),qs({U:()=>{var s=Bs(n,"fd",16895,73);return s.l={ka:(l,d)=>{var m=Zt(+d);return l={parent:null,U:{nb:"fake"},l:{ma:()=>m.path}},l.parent=l}},s}},"/proc/self/fd")})(),Object.assign(Ys.prototype,{get(n){return this.M[n]},has(n){return this.M[n]!==void 0},pa(n){var s=this.ib.pop()||this.M.length;return this.M[s]=n,s},Zb(n){this.M[n]=void 0,this.ib.push(n)}}),On=g.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},dt.M.push({value:void 0},{value:null},{value:!0},{value:!1}),dt.h=dt.M.length,g.count_emval_handles=function(){for(var n=0,s=dt.h;s<dt.M.length;++s)dt.M[s]!==void 0&&++n;return n},Xs=g.PureVirtualError=Js("PureVirtualError");for(var vo=Array(256),Zr=0;256>Zr;++Zr)vo[Zr]=String.fromCharCode(Zr);Qs=vo,g.getInheritedInstanceCount=function(){return Object.keys(Ut).length},g.getLiveInheritedInstances=function(){var n=[],s;for(s in Ut)Ut.hasOwnProperty(s)&&n.push(Ut[s]);return n},g.flushPendingDeletes=Ii,g.setDelayFunction=function(n){ur=n,ar.length&&ur&&ur(Ii)},ro=g.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},en.prototype.isAliasOf=function(n){if(!(this instanceof en&&n instanceof en))return!1;var s=this.g.u.i,l=this.g.o,d=n.g.u.i;for(n=n.g.o;s.A;)l=s.na(l),s=s.A;for(;d.A;)n=d.na(n),d=d.A;return s===d&&l===n},en.prototype.clone=function(){if(this.g.o||Mi(this),this.g.ia)return this.g.count.value+=1,this;var n=jn,s=Object,l=s.create,d=Object.getPrototypeOf(this),m=this.g;return n=n(l.call(s,d,{g:{value:{count:m.count,fa:m.fa,ia:m.ia,o:m.o,u:m.u,G:m.G,L:m.L}}})),n.g.count.value+=1,n.g.fa=!1,n},en.prototype.delete=function(){this.g.o||Mi(this),this.g.fa&&!this.g.ia&&re("Object already scheduled for deletion"),Br(this),eo(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},en.prototype.isDeleted=function(){return!this.g.o},en.prototype.deleteLater=function(){return this.g.o||Mi(this),this.g.fa&&!this.g.ia&&re("Object already scheduled for deletion"),ar.push(this),ar.length===1&&ur&&ur(Ii),this.g.fa=!0,this},Bt.prototype.Vb=function(n){return this.sb&&(n=this.sb(n)),n},Bt.prototype.bb=function(n){this.W&&this.W(n)},Bt.prototype.argPackAdvance=8,Bt.prototype.readValueFromPointer=hr,Bt.prototype.deleteObject=function(n){n!==null&&n.delete()},Bt.prototype.fromWireType=function(n){function s(){return this.ua?Wr(this.i.N,{u:this.nc,o:l,L:this,G:n}):Wr(this.i.N,{u:this,o:n})}var l=this.Vb(n);if(!l)return this.bb(n),null;var d=pu(this.i,l);if(d!==void 0)return d.g.count.value===0?(d.g.o=l,d.g.G=n,d.clone()):(d=d.clone(),this.bb(n),d);if(d=this.i.Ub(l),d=no[d],!d)return s.call(this);d=this.ta?d.Kb:d.pointerType;var m=to(l,this.i,d.i);return m===null?s.call(this):this.ua?Wr(d.i.N,{u:d,o:m,L:this,G:n}):Wr(d.i.N,{u:d,o:m})},oo=g.UnboundTypeError=Js("UnboundTypeError");var go={__syscall_fcntl64:function(n,s,l){or=l;try{var d=Zt(n);switch(s){case 0:var m=Dt();return 0>m?-28:Vs(d,m).X;case 1:case 2:return 0;case 3:return d.flags;case 4:return m=Dt(),d.flags|=m,0;case 5:return m=Dt(),Ve[m+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ce[mo()>>2]=28,-1;default:return-28}}catch(b){if(typeof pn>"u"||b.name!=="ErrnoError")throw b;return-b.aa}},__syscall_ioctl:function(n,s,l){or=l;try{var d=Zt(n);switch(s){case 21509:return d.s?0:-59;case 21505:if(!d.s)return-59;if(d.s.V.bc){s=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var m=Dt();ce[m>>2]=25856,ce[m+4>>2]=5,ce[m+8>>2]=191,ce[m+12>>2]=35387;for(var b=0;32>b;b++)xe[m+b+17>>0]=s[b]||0}return 0;case 21510:case 21511:case 21512:return d.s?0:-59;case 21506:case 21507:case 21508:if(!d.s)return-59;if(d.s.V.cc)for(m=Dt(),s=[],b=0;32>b;b++)s.push(xe[m+b+17>>0]);return 0;case 21519:return d.s?(m=Dt(),ce[m>>2]=0):-59;case 21520:return d.s?-28:-59;case 21531:if(m=Dt(),!d.m.ac)throw new H(59);return d.m.ac(d,s,m);case 21523:return d.s?(d.s.V.dc&&(b=[24,80],m=Dt(),Ve[m>>1]=b[0],Ve[m+2>>1]=b[1]),0):-59;case 21524:return d.s?0:-59;case 21515:return d.s?0:-59;default:return-28}}catch(E){if(typeof pn>"u"||E.name!=="ErrnoError")throw E;return-E.aa}},__syscall_openat:function(n,s,l,d){or=d;try{s=s?be(Re,s):"";var m=s;if(m.charAt(0)==="/")s=m;else{var b=n===-100?"/":Zt(n).path;if(m.length==0)throw new H(44);s=C(b+"/"+m)}var E=d?Dt():0;return $r(s,l,E).X}catch(T){if(typeof pn>"u"||T.name!=="ErrnoError")throw T;return-T.aa}},_embind_create_inheriting_constructor:function(n,s,l){n=Oe(n),s=lr(s,"wrapper"),l=bt(l);var d=[].slice,m=s.i,b=m.N,E=m.A.N,T=m.A.constructor;n=Ur(n,function(){m.A.rb.forEach((function(S){if(this[S]===E[S])throw new Xs(`Pure virtual function ${S} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:b}),this.__construct.apply(this,d.call(arguments))}),b.__construct=function(){this===b&&re("Pass correct 'this' to __construct");var S=T.implement.apply(void 0,[this].concat(d.call(arguments)));Br(S);var F=S.g;S.notifyOnDestruction(),F.ia=!0,Object.defineProperties(this,{g:{value:F}}),jn(this),S=F.o,S=Oi(m,S),Ut.hasOwnProperty(S)?re(`Tried to register registered instance: ${S}`):Ut[S]=this},b.__destruct=function(){this===b&&re("Pass correct 'this' to __destruct"),Br(this);var S=this.g.o;S=Oi(m,S),Ut.hasOwnProperty(S)?delete Ut[S]:re(`Tried to unregister unregistered instance: ${S}`)},n.prototype=Object.create(b);for(var R in l)n.prototype[R]=l[R];return At(n)},_embind_finalize_value_object:function(n){var s=Vr[n];delete Vr[n];var l=s.Pa,d=s.W,m=s.fb,b=m.map(E=>E.Yb).concat(m.map(E=>E.rc));st([n],b,E=>{var T={};return m.forEach((R,S)=>{var F=E[S],B=R.Wb,z=R.Xb,P=E[S+m.length],L=R.qc,x=R.sc;T[R.Sb]={read:ie=>F.fromWireType(B(z,ie)),write:(ie,oe)=>{var V=[];L(x,ie,P.toWireType(V,oe)),cr(V)}}}),[{name:s.name,fromWireType:function(R){var S={},F;for(F in T)S[F]=T[F].read(R);return d(R),S},toWireType:function(R,S){for(var F in T)if(!(F in S))throw new TypeError(`Missing field: "${F}"`);var B=l();for(F in T)T[F].write(B,S[F]);return R!==null&&R.push(d,B),B},argPackAdvance:8,readValueFromPointer:hr,K:d}]})},_embind_register_bigint:function(){},_embind_register_bool:function(n,s,l,d,m){var b=zr(l);s=Oe(s),Tt(n,{name:s,fromWireType:function(E){return!!E},toWireType:function(E,T){return T?d:m},argPackAdvance:8,readValueFromPointer:function(E){if(l===1)var T=xe;else if(l===2)T=Ve;else if(l===4)T=ce;else throw new TypeError("Unknown boolean type size: "+s);return this.fromWireType(T[E>>b])},K:null})},_embind_register_class:function(n,s,l,d,m,b,E,T,R,S,F,B,z){F=Oe(F),b=Ge(m,b),T&&(T=Ge(E,T)),S&&(S=Ge(R,S)),z=Ge(B,z);var P=Ks(F);Li(P,function(){Nt(`Cannot construct ${F} due to unbound types`,[d])}),st([n,s,l],d?[d]:[],function(L){if(L=L[0],d)var x=L.i,ie=x.N;else ie=en.prototype;L=Ur(P,function(){if(Object.getPrototypeOf(this)!==oe)throw new On("Use 'new' to construct "+F);if(V.$===void 0)throw new On(F+" has no accessible constructor");var qe=V.$[arguments.length];if(qe===void 0)throw new On(`Tried to invoke ctor of ${F} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(V.$).toString()}) parameters instead!`);return qe.apply(this,arguments)});var oe=Object.create(ie,{constructor:{value:L}});L.prototype=oe;var V=new gu(F,L,oe,z,x,b,T,S);V.A&&(V.A.oa===void 0&&(V.A.oa=[]),V.A.oa.push(V)),x=new Bt(F,V,!0,!1),ie=new Bt(F+"*",V,!1,!1);var Se=new Bt(F+" const*",V,!1,!0);return no[n]={pointerType:ie,Kb:Se},io(P,L),[x,ie,Se]})},_embind_register_class_class_function:function(n,s,l,d,m,b,E){var T=Yr(l,d);s=Oe(s),b=Ge(m,b),st([],[n],function(R){function S(){Nt(`Cannot call ${F} due to unbound types`,T)}R=R[0];var F=`${R.name}.${s}`;s.startsWith("@@")&&(s=Symbol[s.substring(2)]);var B=R.i.constructor;return B[s]===void 0?(S.ea=l-1,B[s]=S):(xi(B,s,F),B[s].B[l-1]=S),st([],T,function(z){if(z=Kr(F,[z[0],null].concat(z.slice(1)),null,b,E),B[s].B===void 0?(z.ea=l-1,B[s]=z):B[s].B[l-1]=z,R.i.oa)for(const P of R.i.oa)P.constructor.hasOwnProperty(s)||(P.constructor[s]=z);return[]}),[]})},_embind_register_class_class_property:function(n,s,l,d,m,b,E,T){s=Oe(s),b=Ge(m,b),st([],[n],function(R){R=R[0];var S=`${R.name}.${s}`,F={get(){Nt(`Cannot access ${S} due to unbound types`,[l])},enumerable:!0,configurable:!0};return F.set=T?()=>{Nt(`Cannot access ${S} due to unbound types`,[l])}:()=>{re(`${S} is a read-only property`)},Object.defineProperty(R.i.constructor,s,F),st([],[l],function(B){B=B[0];var z={get(){return B.fromWireType(b(d))},enumerable:!0};return T&&(T=Ge(E,T),z.set=P=>{var L=[];T(d,B.toWireType(L,P)),cr(L)}),Object.defineProperty(R.i.constructor,s,z),[]}),[]})},_embind_register_class_constructor:function(n,s,l,d,m,b){var E=Yr(s,l);m=Ge(d,m),st([],[n],function(T){T=T[0];var R=`constructor ${T.name}`;if(T.i.$===void 0&&(T.i.$=[]),T.i.$[s-1]!==void 0)throw new On(`Cannot register multiple constructors with identical number of parameters (${s-1}) for class '${T.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return T.i.$[s-1]=()=>{Nt(`Cannot construct ${T.name} due to unbound types`,E)},st([],E,function(S){return S.splice(1,0,null),T.i.$[s-1]=Kr(R,S,null,m,b),[]}),[]})},_embind_register_class_function:function(n,s,l,d,m,b,E,T){var R=Yr(l,d);s=Oe(s),b=Ge(m,b),st([],[n],function(S){function F(){Nt(`Cannot call ${B} due to unbound types`,R)}S=S[0];var B=`${S.name}.${s}`;s.startsWith("@@")&&(s=Symbol[s.substring(2)]),T&&S.i.rb.push(s);var z=S.i.N,P=z[s];return P===void 0||P.B===void 0&&P.className!==S.name&&P.ea===l-2?(F.ea=l-2,F.className=S.name,z[s]=F):(xi(z,s,B),z[s].B[l-2]=F),st([],R,function(L){return L=Kr(B,L,S,b,E),z[s].B===void 0?(L.ea=l-2,z[s]=L):z[s].B[l-2]=L,[]}),[]})},_embind_register_class_property:function(n,s,l,d,m,b,E,T,R,S){s=Oe(s),m=Ge(d,m),st([],[n],function(F){F=F[0];var B=`${F.name}.${s}`,z={get(){Nt(`Cannot access ${B} due to unbound types`,[l,E])},enumerable:!0,configurable:!0};return z.set=R?()=>{Nt(`Cannot access ${B} due to unbound types`,[l,E])}:()=>{re(B+" is a read-only property")},Object.defineProperty(F.i.N,s,z),st([],R?[l,E]:[l],function(P){var L=P[0],x={get(){var oe=ao(this,F,B+" getter");return L.fromWireType(m(b,oe))},enumerable:!0};if(R){R=Ge(T,R);var ie=P[1];x.set=function(oe){var V=ao(this,F,B+" setter"),Se=[];R(S,V,ie.toWireType(Se,oe)),cr(Se)}}return Object.defineProperty(F.i.N,s,x),[]}),[]})},_embind_register_emval:function(n,s){s=Oe(s),Tt(n,{name:s,fromWireType:function(l){var d=bt(l);return Fi(l),d},toWireType:function(l,d){return At(d)},argPackAdvance:8,readValueFromPointer:hr,K:null})},_embind_register_enum:function(n,s,l,d){function m(){}l=zr(l),s=Oe(s),m.values={},Tt(n,{name:s,constructor:m,fromWireType:function(b){return this.constructor.values[b]},toWireType:function(b,E){return E.value},argPackAdvance:8,readValueFromPointer:bu(s,l,d),K:null}),Li(s,m)},_embind_register_enum_value:function(n,s,l){var d=lr(n,"enum");s=Oe(s),n=d.constructor,d=Object.create(d.constructor.prototype,{value:{value:l},constructor:{value:Ur(`${d.name}_${s}`,function(){})}}),n.values[l]=d,n[s]=d},_embind_register_float:function(n,s,l){l=zr(l),s=Oe(s),Tt(n,{name:s,fromWireType:function(d){return d},toWireType:function(d,m){return m},argPackAdvance:8,readValueFromPointer:Au(s,l),K:null})},_embind_register_function:function(n,s,l,d,m,b){var E=Yr(s,l);n=Oe(n),m=Ge(d,m),Li(n,function(){Nt(`Cannot call ${n} due to unbound types`,E)},s-1),st([],E,function(T){return io(n,Kr(n,[T[0],null].concat(T.slice(1)),null,m,b),s-1),[]})},_embind_register_integer:function(n,s,l,d,m){s=Oe(s),m===-1&&(m=4294967295),m=zr(l);var b=T=>T;if(d===0){var E=32-8*l;b=T=>T<<E>>>E}l=s.includes("unsigned")?function(T,R){return R>>>0}:function(T,R){return R},Tt(n,{name:s,fromWireType:b,toWireType:l,argPackAdvance:8,readValueFromPointer:Eu(s,m,d!==0),K:null})},_embind_register_memory_view:function(n,s,l){function d(b){b>>=2;var E=_e;return new m(E.buffer,E[b+1],E[b])}var m=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][s];l=Oe(l),Tt(n,{name:l,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{$b:!0})},_embind_register_std_string:function(n,s){s=Oe(s);var l=s==="std::string";Tt(n,{name:s,fromWireType:function(d){var m=_e[d>>2],b=d+4;if(l)for(var E=b,T=0;T<=m;++T){var R=b+T;if(T==m||Re[R]==0){if(E=E?be(Re,E,R-E):"",S===void 0)var S=E;else S+="\0",S+=E;E=R+1}}else{for(S=Array(m),T=0;T<m;++T)S[T]=String.fromCharCode(Re[b+T]);S=S.join("")}return Wt(d),S},toWireType:function(d,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));var b=typeof m=="string";b||m instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Int8Array||re("Cannot pass non-string to std::string");var E=l&&b?Te(m):m.length,T=Ni(4+E+1),R=T+4;if(_e[T>>2]=E,l&&b)yt(m,Re,R,E+1);else if(b)for(b=0;b<E;++b){var S=m.charCodeAt(b);255<S&&(Wt(R),re("String has UTF-16 code units that do not fit in 8 bits")),Re[R+b]=S}else for(b=0;b<E;++b)Re[R+b]=m[b];return d!==null&&d.push(Wt,T),T},argPackAdvance:8,readValueFromPointer:hr,K:function(d){Wt(d)}})},_embind_register_std_wstring:function(n,s,l){if(l=Oe(l),s===2)var d=ku,m=Pu,b=Cu,E=()=>gt,T=1;else s===4&&(d=Su,m=Tu,b=Ru,E=()=>_e,T=2);Tt(n,{name:l,fromWireType:function(R){for(var S=_e[R>>2],F=E(),B,z=R+4,P=0;P<=S;++P){var L=R+4+P*s;(P==S||F[L>>T]==0)&&(z=d(z,L-z),B===void 0?B=z:(B+="\0",B+=z),z=L+s)}return Wt(R),B},toWireType:function(R,S){typeof S!="string"&&re(`Cannot pass non-string to C++ string type ${l}`);var F=b(S),B=Ni(4+F+s);return _e[B>>2]=F>>T,m(S,B+4,F+s),R!==null&&R.push(Wt,B),B},argPackAdvance:8,readValueFromPointer:hr,K:function(R){Wt(R)}})},_embind_register_value_object:function(n,s,l,d,m,b){Vr[n]={name:Oe(s),Pa:Ge(l,d),W:Ge(m,b),fb:[]}},_embind_register_value_object_field:function(n,s,l,d,m,b,E,T,R,S){Vr[n].fb.push({Sb:Oe(s),Yb:l,Wb:Ge(d,m),Xb:b,rc:E,qc:Ge(T,R),sc:S})},_embind_register_void:function(n,s){s=Oe(s),Tt(n,{fc:!0,name:s,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(n,s,l){n=bt(n),s=lr(s,"emval::as");var d=[],m=At(d);return _e[l>>2]=m,s.toWireType(d,n)},_emval_call_method:function(n,s,l,d,m){n=Xr[n],s=bt(s),l=Jr(l);var b=[];return _e[d>>2]=At(b),n(s,l,b,m)},_emval_call_void_method:function(n,s,l,d){n=Xr[n],s=bt(s),l=Jr(l),n(s,l,null,d)},_emval_decref:Fi,_emval_get_method_caller:function(n,s){var l=ju(n,s),d=l[0];s=d.name+"_$"+l.slice(1).map(function(E){return E.name}).join("_")+"$";var m=lo[s];if(m!==void 0)return m;var b=Array(n-1);return m=Ou((E,T,R,S)=>{for(var F=0,B=0;B<n-1;++B)b[B]=l[B+1].readValueFromPointer(S+F),F+=l[B+1].argPackAdvance;for(E=E[T].apply(E,b),B=0;B<n-1;++B)l[B+1].Nb&&l[B+1].Nb(b[B]);if(!d.fc)return d.toWireType(R,E)}),lo[s]=m},_emval_get_module_property:function(n){return n=Jr(n),At(g[n])},_emval_get_property:function(n,s){return n=bt(n),s=bt(s),At(n[s])},_emval_incref:function(n){4<n&&(dt.get(n).ub+=1)},_emval_new_array:function(){return At([])},_emval_new_cstring:function(n){return At(Jr(n))},_emval_new_object:function(){return At({})},_emval_run_destructors:function(n){var s=bt(n);cr(s),Fi(n)},_emval_set_property:function(n,s,l){n=bt(n),s=bt(s),l=bt(l),n[s]=l},_emval_take_value:function(n,s){return n=lr(n,"_emval_take_value"),n=n.readValueFromPointer(s),At(n)},abort:()=>{Yt("")},emscripten_asm_const_int:(n,s,l)=>{Di.length=0;var d;for(l>>=2;d=Re[s++];)l+=d!=105&l,Di.push(d==105?ce[l]:ke[l++>>1]),++l;return a[n].apply(null,Di)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(n,s,l)=>Re.copyWithin(n,s,s+l),emscripten_resize_heap:n=>{var s=Re.length;if(n>>>=0,2147483648<n)return!1;for(var l=1;4>=l;l*=2){var d=s*(1+.2/l);d=Math.min(d,n+100663296);var m=Math;d=Math.max(n,d);e:{m=m.min.call(m,2147483648,d+(65536-d%65536)%65536)-xt.buffer.byteLength+65535>>>16;try{xt.grow(m),rt();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},environ_get:(n,s)=>{var l=0;return co().forEach(function(d,m){var b=s+l;for(m=_e[n+4*m>>2]=b,b=0;b<d.length;++b)xe[m++>>0]=d.charCodeAt(b);xe[m>>0]=0,l+=d.length+1}),0},environ_sizes_get:(n,s)=>{var l=co();_e[n>>2]=l.length;var d=0;return l.forEach(function(m){d+=m.length+1}),_e[s>>2]=d,0},fd_close:function(n){try{var s=Zt(n);if(s.X===null)throw new H(8);s.Ma&&(s.Ma=null);try{s.m.close&&s.m.close(s)}catch(l){throw l}finally{Mr[s.X]=null}return s.X=null,0}catch(l){if(typeof pn>"u"||l.name!=="ErrnoError")throw l;return l.aa}},fd_read:function(n,s,l,d){try{e:{var m=Zt(n);n=s;for(var b,E=s=0;E<l;E++){var T=_e[n>>2],R=_e[n+4>>2];n+=8;var S=m,F=T,B=R,z=b,P=xe;if(0>B||0>z)throw new H(28);if(S.X===null)throw new H(8);if((S.flags&2097155)===1)throw new H(8);if((S.node.mode&61440)===16384)throw new H(31);if(!S.m.read)throw new H(28);var L=typeof z<"u";if(!L)z=S.position;else if(!S.seekable)throw new H(70);var x=S.m.read(S,P,F,B,z);L||(S.position+=x);var ie=x;if(0>ie){var oe=-1;break e}if(s+=ie,ie<R)break;typeof b<"u"&&(b+=ie)}oe=s}return _e[d>>2]=oe,0}catch(V){if(typeof pn>"u"||V.name!=="ErrnoError")throw V;return V.aa}},fd_seek:function(n,s,l,d,m){s=l+2097152>>>0<4194305-!!s?(s>>>0)+4294967296*l:NaN;try{if(isNaN(s))return 61;var b=Zt(n);return zs(b,s,d),p=[b.position>>>0,(Jt=b.position,1<=+Math.abs(Jt)?0<Jt?+Math.floor(Jt/4294967296)>>>0:~~+Math.ceil((Jt-+(~~Jt>>>0))/4294967296)>>>0:0)],ce[m>>2]=p[0],ce[m+4>>2]=p[1],b.Ma&&s===0&&d===0&&(b.Ma=null),0}catch(E){if(typeof pn>"u"||E.name!=="ErrnoError")throw E;return E.aa}},fd_write:function(n,s,l,d){try{e:{var m=Zt(n);n=s;for(var b,E=s=0;E<l;E++){var T=_e[n>>2],R=_e[n+4>>2];n+=8;var S=m,F=T,B=R,z=b,P=xe;if(0>B||0>z)throw new H(28);if(S.X===null)throw new H(8);if((S.flags&2097155)===0)throw new H(8);if((S.node.mode&61440)===16384)throw new H(31);if(!S.m.write)throw new H(28);S.seekable&&S.flags&1024&&zs(S,0,2);var L=typeof z<"u";if(!L)z=S.position;else if(!S.seekable)throw new H(70);var x=S.m.write(S,P,F,B,z,void 0);L||(S.position+=x);var ie=x;if(0>ie){var oe=-1;break e}s+=ie,typeof b<"u"&&(b+=ie)}oe=s}return _e[d>>2]=oe,0}catch(V){if(typeof pn>"u"||V.name!=="ErrnoError")throw V;return V.aa}},strftime_l:(n,s,l,d)=>Mu(n,s,l,d)};(function(){function n(l){if(pe=l=l.exports,xt=pe.memory,rt(),je=pe.__indirect_function_table,Kt.unshift(pe.__wasm_call_ctors),Ze--,g.monitorRunDependencies&&g.monitorRunDependencies(Ze),Ze==0&&_t){var d=_t;_t=null,d()}return l}var s={env:go,wasi_snapshot_preview1:go};if(Ze++,g.monitorRunDependencies&&g.monitorRunDependencies(Ze),g.instantiateWasm)try{return g.instantiateWasm(s,n)}catch(l){Je("Module.instantiateWasm callback failed with error: "+l),U(l)}return Pi(s,function(l){n(l.instance)}).catch(U),{}})();var Wt=n=>(Wt=pe.free)(n),Ni=n=>(Ni=pe.malloc)(n),mo=()=>(mo=pe.__errno_location)(),_o=g._ma_device__on_notification_unlocked=n=>(_o=g._ma_device__on_notification_unlocked=pe.ma_device__on_notification_unlocked)(n);g._ma_malloc_emscripten=(n,s)=>(g._ma_malloc_emscripten=pe.ma_malloc_emscripten)(n,s),g._ma_free_emscripten=(n,s)=>(g._ma_free_emscripten=pe.ma_free_emscripten)(n,s);var yo=g._ma_device_process_pcm_frames_capture__webaudio=(n,s,l)=>(yo=g._ma_device_process_pcm_frames_capture__webaudio=pe.ma_device_process_pcm_frames_capture__webaudio)(n,s,l),wo=g._ma_device_process_pcm_frames_playback__webaudio=(n,s,l)=>(wo=g._ma_device_process_pcm_frames_playback__webaudio=pe.ma_device_process_pcm_frames_playback__webaudio)(n,s,l),bo=n=>(bo=pe.__getTypeName)(n);g.__embind_initialize_bindings=()=>(g.__embind_initialize_bindings=pe._embind_initialize_bindings)(),g.dynCall_iiji=(n,s,l,d,m)=>(g.dynCall_iiji=pe.dynCall_iiji)(n,s,l,d,m),g.dynCall_jiji=(n,s,l,d,m)=>(g.dynCall_jiji=pe.dynCall_jiji)(n,s,l,d,m),g.dynCall_iiiji=(n,s,l,d,m,b)=>(g.dynCall_iiiji=pe.dynCall_iiiji)(n,s,l,d,m,b),g.dynCall_iij=(n,s,l,d)=>(g.dynCall_iij=pe.dynCall_iij)(n,s,l,d),g.dynCall_jii=(n,s,l)=>(g.dynCall_jii=pe.dynCall_jii)(n,s,l),g.dynCall_viijii=(n,s,l,d,m,b,E)=>(g.dynCall_viijii=pe.dynCall_viijii)(n,s,l,d,m,b,E),g.dynCall_iiiiij=(n,s,l,d,m,b,E)=>(g.dynCall_iiiiij=pe.dynCall_iiiiij)(n,s,l,d,m,b,E),g.dynCall_iiiiijj=(n,s,l,d,m,b,E,T,R)=>(g.dynCall_iiiiijj=pe.dynCall_iiiiijj)(n,s,l,d,m,b,E,T,R),g.dynCall_iiiiiijj=(n,s,l,d,m,b,E,T,R,S)=>(g.dynCall_iiiiiijj=pe.dynCall_iiiiiijj)(n,s,l,d,m,b,E,T,R,S);var ei;_t=function n(){ei||Ao(),ei||(_t=n)};function Ao(){function n(){if(!ei&&(ei=!0,g.calledRun=!0,!In)){if(g.noFSInit||Gs||(Gs=!0,Hs(),g.stdin=g.stdin,g.stdout=g.stdout,g.stderr=g.stderr,g.stdin?ir("stdin",g.stdin):Ti("/dev/tty","/dev/stdin"),g.stdout?ir("stdout",null,g.stdout):Ti("/dev/tty","/dev/stdout"),g.stderr?ir("stderr",null,g.stderr):Ti("/dev/tty1","/dev/stderr"),$r("/dev/stdin",0),$r("/dev/stdout",1),$r("/dev/stderr",1)),$s=!1,c(Kt),O(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;){var s=g.postRun.shift();Ft.unshift(s)}c(Ft)}}if(!(0<Ze)){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)dn();c(Lt),0<Ze||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),n()},1)):n())}}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return Ao(),k.ready}})();const y=_},h=>{h.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.30.4","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(h,f,v)=>{v.r(f),v.d(f,{Animation:()=>_.Animation});var _=v(4)},(h,f,v)=>{v.r(f),v.d(f,{Animation:()=>_});var _=function(){function y(A,k,g,O){this.animation=A,this.artboard=k,this.playing=O,this.loopCount=0,this.scrubTo=null,this.instance=new g.LinearAnimationInstance(A,k)}return Object.defineProperty(y.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"time",{get:function(){return this.instance.time},set:function(A){this.instance.time=A},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),y.prototype.advance=function(A){this.scrubTo===null?this.instance.advance(A):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},y.prototype.apply=function(A){this.instance.apply(A)},y.prototype.cleanup=function(){this.instance.delete()},y}()},(h,f,v)=>{v.r(f),v.d(f,{AudioAssetWrapper:()=>A.AudioAssetWrapper,AudioWrapper:()=>A.AudioWrapper,BLANK_URL:()=>y.BLANK_URL,CustomFileAssetLoaderWrapper:()=>A.CustomFileAssetLoaderWrapper,FileAssetWrapper:()=>A.FileAssetWrapper,Finalizable:()=>A.Finalizable,FontAssetWrapper:()=>A.FontAssetWrapper,FontWrapper:()=>A.FontWrapper,ImageAssetWrapper:()=>A.ImageAssetWrapper,ImageWrapper:()=>A.ImageWrapper,finalizationRegistry:()=>A.finalizationRegistry,registerTouchInteractions:()=>_.registerTouchInteractions,sanitizeUrl:()=>y.sanitizeUrl});var _=v(6),y=v(7),A=v(8)},(h,f,v)=>{v.r(f),v.d(f,{registerTouchInteractions:()=>A});var _=void 0,y=function(k,g){var O,U;return["touchstart","touchmove"].indexOf(k.type)>-1&&(!((O=k.touches)===null||O===void 0)&&O.length)?(g||k.preventDefault(),{clientX:k.touches[0].clientX,clientY:k.touches[0].clientY}):k.type==="touchend"&&(!((U=k.changedTouches)===null||U===void 0)&&U.length)?{clientX:k.changedTouches[0].clientX,clientY:k.changedTouches[0].clientY}:{clientX:k.clientX,clientY:k.clientY}},A=function(k){var g=k.canvas,O=k.artboard,U=k.stateMachines,D=U===void 0?[]:U,K=k.renderer,J=k.rive,N=k.fit,Y=k.alignment,ee=k.isTouchScrollEnabled,$=ee===void 0?!1:ee,W=k.layoutScaleFactor,me=W===void 0?1:W;if(!g||!D.length||!K||!J||!O||typeof window>"u")return null;var we=null,Ie=!1,Q=function(Ye){if(Ie&&Ye instanceof MouseEvent){Ye.type=="mouseup"&&(Ie=!1);return}Ie=$&&Ye.type==="touchend"&&we==="touchstart",we=Ye.type;var Je=Ye.currentTarget.getBoundingClientRect(),We=y(Ye,$),xt=We.clientX,pe=We.clientY;if(!(!xt&&!pe)){var In=xt-Je.left,xe=pe-Je.top,Re=J.computeAlignment(N,Y,{minX:0,minY:0,maxX:Je.width,maxY:Je.height},O.bounds,me),Ve=new J.Mat2D;Re.invert(Ve);var gt=new J.Vec2D(In,xe),ce=J.mapXY(Ve,gt),_e=ce.x(),mt=ce.y();switch(ce.delete(),Ve.delete(),gt.delete(),Re.delete(),Ye.type){case"mouseout":for(var ke=0,rt=D;ke<rt.length;ke++){var je=rt[ke];je.pointerMove(_e,mt)}break;case"touchmove":case"mouseover":case"mousemove":{for(var Lt=0,Kt=D;Lt<Kt.length;Lt++){var je=Kt[Lt];je.pointerMove(_e,mt)}break}case"touchstart":case"mousedown":{for(var Ft=0,dn=D;Ft<dn.length;Ft++){var je=dn[Ft];je.pointerDown(_e,mt)}break}case"touchend":case"mouseup":{for(var Ze=0,_t=D;Ze<_t.length;Ze++){var je=_t[Ze];je.pointerUp(_e,mt)}break}}}},Pe=Q.bind(_);return g.addEventListener("mouseover",Pe),g.addEventListener("mouseout",Pe),g.addEventListener("mousemove",Pe),g.addEventListener("mousedown",Pe),g.addEventListener("mouseup",Pe),g.addEventListener("touchmove",Pe,{passive:$}),g.addEventListener("touchstart",Pe,{passive:$}),g.addEventListener("touchend",Pe),function(){g.removeEventListener("mouseover",Pe),g.removeEventListener("mouseout",Pe),g.removeEventListener("mousemove",Pe),g.removeEventListener("mousedown",Pe),g.removeEventListener("mouseup",Pe),g.removeEventListener("touchmove",Pe),g.removeEventListener("touchstart",Pe),g.removeEventListener("touchend",Pe)}}},(h,f,v)=>{v.r(f),v.d(f,{BLANK_URL:()=>U,sanitizeUrl:()=>J});var _=/^([^\w]*)(javascript|data|vbscript)/im,y=/&#(\w+)(^\w|;)?/g,A=/&(newline|tab);/gi,k=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,g=/^.+(:|&colon;)/gim,O=[".","/"],U="about:blank";function D(N){return O.indexOf(N[0])>-1}function K(N){var Y=N.replace(k,"");return Y.replace(y,function(ee,$){return String.fromCharCode($)})}function J(N){if(!N)return U;var Y=K(N).replace(A,"").replace(k,"").trim();if(!Y)return U;if(D(Y))return Y;var ee=Y.match(g);if(!ee)return Y;var $=ee[0];return _.test($)?U:Y}},(h,f,v)=>{v.r(f),v.d(f,{AudioAssetWrapper:()=>K,AudioWrapper:()=>k,CustomFileAssetLoaderWrapper:()=>O,FileAssetWrapper:()=>U,Finalizable:()=>y,FontAssetWrapper:()=>J,FontWrapper:()=>g,ImageAssetWrapper:()=>D,ImageWrapper:()=>A,finalizationRegistry:()=>ee});var _=function(){var $=function(W,me){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,Ie){we.__proto__=Ie}||function(we,Ie){for(var Q in Ie)Object.prototype.hasOwnProperty.call(Ie,Q)&&(we[Q]=Ie[Q])},$(W,me)};return function(W,me){if(typeof me!="function"&&me!==null)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");$(W,me);function we(){this.constructor=W}W.prototype=me===null?Object.create(me):(we.prototype=me.prototype,new we)}}(),y=function(){function $(){this.selfUnref=!1}return $}(),A=function($){_(W,$);function W(me){var we=$.call(this)||this;return we._nativeImage=me,we}return Object.defineProperty(W.prototype,"nativeImage",{get:function(){return this._nativeImage},enumerable:!1,configurable:!0}),W.prototype.unref=function(){this.selfUnref&&this._nativeImage.unref()},W}(y),k=function($){_(W,$);function W(me){var we=$.call(this)||this;return we._nativeAudio=me,we}return Object.defineProperty(W.prototype,"nativeAudio",{get:function(){return this._nativeAudio},enumerable:!1,configurable:!0}),W.prototype.unref=function(){this.selfUnref&&this._nativeAudio.unref()},W}(y),g=function($){_(W,$);function W(me){var we=$.call(this)||this;return we._nativeFont=me,we}return Object.defineProperty(W.prototype,"nativeFont",{get:function(){return this._nativeFont},enumerable:!1,configurable:!0}),W.prototype.unref=function(){this.selfUnref&&this._nativeFont.unref()},W}(y),O=function(){function $(W,me){this._assetLoaderCallback=me,this.assetLoader=new W.CustomFileAssetLoader({loadContents:this.loadContents.bind(this)})}return $.prototype.loadContents=function(W,me){var we;return W.isImage?we=new D(W):W.isAudio?we=new K(W):W.isFont&&(we=new J(W)),this._assetLoaderCallback(we,me)},$}(),U=function(){function $(W){this._nativeFileAsset=W}return $.prototype.decode=function(W){this._nativeFileAsset.decode(W)},Object.defineProperty($.prototype,"name",{get:function(){return this._nativeFileAsset.name},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"fileExtension",{get:function(){return this._nativeFileAsset.fileExtension},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"uniqueFilename",{get:function(){return this._nativeFileAsset.uniqueFilename},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isAudio",{get:function(){return this._nativeFileAsset.isAudio},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isImage",{get:function(){return this._nativeFileAsset.isImage},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isFont",{get:function(){return this._nativeFileAsset.isFont},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"cdnUuid",{get:function(){return this._nativeFileAsset.cdnUuid},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"nativeFileAsset",{get:function(){return this._nativeFileAsset},enumerable:!1,configurable:!0}),$}(),D=function($){_(W,$);function W(){return $!==null&&$.apply(this,arguments)||this}return W.prototype.setRenderImage=function(me){this._nativeFileAsset.setRenderImage(me.nativeImage)},W}(U),K=function($){_(W,$);function W(){return $!==null&&$.apply(this,arguments)||this}return W.prototype.setAudioSource=function(me){this._nativeFileAsset.setAudioSource(me.nativeAudio)},W}(U),J=function($){_(W,$);function W(){return $!==null&&$.apply(this,arguments)||this}return W.prototype.setFont=function(me){this._nativeFileAsset.setFont(me.nativeFont)},W}(U),N=function(){function $(W){}return $.prototype.register=function(W){W.selfUnref=!0},$.prototype.unregister=function(W){},$}(),Y=typeof FinalizationRegistry<"u"?FinalizationRegistry:N,ee=new Y(function($){$.unref()})}],i={};function o(h){var f=i[h];if(f!==void 0)return f.exports;var v=i[h]={exports:{}};return t[h](v,v.exports,o),v.exports}o.d=(h,f)=>{for(var v in f)o.o(f,v)&&!o.o(h,v)&&Object.defineProperty(h,v,{enumerable:!0,get:f[v]})},o.o=(h,f)=>Object.prototype.hasOwnProperty.call(h,f),o.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var u={};return(()=>{o.r(u),o.d(u,{Alignment:()=>J,DataEnum:()=>mt,EventType:()=>Q,Fit:()=>K,Layout:()=>N,LoopType:()=>Pe,Rive:()=>ce,RiveEventType:()=>W,RiveFile:()=>gt,RuntimeLoader:()=>Y,StateMachineInput:()=>$,StateMachineInputType:()=>ee,Testing:()=>ki,ViewModel:()=>_e,ViewModelInstance:()=>rt,ViewModelInstanceArtboard:()=>$t,ViewModelInstanceAssetImage:()=>nr,ViewModelInstanceBoolean:()=>Ft,ViewModelInstanceColor:()=>Yt,ViewModelInstanceEnum:()=>Ze,ViewModelInstanceList:()=>_t,ViewModelInstanceNumber:()=>Kt,ViewModelInstanceString:()=>Lt,ViewModelInstanceTrigger:()=>dn,ViewModelInstanceValue:()=>je,decodeAudio:()=>jr,decodeFont:()=>Jt,decodeImage:()=>Pi});var h=o(1),f=o(2),v=o(3),_=o(5),y=function(){var p=function(a,c){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&(w[I]=C[I])},p(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");p(a,c);function w(){this.constructor=a}a.prototype=c===null?Object.create(c):(w.prototype=c.prototype,new w)}}(),A=function(){return A=Object.assign||function(p){for(var a,c=1,w=arguments.length;c<w;c++){a=arguments[c];for(var C in a)Object.prototype.hasOwnProperty.call(a,C)&&(p[C]=a[C])}return p},A.apply(this,arguments)},k=function(p,a,c,w){function C(I){return I instanceof c?I:new c(function(M){M(I)})}return new(c||(c=Promise))(function(I,M){function X(ae){try{G(w.next(ae))}catch(be){M(be)}}function te(ae){try{G(w.throw(ae))}catch(be){M(be)}}function G(ae){ae.done?I(ae.value):C(ae.value).then(X,te)}G((w=w.apply(p,a||[])).next())})},g=function(p,a){var c={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},w,C,I,M=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return M.next=X(0),M.throw=X(1),M.return=X(2),typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function X(G){return function(ae){return te([G,ae])}}function te(G){if(w)throw new TypeError("Generator is already executing.");for(;M&&(M=0,G[0]&&(c=0)),c;)try{if(w=1,C&&(I=G[0]&2?C.return:G[0]?C.throw||((I=C.return)&&I.call(C),0):C.next)&&!(I=I.call(C,G[1])).done)return I;switch(C=0,I&&(G=[G[0]&2,I.value]),G[0]){case 0:case 1:I=G;break;case 4:return c.label++,{value:G[1],done:!1};case 5:c.label++,C=G[1],G=[0];continue;case 7:G=c.ops.pop(),c.trys.pop();continue;default:if(I=c.trys,!(I=I.length>0&&I[I.length-1])&&(G[0]===6||G[0]===2)){c=0;continue}if(G[0]===3&&(!I||G[1]>I[0]&&G[1]<I[3])){c.label=G[1];break}if(G[0]===6&&c.label<I[1]){c.label=I[1],I=G;break}if(I&&c.label<I[2]){c.label=I[2],c.ops.push(G);break}I[2]&&c.ops.pop(),c.trys.pop();continue}G=a.call(p,c)}catch(ae){G=[6,ae],C=0}finally{w=I=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}},O=function(p,a,c){if(c||arguments.length===2)for(var w=0,C=a.length,I;w<C;w++)(I||!(w in a))&&(I||(I=Array.prototype.slice.call(a,0,w)),I[w]=a[w]);return p.concat(I||Array.prototype.slice.call(a))},U=function(p){y(a,p);function a(){var c=p!==null&&p.apply(this,arguments)||this;return c.isHandledError=!0,c}return a}(Error),D=function(p){return p&&p.isHandledError?p.message:"Problem loading file; may be corrupt!"},K;(function(p){p.Cover="cover",p.Contain="contain",p.Fill="fill",p.FitWidth="fitWidth",p.FitHeight="fitHeight",p.None="none",p.ScaleDown="scaleDown",p.Layout="layout"})(K||(K={}));var J;(function(p){p.Center="center",p.TopLeft="topLeft",p.TopCenter="topCenter",p.TopRight="topRight",p.CenterLeft="centerLeft",p.CenterRight="centerRight",p.BottomLeft="bottomLeft",p.BottomCenter="bottomCenter",p.BottomRight="bottomRight"})(J||(J={}));var N=function(){function p(a){var c,w,C,I,M,X,te;this.fit=(c=a?.fit)!==null&&c!==void 0?c:K.Contain,this.alignment=(w=a?.alignment)!==null&&w!==void 0?w:J.Center,this.layoutScaleFactor=(C=a?.layoutScaleFactor)!==null&&C!==void 0?C:1,this.minX=(I=a?.minX)!==null&&I!==void 0?I:0,this.minY=(M=a?.minY)!==null&&M!==void 0?M:0,this.maxX=(X=a?.maxX)!==null&&X!==void 0?X:0,this.maxY=(te=a?.maxY)!==null&&te!==void 0?te:0}return p.new=function(a){var c=a.fit,w=a.alignment,C=a.minX,I=a.minY,M=a.maxX,X=a.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new p({fit:c,alignment:w,minX:C,minY:I,maxX:M,maxY:X})},p.prototype.copyWith=function(a){var c=a.fit,w=a.alignment,C=a.layoutScaleFactor,I=a.minX,M=a.minY,X=a.maxX,te=a.maxY;return new p({fit:c??this.fit,alignment:w??this.alignment,layoutScaleFactor:C??this.layoutScaleFactor,minX:I??this.minX,minY:M??this.minY,maxX:X??this.maxX,maxY:te??this.maxY})},p.prototype.runtimeFit=function(a){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var c;return this.fit===K.Cover?c=a.Fit.cover:this.fit===K.Contain?c=a.Fit.contain:this.fit===K.Fill?c=a.Fit.fill:this.fit===K.FitWidth?c=a.Fit.fitWidth:this.fit===K.FitHeight?c=a.Fit.fitHeight:this.fit===K.ScaleDown?c=a.Fit.scaleDown:this.fit===K.Layout?c=a.Fit.layout:c=a.Fit.none,this.cachedRuntimeFit=c,c},p.prototype.runtimeAlignment=function(a){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var c;return this.alignment===J.TopLeft?c=a.Alignment.topLeft:this.alignment===J.TopCenter?c=a.Alignment.topCenter:this.alignment===J.TopRight?c=a.Alignment.topRight:this.alignment===J.CenterLeft?c=a.Alignment.centerLeft:this.alignment===J.CenterRight?c=a.Alignment.centerRight:this.alignment===J.BottomLeft?c=a.Alignment.bottomLeft:this.alignment===J.BottomCenter?c=a.Alignment.bottomCenter:this.alignment===J.BottomRight?c=a.Alignment.bottomRight:c=a.Alignment.center,this.cachedRuntimeAlignment=c,c},p}(),Y=function(){function p(){}return p.loadRuntime=function(){h.default({locateFile:function(){return p.wasmURL}}).then(function(a){var c;for(p.runtime=a;p.callBackQueue.length>0;)(c=p.callBackQueue.shift())===null||c===void 0||c(p.runtime)}).catch(function(a){var c={message:a?.message||"Unknown error",type:a?.name||"Error",wasmError:a instanceof WebAssembly.CompileError||a instanceof WebAssembly.RuntimeError,originalError:a};console.debug("Rive WASM load error details:",c);var w="https://cdn.jsdelivr.net/npm/".concat(f.name,"@").concat(f.version,"/rive_fallback.wasm");if(p.wasmURL.toLowerCase()!==w)console.warn("Failed to load WASM from ".concat(p.wasmURL," (").concat(c.message,"), trying jsdelivr as a backup")),p.setWasmUrl(w),p.loadRuntime();else{var C=["Could not load Rive WASM file from ".concat(p.wasmURL," or ").concat(w,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(c.type),"- Message: ".concat(c.message),"- WebAssembly-specific error: ".concat(c.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(C)}})},p.getInstance=function(a){p.isLoading||(p.isLoading=!0,p.loadRuntime()),p.runtime?a(p.runtime):p.callBackQueue.push(a)},p.awaitInstance=function(){return new Promise(function(a){return p.getInstance(function(c){return a(c)})})},p.setWasmUrl=function(a){p.wasmURL=a},p.getWasmUrl=function(){return p.wasmURL},p.isLoading=!1,p.callBackQueue=[],p.wasmURL="https://unpkg.com/".concat(f.name,"@").concat(f.version,"/rive.wasm"),p}(),ee;(function(p){p[p.Number=56]="Number",p[p.Trigger=58]="Trigger",p[p.Boolean=59]="Boolean"})(ee||(ee={}));var $=function(){function p(a,c){this.type=a,this.runtimeInput=c}return Object.defineProperty(p.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(a){this.runtimeInput.value=a},enumerable:!1,configurable:!0}),p.prototype.fire=function(){this.type===ee.Trigger&&this.runtimeInput.fire()},p.prototype.delete=function(){this.runtimeInput=null},p}(),W;(function(p){p[p.General=128]="General",p[p.OpenUrl=131]="OpenUrl"})(W||(W={}));var me=function(){function p(a){this.nativeArtboard=a}return p}(),we=function(){function p(a,c,w,C){this.stateMachine=a,this.playing=w,this.artboard=C,this.inputs=[],this.instance=new c.StateMachineInstance(a,C),this.initInputs(c)}return Object.defineProperty(p.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"statesChanged",{get:function(){for(var a=[],c=0;c<this.instance.stateChangedCount();c++)a.push(this.instance.stateChangedNameByIndex(c));return a},enumerable:!1,configurable:!0}),p.prototype.advance=function(a){this.instance.advance(a)},p.prototype.advanceAndApply=function(a){this.instance.advanceAndApply(a)},p.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},p.prototype.reportedEventAt=function(a){return this.instance.reportedEventAt(a)},p.prototype.initInputs=function(a){for(var c=0;c<this.instance.inputCount();c++){var w=this.instance.input(c);this.inputs.push(this.mapRuntimeInput(w,a))}},p.prototype.mapRuntimeInput=function(a,c){if(a.type===c.SMIInput.bool)return new $(ee.Boolean,a.asBool());if(a.type===c.SMIInput.number)return new $(ee.Number,a.asNumber());if(a.type===c.SMIInput.trigger)return new $(ee.Trigger,a.asTrigger())},p.prototype.cleanup=function(){this.inputs.forEach(function(a){a.delete()}),this.inputs.length=0,this.instance.delete()},p.prototype.bindViewModelInstance=function(a){a.runtimeInstance!=null&&this.instance.bindViewModelInstance(a.runtimeInstance)},p}(),Ie=function(){function p(a,c,w,C,I){C===void 0&&(C=[]),I===void 0&&(I=[]),this.runtime=a,this.artboard=c,this.eventManager=w,this.animations=C,this.stateMachines=I}return p.prototype.add=function(a,c,w){if(w===void 0&&(w=!0),a=it(a),a.length===0)this.animations.forEach(function(Te){return Te.playing=c}),this.stateMachines.forEach(function(Te){return Te.playing=c});else for(var C=this.animations.map(function(Te){return Te.name}),I=this.stateMachines.map(function(Te){return Te.name}),M=0;M<a.length;M++){var X=C.indexOf(a[M]),te=I.indexOf(a[M]);if(X>=0||te>=0)X>=0?this.animations[X].playing=c:this.stateMachines[te].playing=c;else{var G=this.artboard.animationByName(a[M]);if(G){var ae=new v.Animation(G,this.artboard,this.runtime,c);ae.advance(0),ae.apply(1),this.animations.push(ae)}else{var be=this.artboard.stateMachineByName(a[M]);if(be){var Le=new we(be,this.runtime,c,this.artboard);this.stateMachines.push(Le)}}}}return w&&(c?this.eventManager.fire({type:Q.Play,data:this.playing}):this.eventManager.fire({type:Q.Pause,data:this.paused})),c?this.playing:this.paused},p.prototype.initLinearAnimations=function(a,c){for(var w=this.animations.map(function(te){return te.name}),C=0;C<a.length;C++){var I=w.indexOf(a[C]);if(I>=0)this.animations[I].playing=c;else{var M=this.artboard.animationByName(a[C]);if(M){var X=new v.Animation(M,this.artboard,this.runtime,c);X.advance(0),X.apply(1),this.animations.push(X)}else console.error("Animation with name ".concat(a[C]," not found."))}}},p.prototype.initStateMachines=function(a,c){for(var w=this.stateMachines.map(function(te){return te.name}),C=0;C<a.length;C++){var I=w.indexOf(a[C]);if(I>=0)this.stateMachines[I].playing=c;else{var M=this.artboard.stateMachineByName(a[C]);if(M){var X=new we(M,this.runtime,c,this.artboard);this.stateMachines.push(X),c||X.advanceAndApply(0)}else console.warn("State Machine with name ".concat(a[C]," not found.")),this.initLinearAnimations([a[C]],c)}}},p.prototype.play=function(a){return this.add(a,!0)},p.prototype.pause=function(a){return this.add(a,!1)},p.prototype.scrub=function(a,c){var w=this.animations.filter(function(C){return a.includes(C.name)});return w.forEach(function(C){return C.scrubTo=c}),w.map(function(C){return C.name})},Object.defineProperty(p.prototype,"playing",{get:function(){return this.animations.filter(function(a){return a.playing}).map(function(a){return a.name}).concat(this.stateMachines.filter(function(a){return a.playing}).map(function(a){return a.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"paused",{get:function(){return this.animations.filter(function(a){return!a.playing}).map(function(a){return a.name}).concat(this.stateMachines.filter(function(a){return!a.playing}).map(function(a){return a.name}))},enumerable:!1,configurable:!0}),p.prototype.stop=function(a){var c=this;a=it(a);var w=[];if(a.length===0)w=this.animations.map(function(M){return M.name}).concat(this.stateMachines.map(function(M){return M.name})),this.animations.forEach(function(M){return M.cleanup()}),this.stateMachines.forEach(function(M){return M.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var C=this.animations.filter(function(M){return a.includes(M.name)});C.forEach(function(M){M.cleanup(),c.animations.splice(c.animations.indexOf(M),1)});var I=this.stateMachines.filter(function(M){return a.includes(M.name)});I.forEach(function(M){M.cleanup(),c.stateMachines.splice(c.stateMachines.indexOf(M),1)}),w=C.map(function(M){return M.name}).concat(I.map(function(M){return M.name}))}return this.eventManager.fire({type:Q.Stop,data:w}),w},Object.defineProperty(p.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(a,c){return a||c.playing},!1)||this.stateMachines.reduce(function(a,c){return a||c.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),p.prototype.atLeastOne=function(a,c){c===void 0&&(c=!0);var w;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([w=this.artboard.animationByIndex(0).name],a,c):this.artboard.stateMachineCount()>0&&this.add([w=this.artboard.stateMachineByIndex(0).name],a,c)),w},p.prototype.handleLooping=function(){for(var a=0,c=this.animations.filter(function(C){return C.playing});a<c.length;a++){var w=c[a];w.loopValue===0&&w.loopCount?(w.loopCount=0,this.stop(w.name)):w.loopValue===1&&w.loopCount?(this.eventManager.fire({type:Q.Loop,data:{animation:w.name,type:Pe.Loop}}),w.loopCount=0):w.loopValue===2&&w.loopCount>1&&(this.eventManager.fire({type:Q.Loop,data:{animation:w.name,type:Pe.PingPong}}),w.loopCount=0)}},p.prototype.handleStateChanges=function(){for(var a=[],c=0,w=this.stateMachines.filter(function(I){return I.playing});c<w.length;c++){var C=w[c];a.push.apply(a,C.statesChanged)}a.length>0&&this.eventManager.fire({type:Q.StateChange,data:a})},p.prototype.handleAdvancing=function(a){this.eventManager.fire({type:Q.Advance,data:a})},p}(),Q;(function(p){p.Load="load",p.LoadError="loaderror",p.Play="play",p.Pause="pause",p.Stop="stop",p.Loop="loop",p.Draw="draw",p.Advance="advance",p.StateChange="statechange",p.RiveEvent="riveevent",p.AudioStatusChange="audiostatuschange"})(Q||(Q={}));var Pe;(function(p){p.OneShot="oneshot",p.Loop="loop",p.PingPong="pingpong"})(Pe||(Pe={}));var Ye=function(){function p(a){a===void 0&&(a=[]),this.listeners=a}return p.prototype.getListeners=function(a){return this.listeners.filter(function(c){return c.type===a})},p.prototype.add=function(a){this.listeners.includes(a)||this.listeners.push(a)},p.prototype.remove=function(a){for(var c=0;c<this.listeners.length;c++){var w=this.listeners[c];if(w.type===a.type&&w.callback===a.callback){this.listeners.splice(c,1);break}}},p.prototype.removeAll=function(a){var c=this;a?this.listeners.filter(function(w){return w.type===a}).forEach(function(w){return c.remove(w)}):this.listeners.splice(0,this.listeners.length)},p.prototype.fire=function(a){var c=this.getListeners(a.type);c.forEach(function(w){return w.callback(a)})},p}(),Je=function(){function p(a){this.eventManager=a,this.queue=[]}return p.prototype.add=function(a){this.queue.push(a)},p.prototype.process=function(){for(;this.queue.length>0;){var a=this.queue.shift();a?.action&&a.action(),a?.event&&this.eventManager.fire(a.event)}},p}(),We;(function(p){p[p.AVAILABLE=0]="AVAILABLE",p[p.UNAVAILABLE=1]="UNAVAILABLE"})(We||(We={}));var xt=function(p){y(a,p);function a(){var c=p!==null&&p.apply(this,arguments)||this;return c._started=!1,c._enabled=!1,c._status=We.UNAVAILABLE,c}return a.prototype.delay=function(c){return k(this,void 0,void 0,function(){return g(this,function(w){return[2,new Promise(function(C){return setTimeout(C,c)})]})})},a.prototype.timeout=function(){return k(this,void 0,void 0,function(){return g(this,function(c){return[2,new Promise(function(w,C){return setTimeout(C,50)})]})})},a.prototype.reportToListeners=function(){this.fire({type:Q.AudioStatusChange}),this.removeAll()},a.prototype.enableAudio=function(){return k(this,void 0,void 0,function(){return g(this,function(c){return this._enabled||(this._enabled=!0,this._status=We.AVAILABLE,this.reportToListeners()),[2]})})},a.prototype.testAudio=function(){return k(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:if(!(this._status===We.UNAVAILABLE&&this._audioContext!==null))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return c.sent(),this.enableAudio(),[3,4];case 3:return c.sent(),[3,4];case 4:return[2]}})})},a.prototype._establishAudio=function(){return k(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window>"u"?(this.enableAudio(),[3,5]):[3,1]);case 1:this._audioContext=new AudioContext,this.listenForUserAction(),c.label=2;case 2:return this._status!==We.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return c.sent(),[4,this.delay(1e3)];case 4:return c.sent(),[3,2];case 5:return[2]}})})},a.prototype.listenForUserAction=function(){var c=this,w=function(){return k(c,void 0,void 0,function(){return g(this,function(C){return this.enableAudio(),[2]})})};document.addEventListener("pointerdown",w,{once:!0})},a.prototype.establishAudio=function(){return k(this,void 0,void 0,function(){return g(this,function(c){return this._establishAudio(),[2]})})},Object.defineProperty(a.prototype,"systemVolume",{get:function(){return this._status===We.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),a}(Ye),pe=new xt,In=function(){function p(){}return p.prototype.observe=function(){},p.prototype.unobserve=function(){},p.prototype.disconnect=function(){},p}(),xe=globalThis.ResizeObserver||In,Re=function(){function p(){var a=this;this._elementsMap=new Map,this._onObservedEntry=function(c){var w=a._elementsMap.get(c.target);w!==null?w.onResize(c.target.clientWidth==0||c.target.clientHeight==0):a._resizeObserver.unobserve(c.target)},this._onObserved=function(c){c.forEach(a._onObservedEntry)},this._resizeObserver=new xe(this._onObserved)}return p.prototype.add=function(a,c){var w={onResize:c,element:a};return this._elementsMap.set(a,w),this._resizeObserver.observe(a),w},p.prototype.remove=function(a){this._resizeObserver.unobserve(a.element),this._elementsMap.delete(a.element)},p}(),Ve=new Re,gt=function(){function p(a){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=a.src,this.buffer=a.buffer,a.assetLoader&&(this.assetLoader=a.assetLoader),this.enableRiveAssetCDN=typeof a.enableRiveAssetCDN=="boolean"?a.enableRiveAssetCDN:!0,this.eventManager=new Ye,a.onLoad&&this.on(Q.Load,a.onLoad),a.onLoadError&&this.on(Q.LoadError,a.onLoadError)}return p.prototype.initData=function(){return k(this,void 0,void 0,function(){var a,c,w,C,I;return g(this,function(M){switch(M.label){case 0:return this.src?(a=this,[4,Or(this.src)]):[3,2];case 1:a.buffer=M.sent(),M.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(w=new _.CustomFileAssetLoaderWrapper(this.runtime,this.assetLoader),c=w.assetLoader),C=this,[4,this.runtime.load(new Uint8Array(this.buffer),c,this.enableRiveAssetCDN)]);case 3:return C.file=M.sent(),this.destroyed?((I=this.file)===null||I===void 0||I.delete(),this.file=null,[2]):(this.file!==null?this.eventManager.fire({type:Q.Load,data:this}):this.fireLoadError(p.fileLoadErrorMessage),[2])}})})},p.prototype.init=function(){return k(this,void 0,void 0,function(){var a,c;return g(this,function(w){switch(w.label){case 0:if(!this.src&&!this.buffer)return this.fireLoadError(p.missingErrorMessage),[2];w.label=1;case 1:return w.trys.push([1,4,,5]),a=this,[4,Y.awaitInstance()];case 2:return a.runtime=w.sent(),this.destroyed?[2]:[4,this.initData()];case 3:return w.sent(),[3,5];case 4:return c=w.sent(),this.fireLoadError(c instanceof Error?c.message:p.fileLoadErrorMessage),[3,5];case 5:return[2]}})})},p.prototype.fireLoadError=function(a){throw this.eventManager.fire({type:Q.LoadError,data:a}),new Error(a)},p.prototype.on=function(a,c){this.eventManager.add({type:a,callback:c})},p.prototype.off=function(a,c){this.eventManager.remove({type:a,callback:c})},p.prototype.cleanup=function(){var a;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(a=this.file)===null||a===void 0||a.delete(),this.file=null,this.destroyed=!0)},p.prototype.removeAllRiveEventListeners=function(a){this.eventManager.removeAll(a)},p.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},p.prototype.destroyIfUnused=function(){this.referenceCount<=0&&this.cleanup()},p.prototype.getArtboard=function(a){var c=this.file.artboardByName(a);return c!=null?new me(c):null},p.missingErrorMessage="Rive source file or data buffer required",p.fileLoadErrorMessage="The file failed to load",p}(),ce=function(){function p(a){var c=this,w;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this._viewModelInstance=null,this._dataEnums=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(C){var I=c._hasZeroSize!==C;c._hasZeroSize=C,C?(!c._layout.maxX||!c._layout.maxY)&&c.resizeToCanvas():I&&c.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=a.canvas,a.canvas.constructor===HTMLCanvasElement&&(this._observed=Ve.add(this.canvas,this.onCanvasResize)),this.src=a.src,this.buffer=a.buffer,this.riveFile=a.riveFile,this.layout=(w=a.layout)!==null&&w!==void 0?w:new N,this.shouldDisableRiveListeners=!!a.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!a.isTouchScrollEnabled,this.automaticallyHandleEvents=!!a.automaticallyHandleEvents,this.enableRiveAssetCDN=a.enableRiveAssetCDN===void 0?!0:a.enableRiveAssetCDN,this.eventManager=new Ye,a.onLoad&&this.on(Q.Load,a.onLoad),a.onLoadError&&this.on(Q.LoadError,a.onLoadError),a.onPlay&&this.on(Q.Play,a.onPlay),a.onPause&&this.on(Q.Pause,a.onPause),a.onStop&&this.on(Q.Stop,a.onStop),a.onLoop&&this.on(Q.Loop,a.onLoop),a.onStateChange&&this.on(Q.StateChange,a.onStateChange),a.onAdvance&&this.on(Q.Advance,a.onAdvance),a.onload&&!a.onLoad&&this.on(Q.Load,a.onload),a.onloaderror&&!a.onLoadError&&this.on(Q.LoadError,a.onloaderror),a.onplay&&!a.onPlay&&this.on(Q.Play,a.onplay),a.onpause&&!a.onPause&&this.on(Q.Pause,a.onpause),a.onstop&&!a.onStop&&this.on(Q.Stop,a.onstop),a.onloop&&!a.onLoop&&this.on(Q.Loop,a.onloop),a.onstatechange&&!a.onStateChange&&this.on(Q.StateChange,a.onstatechange),a.assetLoader&&(this.assetLoader=a.assetLoader),this.taskQueue=new Je(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:a.autoplay,autoBind:a.autoBind,animations:a.animations,stateMachines:a.stateMachines,artboard:a.artboard,useOffscreenRenderer:a.useOffscreenRenderer})}return Object.defineProperty(p.prototype,"viewModelCount",{get:function(){return this.file.viewModelCount()},enumerable:!1,configurable:!0}),p.new=function(a){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new p(a)},p.prototype.onSystemAudioChanged=function(){this.volume=this._volume},p.prototype.init=function(a){var c=this,w=a.src,C=a.buffer,I=a.riveFile,M=a.animations,X=a.stateMachines,te=a.artboard,G=a.autoplay,ae=G===void 0?!1:G,be=a.useOffscreenRenderer,Le=be===void 0?!1:be,Te=a.autoBind,yt=Te===void 0?!1:Te;if(!this.destroyed){if(this.src=w,this.buffer=C,this.riveFile=I,!this.src&&!this.buffer&&!this.riveFile)throw new U(p.missingErrorMessage);var ct=it(M),et=it(X);this.loaded=!1,this.readyForPlaying=!1,Y.awaitInstance().then(function(tt){c.destroyed||(c.runtime=tt,c.removeRiveListeners(),c.deleteRiveRenderer(),c.renderer=c.runtime.makeRenderer(c.canvas,Le),c.canvas.width||c.canvas.height||c.resizeDrawingSurfaceToCanvas(),c.initData(te,ct,et,ae,yt).then(function(ht){if(ht)return c.setupRiveListeners()}).catch(function(ht){console.error(ht)}))}).catch(function(tt){console.error(tt)})}},p.prototype.setupRiveListeners=function(a){var c=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var w=(this.animator.stateMachines||[]).filter(function(I){return I.playing&&c.runtime.hasListeners(I.instance)}).map(function(I){return I.instance}),C=this.isTouchScrollEnabled;a&&"isTouchScrollEnabled"in a&&(C=a.isTouchScrollEnabled),this.eventCleanup=(0,_.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:w,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:C,layoutScaleFactor:this._layout.layoutScaleFactor})}},p.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},p.prototype.initializeAudio=function(){var a=this,c;pe.status==We.UNAVAILABLE&&!((c=this.artboard)===null||c===void 0)&&c.hasAudio&&this._audioEventListener===null&&(this._audioEventListener={type:Q.AudioStatusChange,callback:function(){return a.onSystemAudioChanged()}},pe.add(this._audioEventListener),pe.establishAudio())},p.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},p.prototype.initData=function(a,c,w,C,I){return k(this,void 0,void 0,function(){var M,X,te,G;return g(this,function(ae){switch(ae.label){case 0:return ae.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(M=new gt({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),this.riveFile=M,[4,M.init()]);case 1:if(ae.sent(),this.destroyed)return M.destroyIfUnused(),[2,!1];ae.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(a,c,w,C,I),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:Q.Load,data:(G=this.src)!==null&&G!==void 0?G:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,!0];case 3:return X=ae.sent(),te=D(X),console.warn(te),this.eventManager.fire({type:Q.LoadError,data:te}),[2,Promise.reject(te)];case 4:return[2]}})})},p.prototype.initArtboard=function(a,c,w,C,I){if(this.file){var M=a?this.file.artboardByName(a):this.file.defaultArtboard();if(!M){var X="Invalid artboard name or no default artboard";console.warn(X),this.eventManager.fire({type:Q.LoadError,data:X});return}if(this.artboard=M,M.volume=this._volume*pe.systemVolume,this.artboard.animationCount()<1){var X="Artboard has no animations";throw this.eventManager.fire({type:Q.LoadError,data:X}),X}this.animator=new Ie(this.runtime,this.artboard,this.eventManager);var te;if(c.length>0||w.length>0?(te=c.concat(w),this.animator.initLinearAnimations(c,C),this.animator.initStateMachines(w,C)):te=[this.animator.atLeastOne(C,!1)],this.taskQueue.add({event:{type:C?Q.Play:Q.Pause,data:te}}),I){var G=this.file.defaultArtboardViewModel(M);if(G!==null){var ae=G.defaultInstance();if(ae!==null){var be=new rt(ae,null);this.bindViewModelInstance(be)}}}}},p.prototype.drawFrame=function(){var a,c;!((a=document?.timeline)===null||a===void 0)&&a.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&(this._boundDraw(document.timeline.currentTime),(c=this.runtime)===null||c===void 0||c.resolveAnimationFrame()):this.startRendering()},p.prototype.draw=function(a,c){var w;this.frameRequestId=null;var C=performance.now();this.lastRenderTime||(this.lastRenderTime=a),this.renderSecondTimer+=a-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,c?.());var I=(a-this.lastRenderTime)/1e3;this.lastRenderTime=a;for(var M=this.animator.animations.filter(function(St){return St.playing||St.needsScrub}).sort(function(St){return St.needsScrub?-1:1}),X=0,te=M;X<te.length;X++){var G=te[X];G.advance(I),G.instance.didLoop&&(G.loopCount+=1),G.apply(1)}for(var ae=this.animator.stateMachines.filter(function(St){return St.playing}),be=0,Le=ae;be<Le.length;be++){var Te=Le[be],yt=Te.reportedEventCount();if(yt)for(var ct=0;ct<yt;ct++){var et=Te.reportedEventAt(ct);if(et)if(et.type===W.OpenUrl){if(this.eventManager.fire({type:Q.RiveEvent,data:et}),this.automaticallyHandleEvents){var tt=document.createElement("a"),ht=et,Xt=ht.url,Qt=ht.target,Ct=(0,_.sanitizeUrl)(Xt);Xt&&tt.setAttribute("href",Ct),Qt&&tt.setAttribute("target",Qt),Ct&&Ct!==_.BLANK_URL&&tt.click()}}else this.eventManager.fire({type:Q.RiveEvent,data:et})}Te.advanceAndApply(I)}this.animator.stateMachines.length==0&&this.artboard.advance(I);var Z=this.renderer;Z.clear(),Z.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(Z),Z.restore(),Z.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(I),this.frameCount++;var ve=performance.now();for(this.frameTimes.push(ve),this.durations.push(ve-C);this.frameTimes[0]<=ve-1e3;)this.frameTimes.shift(),this.durations.shift();(w=this._viewModelInstance)===null||w===void 0||w.handleCallbacks(),this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},p.prototype.alignRenderer=function(){var a=this,c=a.renderer,w=a.runtime,C=a._layout,I=a.artboard;c.align(C.runtimeFit(w),C.runtimeAlignment(w),{minX:C.minX,minY:C.minY,maxX:C.maxX,maxY:C.maxY},I.bounds,this._devicePixelRatioUsed*C.layoutScaleFactor)},Object.defineProperty(p.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(a,c){return a+c},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),p.prototype.cleanup=function(){var a,c;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&Ve.remove(this._observed),this.removeRiveListeners(),this.file&&((a=this.riveFile)===null||a===void 0||a.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(pe.remove(this._audioEventListener),this._audioEventListener=null),(c=this._viewModelInstance)===null||c===void 0||c.cleanup(),this._viewModelInstance=null,this._dataEnums=null},p.prototype.deleteRiveRenderer=function(){var a;(a=this.renderer)===null||a===void 0||a.delete(),this.renderer=null},p.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},p.prototype.retrieveTextRun=function(a){var c;if(!a){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var w=this.artboard.textRun(a);if(!w){console.warn("Could not access a text run with name '".concat(a,"' in the '").concat((c=this.artboard)===null||c===void 0?void 0:c.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return w},p.prototype.getTextRunValue=function(a){var c=this.retrieveTextRun(a);return c?c.text:void 0},p.prototype.setTextRunValue=function(a,c){var w=this.retrieveTextRun(a);w&&(w.text=c)},p.prototype.play=function(a,c){var w=this;if(a=it(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return w.play(a,c)}});return}this.animator.play(a),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},p.prototype.pause=function(a){var c=this;if(a=it(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return c.pause(a)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(a)},p.prototype.scrub=function(a,c){var w=this;if(a=it(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return w.scrub(a,c)}});return}this.animator.scrub(a,c||0),this.drawFrame()},p.prototype.stop=function(a){var c=this;if(a=it(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return c.stop(a)}});return}this.animator&&this.animator.stop(a),this.eventCleanup&&this.eventCleanup()},p.prototype.reset=function(a){var c,w,C=a?.artboard,I=it(a?.animations),M=it(a?.stateMachines),X=(c=a?.autoplay)!==null&&c!==void 0?c:!1,te=(w=a?.autoBind)!==null&&w!==void 0?w:!1;this.cleanupInstances(),this.initArtboard(C,I,M,X,te),this.taskQueue.process()},p.prototype.load=function(a){this.file=null,this.stop(),this.init(a)},Object.defineProperty(p.prototype,"layout",{get:function(){return this._layout},set:function(a){this._layout=a,(!a.maxX||!a.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),p.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},p.prototype.resizeDrawingSurfaceToCanvas=function(a){if(this.canvas instanceof HTMLCanvasElement&&window){var c=this.canvas.getBoundingClientRect(),w=c.width,C=c.height,I=a||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=I,this.canvas.width=I*w,this.canvas.height=I*C,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===K.Layout){var M=this._layout.layoutScaleFactor;this.artboard.width=w/M,this.artboard.height=C/M}}},Object.defineProperty(p.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var a=[],c=0;c<this.artboard.animationCount();c++)a.push(this.artboard.animationByIndex(c).name);return a},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var a=[],c=0;c<this.artboard.stateMachineCount();c++)a.push(this.artboard.stateMachineByIndex(c).name);return a},enumerable:!1,configurable:!0}),p.prototype.stateMachineInputs=function(a){if(this.loaded){var c=this.animator.stateMachines.find(function(w){return w.name===a});return c?.inputs}},p.prototype.retrieveInputAtPath=function(a,c){if(!a){console.warn("No input name provided for path '".concat(c,"'"));return}if(!this.artboard){console.warn("Tried to access input: '".concat(a,"', at path: '").concat(c,"', but the Artboard is null"));return}var w=this.artboard.inputByPath(a,c);if(!w){console.warn("Could not access an input with name: '".concat(a,"', at path:'").concat(c,"'"));return}return w},p.prototype.setBooleanStateAtPath=function(a,c,w){var C=this.retrieveInputAtPath(a,w);C&&(C.type===ee.Boolean?C.asBool().value=c:console.warn("Input with name: '".concat(a,"', at path:'").concat(w,"' is not a boolean")))},p.prototype.setNumberStateAtPath=function(a,c,w){var C=this.retrieveInputAtPath(a,w);C&&(C.type===ee.Number?C.asNumber().value=c:console.warn("Input with name: '".concat(a,"', at path:'").concat(w,"' is not a number")))},p.prototype.fireStateAtPath=function(a,c){var w=this.retrieveInputAtPath(a,c);w&&(w.type===ee.Trigger?w.asTrigger().fire():console.warn("Input with name: '".concat(a,"', at path:'").concat(c,"' is not a trigger")))},p.prototype.retrieveTextAtPath=function(a,c){if(!a){console.warn("No text name provided for path '".concat(c,"'"));return}if(!c){console.warn("No path provided for text '".concat(a,"'"));return}if(!this.artboard){console.warn("Tried to access text: '".concat(a,"', at path: '").concat(c,"', but the Artboard is null"));return}var w=this.artboard.textByPath(a,c);if(!w){console.warn("Could not access text with name: '".concat(a,"', at path:'").concat(c,"'"));return}return w},p.prototype.getTextRunValueAtPath=function(a,c){var w=this.retrieveTextAtPath(a,c);if(!w){console.warn("Could not get text with name: '".concat(a,"', at path:'").concat(c,"'"));return}return w.text},p.prototype.setTextRunValueAtPath=function(a,c,w){var C=this.retrieveTextAtPath(a,w);if(!C){console.warn("Could not set text with name: '".concat(a,"', at path:'").concat(w,"'"));return}C.text=c},Object.defineProperty(p.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(a){return a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(a){return a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(a){return!a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(a){return!a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),p.prototype.on=function(a,c){this.eventManager.add({type:a,callback:c})},p.prototype.off=function(a,c){this.eventManager.remove({type:a,callback:c})},p.prototype.unsubscribe=function(a,c){console.warn("This function is deprecated: please use `off()` instead."),this.off(a,c)},p.prototype.removeAllRiveEventListeners=function(a){this.eventManager.removeAll(a)},p.prototype.unsubscribeAll=function(a){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(a)},p.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},p.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},p.prototype.enableFPSCounter=function(a){this.runtime.enableFPSCounter(a)},p.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(p.prototype,"contents",{get:function(){if(this.loaded){for(var a={artboards:[]},c=0;c<this.file.artboardCount();c++){for(var w=this.file.artboardByIndex(c),C={name:w.name,animations:[],stateMachines:[]},I=0;I<w.animationCount();I++){var M=w.animationByIndex(I);C.animations.push(M.name)}for(var X=0;X<w.stateMachineCount();X++){for(var te=w.stateMachineByIndex(X),G=te.name,ae=new this.runtime.StateMachineInstance(te,w),be=[],Le=0;Le<ae.inputCount();Le++){var Te=ae.input(Le);be.push({name:Te.name,type:Te.type})}C.stateMachines.push({name:G,inputs:be})}a.artboards.push(C)}return a}},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(a){this._volume=a,this.artboard&&(this.artboard.volume=a*pe.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"artboardWidth",{get:function(){var a;return this.artboard?this.artboard.width:(a=this._artboardWidth)!==null&&a!==void 0?a:0},set:function(a){this._artboardWidth=a,this.artboard&&(this.artboard.width=a)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"artboardHeight",{get:function(){var a;return this.artboard?this.artboard.height:(a=this._artboardHeight)!==null&&a!==void 0?a:0},set:function(a){this._artboardHeight=a,this.artboard&&(this.artboard.height=a)},enumerable:!1,configurable:!0}),p.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(p.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(a){this._devicePixelRatioUsed=a},enumerable:!1,configurable:!0}),p.prototype.bindViewModelInstance=function(a){var c;this.artboard&&!this.destroyed&&a&&a.runtimeInstance&&(a.internalIncrementReferenceCount(),(c=this._viewModelInstance)===null||c===void 0||c.cleanup(),this._viewModelInstance=a,this.animator.stateMachines.length>0?this.animator.stateMachines.forEach(function(w){return w.bindViewModelInstance(a)}):this.artboard.bindViewModelInstance(a.runtimeInstance))},Object.defineProperty(p.prototype,"viewModelInstance",{get:function(){return this._viewModelInstance},enumerable:!1,configurable:!0}),p.prototype.viewModelByIndex=function(a){var c=this.file.viewModelByIndex(a);return c!==null?new _e(c):null},p.prototype.viewModelByName=function(a){var c=this.file.viewModelByName(a);return c!==null?new _e(c):null},p.prototype.enums=function(){if(this._dataEnums===null){var a=this.file.enums();this._dataEnums=a.map(function(c){return new mt(c)})}return this._dataEnums},p.prototype.defaultViewModel=function(){if(this.artboard){var a=this.file.defaultArtboardViewModel(this.artboard);if(a)return new _e(a)}return null},p.prototype.getArtboard=function(a){var c,w;return(w=(c=this.riveFile)===null||c===void 0?void 0:c.getArtboard(a))!==null&&w!==void 0?w:null},p.missingErrorMessage="Rive source file or data buffer required",p.cleanupErrorMessage="Attempt to use file after calling cleanup.",p}(),_e=function(){function p(a){this._viewModel=a}return Object.defineProperty(p.prototype,"instanceCount",{get:function(){return this._viewModel.instanceCount},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"name",{get:function(){return this._viewModel.name},enumerable:!1,configurable:!0}),p.prototype.instanceByIndex=function(a){var c=this._viewModel.instanceByIndex(a);return c!==null?new rt(c,null):null},p.prototype.instanceByName=function(a){var c=this._viewModel.instanceByName(a);return c!==null?new rt(c,null):null},p.prototype.defaultInstance=function(){var a=this._viewModel.defaultInstance();return a!==null?new rt(a,null):null},p.prototype.instance=function(){var a=this._viewModel.instance();return a!==null?new rt(a,null):null},Object.defineProperty(p.prototype,"properties",{get:function(){return this._viewModel.getProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"instanceNames",{get:function(){return this._viewModel.getInstanceNames()},enumerable:!1,configurable:!0}),p}(),mt=function(){function p(a){this._dataEnum=a}return Object.defineProperty(p.prototype,"name",{get:function(){return this._dataEnum.name},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"values",{get:function(){return this._dataEnum.values},enumerable:!1,configurable:!0}),p}(),ke;(function(p){p.Number="number",p.String="string",p.Boolean="boolean",p.Color="color",p.Trigger="trigger",p.Enum="enum",p.List="list",p.Image="image",p.Artboard="artboard"})(ke||(ke={}));var rt=function(){function p(a,c){this._parents=[],this._children=[],this._viewModelInstances=new Map,this._propertiesWithCallbacks=[],this._referenceCount=0,this._runtimeInstance=a,c!==null&&this._parents.push(c)}return Object.defineProperty(p.prototype,"runtimeInstance",{get:function(){return this._runtimeInstance},enumerable:!1,configurable:!0}),p.prototype.handleCallbacks=function(){this._propertiesWithCallbacks.length!==0&&(this._propertiesWithCallbacks.forEach(function(a){a.handleCallbacks()}),this._propertiesWithCallbacks.forEach(function(a){a.clearChanges()})),this._children.forEach(function(a){return a.handleCallbacks()})},p.prototype.addParent=function(a){this._parents.includes(a)||(this._parents.push(a),(this._propertiesWithCallbacks.length>0||this._children.length>0)&&a.addToViewModelCallbacks(this))},p.prototype.removeParent=function(a){var c=this._parents.indexOf(a);if(c!==-1){var w=this._parents[c];w.removeFromViewModelCallbacks(this),this._parents.splice(c,1)}},p.prototype.addToPropertyCallbacks=function(a){var c=this;this._propertiesWithCallbacks.includes(a)||(this._propertiesWithCallbacks.push(a),this._propertiesWithCallbacks.length>0&&this._parents.forEach(function(w){w.addToViewModelCallbacks(c)}))},p.prototype.removeFromPropertyCallbacks=function(a){var c=this;this._propertiesWithCallbacks.includes(a)&&(this._propertiesWithCallbacks=this._propertiesWithCallbacks.filter(function(w){return w!==a}),this._children.length===0&&this._propertiesWithCallbacks.length===0&&this._parents.forEach(function(w){w.removeFromViewModelCallbacks(c)}))},p.prototype.addToViewModelCallbacks=function(a){var c=this;this._children.includes(a)||(this._children.push(a),this._parents.forEach(function(w){w.addToViewModelCallbacks(c)}))},p.prototype.removeFromViewModelCallbacks=function(a){var c=this;this._children.includes(a)&&(this._children=this._children.filter(function(w){return w!==a}),this._children.length===0&&this._propertiesWithCallbacks.length===0&&this._parents.forEach(function(w){w.removeFromViewModelCallbacks(c)}))},p.prototype.clearCallbacks=function(){this._propertiesWithCallbacks.forEach(function(a){a.clearCallbacks()})},p.prototype.propertyFromPath=function(a,c){var w=a.split("/");return this.propertyFromPathSegments(w,0,c)},p.prototype.viewModelFromPathSegments=function(a,c){var w=this.internalViewModelInstance(a[c]);return w!==null?c==a.length-1?w:w.viewModelFromPathSegments(a,c++):null},p.prototype.propertyFromPathSegments=function(a,c,w){var C,I,M,X,te,G,ae,be,Le,Te,yt,ct,et,tt,ht,Xt,Qt,Ct;if(c<a.length-1){var Z=this.internalViewModelInstance(a[c]);return Z!==null?Z.propertyFromPathSegments(a,c+1,w):null}var ve=null;switch(w){case ke.Number:if(ve=(I=(C=this._runtimeInstance)===null||C===void 0?void 0:C.number(a[c]))!==null&&I!==void 0?I:null,ve!==null)return new Kt(ve,this);break;case ke.String:if(ve=(X=(M=this._runtimeInstance)===null||M===void 0?void 0:M.string(a[c]))!==null&&X!==void 0?X:null,ve!==null)return new Lt(ve,this);break;case ke.Boolean:if(ve=(G=(te=this._runtimeInstance)===null||te===void 0?void 0:te.boolean(a[c]))!==null&&G!==void 0?G:null,ve!==null)return new Ft(ve,this);break;case ke.Color:if(ve=(be=(ae=this._runtimeInstance)===null||ae===void 0?void 0:ae.color(a[c]))!==null&&be!==void 0?be:null,ve!==null)return new Yt(ve,this);break;case ke.Trigger:if(ve=(Te=(Le=this._runtimeInstance)===null||Le===void 0?void 0:Le.trigger(a[c]))!==null&&Te!==void 0?Te:null,ve!==null)return new dn(ve,this);break;case ke.Enum:if(ve=(ct=(yt=this._runtimeInstance)===null||yt===void 0?void 0:yt.enum(a[c]))!==null&&ct!==void 0?ct:null,ve!==null)return new Ze(ve,this);break;case ke.List:if(ve=(tt=(et=this._runtimeInstance)===null||et===void 0?void 0:et.list(a[c]))!==null&&tt!==void 0?tt:null,ve!==null)return new _t(ve,this);break;case ke.Image:if(ve=(Xt=(ht=this._runtimeInstance)===null||ht===void 0?void 0:ht.image(a[c]))!==null&&Xt!==void 0?Xt:null,ve!==null)return new nr(ve,this);break;case ke.Artboard:if(ve=(Ct=(Qt=this._runtimeInstance)===null||Qt===void 0?void 0:Qt.artboard(a[c]))!==null&&Ct!==void 0?Ct:null,ve!==null)return new $t(ve,this);break}return null},p.prototype.internalViewModelInstance=function(a){var c;if(this._viewModelInstances.has(a))return this._viewModelInstances.get(a);var w=(c=this._runtimeInstance)===null||c===void 0?void 0:c.viewModel(a);if(w!==null){var C=new p(w,this);return C.internalIncrementReferenceCount(),this._viewModelInstances.set(a,C),C}return null},p.prototype.number=function(a){var c=this.propertyFromPath(a,ke.Number);return c},p.prototype.string=function(a){var c=this.propertyFromPath(a,ke.String);return c},p.prototype.boolean=function(a){var c=this.propertyFromPath(a,ke.Boolean);return c},p.prototype.color=function(a){var c=this.propertyFromPath(a,ke.Color);return c},p.prototype.trigger=function(a){var c=this.propertyFromPath(a,ke.Trigger);return c},p.prototype.enum=function(a){var c=this.propertyFromPath(a,ke.Enum);return c},p.prototype.list=function(a){var c=this.propertyFromPath(a,ke.List);return c},p.prototype.image=function(a){var c=this.propertyFromPath(a,ke.Image);return c},p.prototype.artboard=function(a){var c=this.propertyFromPath(a,ke.Artboard);return c},p.prototype.viewModel=function(a){var c=a.split("/"),w=c.length>1?this.viewModelFromPathSegments(c.slice(0,c.length-1),0):this;return w!=null?w.internalViewModelInstance(c[c.length-1]):null},p.prototype.internalReplaceViewModel=function(a,c){var w;if(c.runtimeInstance!==null){var C=((w=this._runtimeInstance)===null||w===void 0?void 0:w.replaceViewModel(a,c.runtimeInstance))||!1;if(C){c.internalIncrementReferenceCount();var I=this.internalViewModelInstance(a);I!==null&&(I.removeParent(this),this._children.includes(I)&&(this._children=this._children.filter(function(M){return M!==I})),I.cleanup()),this._viewModelInstances.set(a,c),c.addParent(this)}return C}return!1},p.prototype.replaceViewModel=function(a,c){var w,C=a.split("/"),I=C.length>1?this.viewModelFromPathSegments(C.slice(0,C.length-1),0):this;return(w=I?.internalReplaceViewModel(C[C.length-1],c))!==null&&w!==void 0?w:!1},p.prototype.incrementReferenceCount=function(){var a;this._referenceCount++,(a=this._runtimeInstance)===null||a===void 0||a.incrementReferenceCount()},p.prototype.decrementReferenceCount=function(){var a;this._referenceCount--,(a=this._runtimeInstance)===null||a===void 0||a.decrementReferenceCount()},Object.defineProperty(p.prototype,"properties",{get:function(){var a;return((a=this._runtimeInstance)===null||a===void 0?void 0:a.getProperties().map(function(c){return A({},c)}))||[]},enumerable:!1,configurable:!0}),p.prototype.internalIncrementReferenceCount=function(){this._referenceCount++},p.prototype.cleanup=function(){var a=this;if(this._referenceCount--,this._referenceCount<=0){this._runtimeInstance=null,this.clearCallbacks(),this._propertiesWithCallbacks=[],this._viewModelInstances.forEach(function(C){C.cleanup()}),this._viewModelInstances.clear();var c=O([],this._children,!0);this._children.length=0;var w=O([],this._parents,!0);this._parents.length=0,c.forEach(function(C){C.removeParent(a)}),w.forEach(function(C){C.removeFromViewModelCallbacks(a)})}},p}(),je=function(){function p(a,c){this.callbacks=[],this._viewModelInstanceValue=a,this._parentViewModel=c}return p.prototype.on=function(a){this.callbacks.length===0&&this._viewModelInstanceValue.clearChanges(),this.callbacks.includes(a)||(this.callbacks.push(a),this._parentViewModel.addToPropertyCallbacks(this))},p.prototype.off=function(a){a?this.callbacks=this.callbacks.filter(function(c){return c!==a}):this.callbacks.length=0,this.callbacks.length===0&&this._parentViewModel.removeFromPropertyCallbacks(this)},p.prototype.internalHandleCallback=function(a){},p.prototype.handleCallbacks=function(){var a=this;this._viewModelInstanceValue.hasChanged&&this.callbacks.forEach(function(c){a.internalHandleCallback(c)})},p.prototype.clearChanges=function(){this._viewModelInstanceValue.clearChanges()},p.prototype.clearCallbacks=function(){this.callbacks.length=0},Object.defineProperty(p.prototype,"name",{get:function(){return this._viewModelInstanceValue.name},enumerable:!1,configurable:!0}),p}(),Lt=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(c){this._viewModelInstanceValue.value=c},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(c){c(this.value)},a}(je),Kt=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(c){this._viewModelInstanceValue.value=c},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(c){c(this.value)},a}(je),Ft=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(c){this._viewModelInstanceValue.value=c},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(c){c(this.value)},a}(je),dn=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return a.prototype.trigger=function(){return this._viewModelInstanceValue.trigger()},a.prototype.internalHandleCallback=function(c){c()},a}(je),Ze=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(c){this._viewModelInstanceValue.value=c},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"valueIndex",{get:function(){return this._viewModelInstanceValue.valueIndex},set:function(c){this._viewModelInstanceValue.valueIndex=c},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"values",{get:function(){return this._viewModelInstanceValue.values},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(c){c(this.value)},a}(je),_t=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"length",{get:function(){return this._viewModelInstanceValue.size},enumerable:!1,configurable:!0}),a.prototype.addInstance=function(c){c.runtimeInstance!=null&&(this._viewModelInstanceValue.addInstance(c.runtimeInstance),c.addParent(this._parentViewModel))},a.prototype.addInstanceAt=function(c,w){return c.runtimeInstance!=null&&this._viewModelInstanceValue.addInstanceAt(c.runtimeInstance,w)?(c.addParent(this._parentViewModel),!0):!1},a.prototype.removeInstance=function(c){c.runtimeInstance!=null&&(this._viewModelInstanceValue.removeInstance(c.runtimeInstance),c.removeParent(this._parentViewModel))},a.prototype.removeInstanceAt=function(c){this._viewModelInstanceValue.removeInstanceAt(c)},a.prototype.instanceAt=function(c){var w=this._viewModelInstanceValue.instanceAt(c);if(w!=null){var C=new rt(w,this._parentViewModel);return C}return null},a.prototype.swap=function(c,w){this._viewModelInstanceValue.swap(c,w)},a.prototype.internalHandleCallback=function(c){c()},a}(je),Yt=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(c){this._viewModelInstanceValue.value=c},enumerable:!1,configurable:!0}),a.prototype.rgb=function(c,w,C){this._viewModelInstanceValue.rgb(c,w,C)},a.prototype.rgba=function(c,w,C,I){this._viewModelInstanceValue.argb(I,c,w,C)},a.prototype.argb=function(c,w,C,I){this._viewModelInstanceValue.argb(c,w,C,I)},a.prototype.alpha=function(c){this._viewModelInstanceValue.alpha(c)},a.prototype.opacity=function(c){this._viewModelInstanceValue.alpha(Math.round(Math.max(0,Math.min(1,c))*255))},a.prototype.internalHandleCallback=function(c){c(this.value)},a}(je),nr=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{set:function(c){var w;this._viewModelInstanceValue.value((w=c?.nativeImage)!==null&&w!==void 0?w:null)},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(c){c()},a}(je),$t=function(p){y(a,p);function a(c,w){return p.call(this,c,w)||this}return Object.defineProperty(a.prototype,"value",{set:function(c){this._viewModelInstanceValue.value(c.nativeArtboard)},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(c){c()},a}(je),Or=function(p){return k(void 0,void 0,void 0,function(){var a,c,w;return g(this,function(C){switch(C.label){case 0:return a=new Request(p),[4,fetch(a)];case 1:return c=C.sent(),[4,c.arrayBuffer()];case 2:return w=C.sent(),[2,w]}})})},it=function(p){return typeof p=="string"?[p]:p instanceof Array?p:[]},ki={EventManager:Ye,TaskQueueManager:Je},jr=function(p){return k(void 0,void 0,void 0,function(){var a,c,w;return g(this,function(C){switch(C.label){case 0:return a=new Promise(function(I){return Y.getInstance(function(M){M.decodeAudio(p,I)})}),[4,a];case 1:return c=C.sent(),w=new _.AudioWrapper(c),_.finalizationRegistry.register(w,c),[2,w]}})})},Pi=function(p){return k(void 0,void 0,void 0,function(){var a,c,w;return g(this,function(C){switch(C.label){case 0:return a=new Promise(function(I){return Y.getInstance(function(M){M.decodeImage(p,I)})}),[4,a];case 1:return c=C.sent(),w=new _.ImageWrapper(c),_.finalizationRegistry.register(w,c),[2,w]}})})},Jt=function(p){return k(void 0,void 0,void 0,function(){var a,c,w;return g(this,function(C){switch(C.label){case 0:return a=new Promise(function(I){return Y.getInstance(function(M){M.decodeFont(p,I)})}),[4,a];case 1:return c=C.sent(),w=new _.FontWrapper(c),_.finalizationRegistry.register(w,c),[2,w]}})})}})(),u})())}(ui)),ui.exports}var Xl=Jl(),Ql=Tn('<div class="main-container"><canvas width="300" height="300"></canvas> <div class="headline"><p class="title">Привет!</p> <p class="headline-text">Ведутся работы</p></div></div>');function Zl(r,e){yi(e,!0);let t=Vt(void 0);Is(()=>{if(!Ne(t))return;const u=new Xl.Rive({src:"https://public.rive.app/community/runtime-files/186-341-flame-and-spark.riv",canvas:Ne(t),autoplay:!0});return()=>{u.cleanup()}});var i=Ql(),o=ai(i);ql(o,u=>Qe(t,u),()=>Ne(t)),an(r,i),wi()}const ec="modulepreload",tc=function(r,e){return new URL(r,e).href},Wo={},Rr=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let _=function(y){return Promise.all(y.map(A=>Promise.resolve(A).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const h=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),v=f?.nonce||f?.getAttribute("nonce");o=_(t.map(y=>{if(y=tc(y,i),y in Wo)return;Wo[y]=!0;const A=y.endsWith(".css"),k=A?'[rel="stylesheet"]':"";if(!!i)for(let U=h.length-1;U>=0;U--){const D=h[U];if(D.href===y&&(!A||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${k}`))return;const O=document.createElement("link");if(O.rel=A?"stylesheet":ec,A||(O.as="script"),O.crossOrigin="",O.href=y,v&&O.setAttribute("nonce",v),document.head.appendChild(O),A)return new Promise((U,D)=>{O.addEventListener("load",U),O.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return o.then(h=>{for(const f of h||[])f.status==="rejected"&&u(f.reason);return e().catch(u)})},nc=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Rr(async()=>{const{default:i}=await Promise.resolve().then(()=>tr);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class Os extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class rc extends Os{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vo extends Os{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qo extends Os{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var as;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(as||(as={}));var ic=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};class sc{constructor(e,{headers:t={},customFetch:i,region:o=as.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=nc(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return ic(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:h}=t;let f={},{region:v}=t;v||(v=this.region);const _=new URL(`${this.url}/${e}`);v&&v!=="any"&&(f["x-region"]=v,_.searchParams.set("forceFunctionRegion",v));let y;h&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=h):typeof h=="string"?(f["Content-Type"]="text/plain",y=h):typeof FormData<"u"&&h instanceof FormData?y=h:(f["Content-Type"]="application/json",y=JSON.stringify(h)));const A=yield this.fetch(_.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y}).catch(U=>{throw new rc(U)}),k=A.headers.get("x-relay-error");if(k&&k==="true")throw new Vo(A);if(!A.ok)throw new qo(A);let g=((i=A.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return g==="application/json"?O=yield A.json():g==="application/octet-stream"?O=yield A.blob():g==="text/event-stream"?O=A:g==="multipart/form-data"?O=yield A.formData():O=yield A.text(),{data:O,error:null,response:A}}catch(o){return{data:null,error:o,response:o instanceof qo||o instanceof Vo?o.context:void 0}}})}}var De={},Fn={},$n={},Dn={},Un={},Bn={},oc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xn=oc();const ac=Xn.fetch,qa=Xn.fetch.bind(Xn),za=Xn.Headers,uc=Xn.Request,lc=Xn.Response,tr=Object.freeze(Object.defineProperty({__proto__:null,Headers:za,Request:uc,Response:lc,default:qa,fetch:ac},Symbol.toStringTag,{value:"Module"})),cc=Kl(tr);var ni={},zo;function Ha(){if(zo)return ni;zo=1,Object.defineProperty(ni,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return ni.default=r,ni}var Ho;function Ga(){if(Ho)return Bn;Ho=1;var r=Bn&&Bn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Bn,"__esModule",{value:!0});const e=r(cc),t=r(Ha());class i{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=Object.assign({},this.headers),this.headers[u]=h,this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let v=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async _=>{var y,A,k;let g=null,O=null,U=null,D=_.status,K=_.statusText;if(_.ok){if(this.method!=="HEAD"){const ee=await _.text();ee===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?O=ee:O=JSON.parse(ee))}const N=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),Y=(A=_.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");N&&Y&&Y.length>1&&(U=parseInt(Y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(g={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,U=null,D=406,K="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const N=await _.text();try{g=JSON.parse(N),Array.isArray(g)&&_.status===404&&(O=[],g=null,D=200,K="OK")}catch{_.status===404&&N===""?(D=204,K="No Content"):g={message:N}}if(g&&this.isMaybeSingle&&(!((k=g?.details)===null||k===void 0)&&k.includes("0 rows"))&&(g=null,D=200,K="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:O,count:U,status:D,statusText:K}});return this.shouldThrowOnError||(v=v.catch(_=>{var y,A,k;return{error:{message:`${(y=_?.name)!==null&&y!==void 0?y:"FetchError"}: ${_?.message}`,details:`${(A=_?.stack)!==null&&A!==void 0?A:""}`,hint:"",code:`${(k=_?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),v.then(u,h)}returns(){return this}overrideTypes(){return this}}return Bn.default=i,Bn}var Go;function Ka(){if(Go)return Un;Go=1;var r=Un&&Un.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Un,"__esModule",{value:!0});const e=r(Ga());class t extends e.default{select(o){let u=!1;const h=(o??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:u=!0,nullsFirst:h,foreignTable:f,referencedTable:v=f}={}){const _=v?`${v}.order`:"order",y=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,u,{foreignTable:h,referencedTable:f=h}={}){const v=typeof f>"u"?"offset":`${f}.offset`,_=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(v,`${o}`),this.url.searchParams.set(_,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:u=!1,settings:h=!1,buffers:f=!1,wal:v=!1,format:_="text"}={}){var y;const A=[o?"analyze":null,u?"verbose":null,h?"settings":null,f?"buffers":null,v?"wal":null].filter(Boolean).join("|"),k=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${_}; for="${k}"; options=${A};`,_==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Un.default=t,Un}var Ko;function js(){if(Ko)return Dn;Ko=1;var r=Dn&&Dn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dn,"__esModule",{value:!0});const e=r(Ka());class t extends e.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const h=Array.from(new Set(u)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${h})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:h,type:f}={}){let v="";f==="plain"?v="pl":f==="phrase"?v="ph":f==="websearch"&&(v="w");const _=h===void 0?"":`(${h})`;return this.url.searchParams.append(o,`${v}fts${_}.${u}`),this}match(o){return Object.entries(o).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(o,u,h){return this.url.searchParams.append(o,`not.${u}.${h}`),this}or(o,{foreignTable:u,referencedTable:h=u}={}){const f=h?`${h}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,u,h){return this.url.searchParams.append(o,`${u}.${h}`),this}}return Dn.default=t,Dn}var Yo;function Ya(){if(Yo)return $n;Yo=1;var r=$n&&$n.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($n,"__esModule",{value:!0});const e=r(js());class t{constructor(o,{headers:u={},schema:h,fetch:f}){this.url=o,this.headers=u,this.schema=h,this.fetch=f}select(o,{head:u=!1,count:h}={}){const f=u?"HEAD":"GET";let v=!1;const _=(o??"*").split("").map(y=>/\s/.test(y)&&!v?"":(y==='"'&&(v=!v),y)).join("");return this.url.searchParams.set("select",_),h&&(this.headers.Prefer=`count=${h}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:u,defaultToNull:h=!0}={}){const f="POST",v=[];if(this.headers.Prefer&&v.push(this.headers.Prefer),u&&v.push(`count=${u}`),h||v.push("missing=default"),this.headers.Prefer=v.join(","),Array.isArray(o)){const _=o.reduce((y,A)=>y.concat(Object.keys(A)),[]);if(_.length>0){const y=[...new Set(_)].map(A=>`"${A}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:u,ignoreDuplicates:h=!1,count:f,defaultToNull:v=!0}={}){const _="POST",y=[`resolution=${h?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&y.push(this.headers.Prefer),f&&y.push(`count=${f}`),v||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const A=o.reduce((k,g)=>k.concat(Object.keys(g)),[]);if(A.length>0){const k=[...new Set(A)].map(g=>`"${g}"`);this.url.searchParams.set("columns",k.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:u}={}){const h="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),u&&f.push(`count=${u}`),this.headers.Prefer=f.join(","),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const u="DELETE",h=[];return o&&h.push(`count=${o}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return $n.default=t,$n}var pr={},vr={},Jo;function hc(){return Jo||(Jo=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.version=void 0,vr.version="0.0.0-automated"),vr}var Xo;function dc(){if(Xo)return pr;Xo=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.DEFAULT_HEADERS=void 0;const r=hc();return pr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},pr}var Qo;function fc(){if(Qo)return Fn;Qo=1;var r=Fn&&Fn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Fn,"__esModule",{value:!0});const e=r(Ya()),t=r(js()),i=dc();class o{constructor(h,{headers:f={},schema:v,fetch:_}={}){this.url=h,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),f),this.schemaName=v,this.fetch=_}from(h){const f=new URL(`${this.url}/${h}`);return new e.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new o(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,f={},{head:v=!1,get:_=!1,count:y}={}){let A;const k=new URL(`${this.url}/rpc/${h}`);let g;v||_?(A=v?"HEAD":"GET",Object.entries(f).filter(([U,D])=>D!==void 0).map(([U,D])=>[U,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([U,D])=>{k.searchParams.append(U,D)})):(A="POST",g=f);const O=Object.assign({},this.headers);return y&&(O.Prefer=`count=${y}`),new t.default({method:A,url:k,headers:O,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return Fn.default=o,Fn}var Zo;function pc(){if(Zo)return De;Zo=1;var r=De&&De.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(De,"__esModule",{value:!0}),De.PostgrestError=De.PostgrestBuilder=De.PostgrestTransformBuilder=De.PostgrestFilterBuilder=De.PostgrestQueryBuilder=De.PostgrestClient=void 0;const e=r(fc());De.PostgrestClient=e.default;const t=r(Ya());De.PostgrestQueryBuilder=t.default;const i=r(js());De.PostgrestFilterBuilder=i.default;const o=r(Ka());De.PostgrestTransformBuilder=o.default;const u=r(Ga());De.PostgrestBuilder=u.default;const h=r(Ha());return De.PostgrestError=h.default,De.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:h.default},De}var vc=pc();const gc=Gl(vc),{PostgrestClient:mc,PostgrestQueryBuilder:dd,PostgrestFilterBuilder:fd,PostgrestTransformBuilder:pd,PostgrestBuilder:vd,PostgrestError:gd}=gc;function _c(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const yc=_c(),wc="2.11.15",bc=`realtime-js/${wc}`,Ac="1.0.0",Ja=1e4,Ec=1e3;var Ar;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ar||(Ar={}));var Ke;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ke||(Ke={}));var Pt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Pt||(Pt={}));var us;(function(r){r.websocket="websocket"})(us||(us={}));var An;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(An||(An={}));class kc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const o=t.getUint8(1),u=t.getUint8(2);let h=this.HEADER_LENGTH+2;const f=i.decode(e.slice(h,h+o));h=h+o;const v=i.decode(e.slice(h,h+u));h=h+u;const _=JSON.parse(i.decode(e.slice(h,e.byteLength)));return{ref:null,topic:f,event:v,payload:_}}}class Xa{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ce||(Ce={}));const ea=(r,e,t={})=>{var i;const o=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((u,h)=>(u[h]=Pc(h,r,e,o),u),{})},Pc=(r,e,t,i)=>{const o=e.find(f=>f.name===r),u=o?.type,h=t[r];return u&&!i.includes(u)?Qa(u,h):ls(h)},Qa=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Rc(e,t)}switch(r){case Ce.bool:return Cc(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return Sc(e);case Ce.json:case Ce.jsonb:return Tc(e);case Ce.timestamp:return Ic(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return ls(e);default:return ls(e)}},ls=r=>r,Cc=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Sc=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Tc=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Rc=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,i=r[t];if(r[0]==="{"&&i==="}"){let u;const h=r.slice(1,t);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(f=>Qa(e,f))}return r},Ic=r=>typeof r=="string"?r.replace(" ","T"):r,Za=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class qi{constructor(e,t,i={},o=Ja){this.channel=e,this.event=t,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ta;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ta||(ta={}));class Er{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:h,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Er.syncState(this.state,o,u,h),this.pendingDiffs.forEach(v=>{this.state=Er.syncDiff(this.state,v,u,h)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Er.syncDiff(this.state,o,u,h),f())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,o){const u=this.cloneDeep(e),h=this.transformState(t),f={},v={};return this.map(u,(_,y)=>{h[_]||(v[_]=y)}),this.map(h,(_,y)=>{const A=u[_];if(A){const k=y.map(D=>D.presence_ref),g=A.map(D=>D.presence_ref),O=y.filter(D=>g.indexOf(D.presence_ref)<0),U=A.filter(D=>k.indexOf(D.presence_ref)<0);O.length>0&&(f[_]=O),U.length>0&&(v[_]=U)}else f[_]=y}),this.syncDiff(u,{joins:f,leaves:v},i,o)}static syncDiff(e,t,i,o){const{joins:u,leaves:h}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(f,v)=>{var _;const y=(_=e[f])!==null&&_!==void 0?_:[];if(e[f]=this.cloneDeep(v),y.length>0){const A=e[f].map(g=>g.presence_ref),k=y.filter(g=>A.indexOf(g.presence_ref)<0);e[f].unshift(...k)}i(f,y,v)}),this.map(h,(f,v)=>{let _=e[f];if(!_)return;const y=v.map(A=>A.presence_ref);_=_.filter(A=>y.indexOf(A.presence_ref)<0),e[f]=_,o(f,_,v),_.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const o=e[i];return"metas"in o?t[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):t[i]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var na;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(na||(na={}));var ra;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ra||(ra={}));var zt;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(zt||(zt={}));class Ms{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new qi(this,Pt.join,this.params,this.timeout),this.rejoinTimer=new Xa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pt.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Er(this),this.broadcastEndpointURL=Za(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:u,presence:h,private:f}}=this.params;this._onError(y=>e?.(zt.CHANNEL_ERROR,y)),this._onClose(()=>e?.(zt.CLOSED));const v={},_={broadcast:u,presence:h,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&o!==void 0?o:[],private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var A;if(this.socket.setAuth(),y===void 0){e?.(zt.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,g=(A=k?.length)!==null&&A!==void 0?A:0,O=[];for(let U=0;U<g;U++){const D=k[U],{filter:{event:K,schema:J,table:N,filter:Y}}=D,ee=y&&y[U];if(ee&&ee.event===K&&ee.schema===J&&ee.table===N&&ee.filter===Y)O.push(Object.assign(Object.assign({},D),{id:ee.id}));else{this.unsubscribe(),this.state=Ke.errored,e?.(zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e(zt.SUBSCRIBED);return}}).receive("error",y=>{this.state=Ke.errored,e?.(zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:u,payload:h}=e,v={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const _=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=_.body)===null||o===void 0?void 0:o.cancel()),_.ok?"ok":"error"}catch(_){return _.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,f,v;const _=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((v=(f=(h=this.params)===null||h===void 0?void 0:h.config)===null||f===void 0?void 0:f.broadcast)===null||v===void 0)&&v.ack)&&u("ok"),_.receive("ok",()=>u("ok")),_.receive("error",()=>u("error")),_.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ke.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new qi(this,Pt.leave,{},e),i.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),h=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(u),h}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new qi(this,e,t,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var o,u;const h=e.toLocaleLowerCase(),{close:f,error:v,leave:_,join:y}=Pt;if(i&&[f,v,_,y].indexOf(h)>=0&&i!==this._joinRef())return;let k=this._onMessage(h,t,i);if(t&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var O,U,D;return((O=g.filter)===null||O===void 0?void 0:O.event)==="*"||((D=(U=g.filter)===null||U===void 0?void 0:U.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===h}).map(g=>g.callback(k,i)):(u=this.bindings[h])===null||u===void 0||u.filter(g=>{var O,U,D,K,J,N;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in g){const Y=g.id,ee=(O=g.filter)===null||O===void 0?void 0:O.event;return Y&&((U=t.ids)===null||U===void 0?void 0:U.includes(Y))&&(ee==="*"||ee?.toLocaleLowerCase()===((D=t.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const Y=(J=(K=g?.filter)===null||K===void 0?void 0:K.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return Y==="*"||Y===((N=t?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===h}).map(g=>{if(typeof k=="object"&&"ids"in k){const O=k.data,{schema:U,table:D,commit_timestamp:K,type:J,errors:N}=O;k=Object.assign(Object.assign({},{schema:U,table:D,commit_timestamp:K,eventType:J,new:{},old:{},errors:N}),this._getPayloadRecords(O))}g.callback(k,i)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const o=e.toLocaleLowerCase(),u={type:o,filter:t,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Ms.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pt.close,{},e)}_onError(e){this._on(Pt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ea(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ea(e.columns,e.old_record)),t}}const ia=()=>{},Oc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jc{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ja,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ia,this.ref=0,this.logger=ia,this.conn=null,this.sendBuffer=[],this.serializer=new kc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let h;return u?h=u:typeof fetch>"u"?h=(...f)=>Rr(async()=>{const{default:v}=await Promise.resolve().then(()=>tr);return{default:v}},void 0,import.meta.url).then(({default:v})=>v(...f)):h=fetch,(...f)=>h(...f)},this.endPoint=`${e}/${us.websocket}`,this.httpEndpoint=Za(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(i=t?.params)===null||i===void 0?void 0:i.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=t?.encode?t.encode:(u,h)=>h(JSON.stringify(u)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Xa(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=yc),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ac}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ar.connecting:return An.Connecting;case Ar.open:return An.Open;case Ar.closing:return An.Closing;default:return An.Closed}}isConnected(){return this.connectionState()===An.Open}channel(e,t={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new Ms(`realtime:${e}`,t,this);return this.channels.push(u),u}}push(e){const{topic:t,event:i,payload:o,ref:u}=e,h=()=>{this.encode(e,f=>{var v;(v=this.conn)===null||v===void 0||v.send(f)})};this.log("push",`${t} ${i} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const o={access_token:t,version:bc};t&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Pt.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Ec,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:o,payload:u,ref:h}=t;i==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${i} ${o} ${h&&"("+h+")"||""}`,u),Array.from(this.channels).filter(f=>f._isMember(i)).forEach(f=>f._trigger(o,u,h)),this.stateChangeCallbacks.message.forEach(f=>f(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${i}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([Oc],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}}class xs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Mc extends xs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class cs extends xs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var xc=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};const eu=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Rr(async()=>{const{default:i}=await Promise.resolve().then(()=>tr);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},Lc=()=>xc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Rr(()=>Promise.resolve().then(()=>tr),void 0,import.meta.url)).Response:Response}),hs=r=>{if(Array.isArray(r))return r.map(t=>hs(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,i])=>{const o=t.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[o]=hs(i)}),e};var Rn=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};const zi=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Fc=(r,e,t)=>Rn(void 0,void 0,void 0,function*(){const i=yield Lc();r instanceof i&&!t?.noResolveJson?r.json().then(o=>{e(new Mc(zi(o),r.status||500))}).catch(o=>{e(new cs(zi(o),o))}):e(new cs(zi(r),r))}),$c=(r,e,t,i)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i&&(o.body=JSON.stringify(i)),Object.assign(Object.assign({},o),t))};function Ir(r,e,t,i,o,u){return Rn(this,void 0,void 0,function*(){return new Promise((h,f)=>{r(t,$c(e,i,o,u)).then(v=>{if(!v.ok)throw v;return i?.noResolveJson?v:v.json()}).then(v=>h(v)).catch(v=>Fc(v,f,i))})})}function gi(r,e,t,i){return Rn(this,void 0,void 0,function*(){return Ir(r,"GET",e,t,i)})}function rn(r,e,t,i,o){return Rn(this,void 0,void 0,function*(){return Ir(r,"POST",e,i,o,t)})}function Dc(r,e,t,i,o){return Rn(this,void 0,void 0,function*(){return Ir(r,"PUT",e,i,o,t)})}function Uc(r,e,t,i){return Rn(this,void 0,void 0,function*(){return Ir(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function tu(r,e,t,i,o){return Rn(this,void 0,void 0,function*(){return Ir(r,"DELETE",e,i,o,t)})}var nt=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};const Bc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nc{constructor(e,t={},i,o){this.url=e,this.headers=t,this.bucketId=i,this.fetch=eu(o)}uploadOrUpdate(e,t,i,o){return nt(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},sa),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const v=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),v&&u.append("metadata",this.encodeMetadata(v)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",h.cacheControl),v&&u.append("metadata",this.encodeMetadata(v))):(u=i,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType,v&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(v)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const _=this._removeEmptyFolders(t),y=this._getFinalPath(_),A=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:e,body:u,headers:f},h?.duplex?{duplex:h.duplex}:{})),k=yield A.json();return A.ok?{data:{path:_,id:k.Id,fullPath:k.Key},error:null}:{data:null,error:k}}catch(u){if(Ue(u))return{data:null,error:u};throw u}})}upload(e,t,i){return nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,o){return nt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),h=this._getFinalPath(u),f=new URL(this.url+`/object/upload/sign/${h}`);f.searchParams.set("token",t);try{let v;const _=Object.assign({upsert:sa.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(_.upsert)});typeof Blob<"u"&&i instanceof Blob?(v=new FormData,v.append("cacheControl",_.cacheControl),v.append("",i)):typeof FormData<"u"&&i instanceof FormData?(v=i,v.append("cacheControl",_.cacheControl)):(v=i,y["cache-control"]=`max-age=${_.cacheControl}`,y["content-type"]=_.contentType);const A=yield this.fetch(f.toString(),{method:"PUT",body:v,headers:y}),k=yield A.json();return A.ok?{data:{path:u,fullPath:k.Key},error:null}:{data:null,error:k}}catch(v){if(Ue(v))return{data:null,error:v};throw v}})}createSignedUploadUrl(e,t){return nt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const u=yield rn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),h=new URL(this.url+u.url),f=h.searchParams.get("token");if(!f)throw new xs("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:f},error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}update(e,t,i){return nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return nt(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}copy(e,t,i){return nt(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,i){return nt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),u=yield rn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,i){return nt(this,void 0,void 0,function*(){try{const o=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}download(e,t){return nt(this,void 0,void 0,function*(){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(t?.transform||{}),h=u?`?${u}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield gi(this.fetch,`${this.url}/${o}/${f}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(Ue(f))return{data:null,error:f};throw f}})}info(e){return nt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield gi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:hs(i),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}exists(e){return nt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Uc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Ue(i)&&i instanceof cs){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),o=[],u=t?.download?`download=${t.download===!0?"":t.download}`:"";u!==""&&o.push(u);const f=typeof t?.transform<"u"?"render/image":"object",v=this.transformOptsToQueryString(t?.transform||{});v!==""&&o.push(v);let _=o.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${_}`)}}}remove(e){return nt(this,void 0,void 0,function*(){try{return{data:yield tu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}list(e,t,i){return nt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Bc),t),{prefix:e||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Wc="2.7.1",Vc={"X-Client-Info":`storage-js/${Wc}`};var Nn=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};class qc{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},Vc),t),this.fetch=eu(i)}listBuckets(){return Nn(this,void 0,void 0,function*(){try{return{data:yield gi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield gi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Nn(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Nn(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield tu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}}class zc extends qc{constructor(e,t={},i){super(e,t,i)}from(e){return new Nc(this.url,this.headers,e,this.fetch)}}const Hc="2.51.0";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const Gc={"X-Client-Info":`supabase-js-${yr}/${Hc}`},Kc={headers:Gc},Yc={schema:"public"},Jc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xc={};var Qc=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};const Zc=r=>{let e;return r?e=r:typeof fetch>"u"?e=qa:e=fetch,(...t)=>e(...t)},eh=()=>typeof Headers>"u"?za:Headers,th=(r,e,t)=>{const i=Zc(t),o=eh();return(u,h)=>Qc(void 0,void 0,void 0,function*(){var f;const v=(f=yield e())!==null&&f!==void 0?f:r;let _=new o(h?.headers);return _.has("apikey")||_.set("apikey",r),_.has("Authorization")||_.set("Authorization",`Bearer ${v}`),i(u,Object.assign(Object.assign({},h),{headers:_}))})};var nh=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};function rh(r){return r.endsWith("/")?r:r+"/"}function ih(r,e){var t,i;const{db:o,auth:u,realtime:h,global:f}=r,{db:v,auth:_,realtime:y,global:A}=e,k={db:Object.assign(Object.assign({},v),o),auth:Object.assign(Object.assign({},_),u),realtime:Object.assign(Object.assign({},y),h),global:Object.assign(Object.assign(Object.assign({},A),f),{headers:Object.assign(Object.assign({},(t=A?.headers)!==null&&t!==void 0?t:{}),(i=f?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>nh(this,void 0,void 0,function*(){return""})};return r.accessToken?k.accessToken=r.accessToken:delete k.accessToken,k}const nu="2.71.0",Hn=30*1e3,ds=3,Hi=ds*Hn,sh="http://localhost:9999",oh="supabase.auth.token",ah={"X-Client-Info":`gotrue-js/${nu}`},fs="X-Supabase-Api-Version",ru={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lh=10*60*1e3;class Ls extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function ne(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class ch extends Ls{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function hh(r){return ne(r)&&r.name==="AuthApiError"}class iu extends Ls{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class hn extends Ls{constructor(e,t,i,o){super(e,i,o),this.name=t,this.status=i}}class nn extends hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dh(r){return ne(r)&&r.name==="AuthSessionMissingError"}class ri extends hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ii extends hn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class si extends hn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fh(r){return ne(r)&&r.name==="AuthImplicitGrantRedirectError"}class oa extends hn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ps extends hn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Gi(r){return ne(r)&&r.name==="AuthRetryableFetchError"}class aa extends hn{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class vs extends hn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ua=` 	
\r=`.split(""),ph=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<ua.length;e+=1)r[ua[e].charCodeAt(0)]=-2;for(let e=0;e<mi.length;e+=1)r[mi[e].charCodeAt(0)]=e;return r})();function la(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(mi[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(mi[i]),e.queuedBits-=6}}function su(r,e,t){const i=ph[r];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function ca(r){const e=[],t=h=>{e.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{mh(h,i,t)};for(let h=0;h<r.length;h+=1)su(r.charCodeAt(h),o,u);return e.join("")}function vh(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function gh(r,e){for(let t=0;t<r.length;t+=1){let i=r.charCodeAt(t);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(r.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}vh(i,e)}}function mh(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function _h(r){const e=[],t={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)su(r.charCodeAt(o),t,i);return new Uint8Array(e)}function yh(r){const e=[];return gh(r,t=>e.push(t)),new Uint8Array(e)}function wh(r){const e=[],t={queue:0,queuedBits:0},i=o=>{e.push(o)};return r.forEach(o=>la(o,t,i)),la(null,t,i),e.join("")}function bh(r){return Math.round(Date.now()/1e3)+r}function Ah(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",yn={tested:!1,writable:!1},ou=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yn.tested)return yn.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),yn.tested=!0,yn.writable=!0}catch{yn.tested=!0,yn.writable=!1}return yn.writable};function Eh(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,u)=>{e[u]=o})}catch{}return t.searchParams.forEach((i,o)=>{e[o]=i}),e}const au=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Rr(async()=>{const{default:i}=await Promise.resolve().then(()=>tr);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},kh=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Gn=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},wn=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},tn=async(r,e)=>{await r.removeItem(e)};class Ei{constructor(){this.promise=new Ei.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ei.promiseConstructor=Promise;function Ki(r){const e=r.split(".");if(e.length!==3)throw new vs("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!uh.test(e[i]))throw new vs("JWT not in base64url format");return{header:JSON.parse(ca(e[0])),payload:JSON.parse(ca(e[1])),signature:_h(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ph(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Ch(r,e){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await r(u);if(!e(u,null,h)){i(h);return}}catch(h){if(!e(u,h)){o(h);return}}})()})}function Sh(r){return("0"+r.toString(16)).substr(-2)}function Th(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let o="";for(let u=0;u<56;u++)o+=t.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,Sh).join("")}async function Rh(r){const t=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function Ih(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Rh(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wn(r,e,t=!1){const i=Th();let o=i;t&&(o+="/PASSWORD_RECOVERY"),await Gn(r,`${e}-code-verifier`,o);const u=await Ih(i);return[u,i===u?"plain":"s256"]}const Oh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jh(r){const e=r.headers.get(fs);if(!e||!e.match(Oh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Mh(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function xh(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vn(r){if(!Lh.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yi(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var Fh=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t};const bn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),$h=[502,503,504];async function ha(r){var e;if(!kh(r))throw new ps(bn(r),0);if($h.includes(r.status))throw new ps(bn(r),r.status);let t;try{t=await r.json()}catch(u){throw new iu(bn(u),u)}let i;const o=jh(r);if(o&&o.getTime()>=ru["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new aa(bn(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new nn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new aa(bn(t),r.status,t.weak_password.reasons);throw new ch(bn(t),r.status||500,i)}const Dh=(r,e,t,i)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),t))};async function ue(r,e,t,i){var o;const u=Object.assign({},i?.headers);u[fs]||(u[fs]=ru["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const h=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const f=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",v=await Uh(r,e,t+f,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(v):{data:Object.assign({},v),error:null}}async function Uh(r,e,t,i,o,u){const h=Dh(e,i,o,u);let f;try{f=await r(t,Object.assign({},h))}catch(v){throw console.error(v),new ps(bn(v),0)}if(f.ok||await ha(f),i?.noResolveJson)return f;try{return await f.json()}catch(v){await ha(v)}}function qt(r){var e;let t=null;Vh(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=bh(r.expires_in)));const i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:i},error:null}}function da(r){const e=qt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=r.weak_password),e}function sn(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Bh(r){return{data:r,error:null}}function Nh(r){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:o,verification_type:u}=r,h=Fh(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:i,redirect_to:o,verification_type:u},v=Object.assign({},h);return{data:{properties:f,user:v},error:null}}function Wh(r){return r}function Vh(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ji=["global","local","others"];var qh=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t};class zh{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=au(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Ji[0]){if(Ji.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ji.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:sn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=qh(e,["options"]),o=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Nh,redirectTo:t?.redirectTo})}catch(t){if(ne(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:sn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,o,u,h,f,v;try{const _={nextPage:null,lastPage:0,total:0},y=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Wh});if(y.error)throw y.error;const A=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,g=(v=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&v!==void 0?v:[];return g.length>0&&(g.forEach(O=>{const U=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(O.split(";")[1].split("=")[1]);_[`${D}Page`]=U}),_.total=parseInt(k)),{data:Object.assign(Object.assign({},A),_),error:null}}catch(_){if(ne(_))return{data:{users:[]},error:_};throw _}}async getUserById(e){Vn(e);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:sn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Vn(e);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:sn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Vn(e);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:sn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Vn(e.userId);try{const{data:t,error:i}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:i}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Vn(e.userId),Vn(e.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}}function fa(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Hh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qn={debug:!!(globalThis&&ou()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Gh extends uu{}async function Kh(r,e,t){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await t()}finally{qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Gh(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(qn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Hh();const Yh={url:sh,storageKey:oh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ah,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pa(r,e,t){return await t()}const zn={};class Pr{constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pr.nextInstanceID,Pr.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Yh),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new zh({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=au(o.fetch),this.lock=o.lock||pa,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:kt()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Kh:this.lock=pa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:ou()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fa(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fa(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=zn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=zn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Eh(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),kt()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(t,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),fh(u)){const v=(e=u.details)===null||e===void 0?void 0:e.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",f),await this._saveSession(h),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ne(t)?{error:t}:{error:new iu("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,o;try{const u=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:qt}),{data:h,error:f}=u;if(f||!h)return{data:{user:null,session:null},error:f};const v=h.session,_=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",v)),{data:{user:_,session:v},error:null}}catch(u){if(ne(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(e){var t,i,o;try{let u;if("email"in e){const{email:y,password:A,options:k}=e;let g=null,O=null;this.flowType==="pkce"&&([g,O]=await Wn(this.storage,this.storageKey)),u=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:y,password:A,data:(t=k?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:g,code_challenge_method:O},xform:qt})}else if("phone"in e){const{phone:y,password:A,options:k}=e;u=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:A,data:(i=k?.data)!==null&&i!==void 0?i:{},channel:(o=k?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:qt})}else throw new ii("You must provide either an email or phone number and a password");const{data:h,error:f}=u;if(f||!h)return{data:{user:null,session:null},error:f};const v=h.session,_=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",v)),{data:{user:_,session:v},error:null}}catch(u){if(ne(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(e){try{let t;if("email"in e){const{email:u,password:h,options:f}=e;t=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:da})}else if("phone"in e){const{phone:u,password:h,options:f}=e;t=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:da})}else throw new ii("You must provide either an email or phone number and a password");const{data:i,error:o}=t;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ri}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,o,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,o,u,h,f,v,_,y,A,k,g;let O,U;if("message"in e)O=e.message,U=e.signature;else{const{chain:D,wallet:K,statement:J,options:N}=e;let Y;if(kt())if(typeof K=="object")Y=K;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))Y=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=K}const ee=new URL((t=N?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in Y&&Y.signIn){const $=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),J?{statement:J}:null));let W;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")W=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)W=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)O=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),U=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${ee.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...J?["",J,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(o=(i=N?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=N?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((h=N?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((v=N?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((_=N?.signInWithSolana)===null||_===void 0)&&_.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((A=(y=N?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||A===void 0)&&A.length?["Resources",...N.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const $=await Y.signMessage(new TextEncoder().encode(O),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=$}}try{const{data:D,error:K}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:wh(U)},!((k=e.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:qt});if(K)throw K;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new ri}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:K})}catch(D){if(ne(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(e){const t=await wn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(t??"").split("/");try{const{data:u,error:h}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:qt});if(await tn(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ri}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:h})}catch(u){if(ne(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(e){try{const{options:t,provider:i,token:o,access_token:u,nonce:h}=e,f=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:qt}),{data:v,error:_}=f;return _?{data:{user:null,session:null},error:_}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new ri}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:v,error:_})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,o,u,h;try{if("email"in e){const{email:f,options:v}=e;let _=null,y=null;this.flowType==="pkce"&&([_,y]=await Wn(this.storage,this.storageKey));const{error:A}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=v?.data)!==null&&t!==void 0?t:{},create_user:(i=v?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:y},redirectTo:v?.emailRedirectTo});return{data:{user:null,session:null},error:A}}if("phone"in e){const{phone:f,options:v}=e,{data:_,error:y}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=v?.data)!==null&&o!==void 0?o:{},create_user:(u=v?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(h=v?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:_?.message_id},error:y}}throw new ii("You must provide either an email or phone number.")}catch(f){if(ne(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,i;try{let o,u;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,u=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:f}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:qt});if(f)throw f;if(!h)throw new Error("An error occurred on token verification.");const v=h.session,_=h.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),{data:{user:_,session:v},error:null}}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,i,o;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Wn(this.storage,this.storageKey)),await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Bh})}catch(u){if(ne(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new nn;const{error:o}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:u}=e,{error:h}=await ue(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in e){const{phone:i,type:o,options:u}=e,{data:h,error:f}=await ue(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new ii("You must provide either an email or phone number and a type")}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await wn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Hi:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const h=await wn(this.userStorage,this.storageKey+"-user");h?.user?e.user=h.user:e.user=Yi()}if(this.storage.isServer&&e.user){let h=this.suppressGetSessionWarning;e=new Proxy(e,{get:(v,_,y)=>(!h&&_==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(v,_,y))})}return{data:{session:e},error:null}}const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:sn}):await this._useSession(async t=>{var i,o,u;const{data:h,error:f}=t;if(f)throw f;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nn}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:sn})})}catch(t){if(ne(t))return dh(t)&&(await this._removeSession(),await tn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new nn;const h=o.session;let f=null,v=null;this.flowType==="pkce"&&e.email!=null&&([f,v]=await Wn(this.storage,this.storageKey));const{data:_,error:y}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:v}),jwt:h.access_token,xform:sn});if(y)throw y;return h.user=_.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nn;const t=Date.now()/1e3;let i=t,o=!0,u=null;const{payload:h}=Ki(e.access_token);if(h.exp&&(i=h.exp,o=i<=t),o){const{session:f,error:v}=await this._callRefreshToken(e.refresh_token);if(v)return{data:{user:null,session:null},error:v};if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:v}=await this._getUser(e.access_token);if(v)throw v;u={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(t){if(ne(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:h,error:f}=t;if(f)throw f;e=(i=h.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new nn;const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!kt())throw new si("No browser detected.");if(e.error||e.error_description||e.error_code)throw new si(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new oa("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new si("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oa("No code detected.");const{data:J,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:J.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:f,expires_at:v,token_type:_}=e;if(!u||!f||!h||!_)throw new si("No session defined in URL");const y=Math.round(Date.now()/1e3),A=parseInt(f);let k=y+A;v&&(k=parseInt(v));const g=k-y;g*1e3<=Hn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${A}s`);const O=k-A;y-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,k,y):y-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,k,y);const{data:U,error:D}=await this._getUser(u);if(D)throw D;const K={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:A,expires_at:k,refresh_token:h,token_type:_,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:K,redirectType:e.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await wn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:o,error:u}=t;if(u)return{error:u};const h=(i=o.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:f}=await this.admin.signOut(h,e);if(f&&!(hh(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await tn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ah(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,o;try{const{data:{session:u},error:h}=t;if(h)throw h;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,t={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Wn(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(u){if(ne(u))return{data:null,error:u};throw u}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:o}=await this._useSession(async u=>{var h,f,v,_,y;const{data:A,error:k}=u;if(k)throw k;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(v=e.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",g,{headers:this.headers,jwt:(y=(_=A.session)===null||_===void 0?void 0:_.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return kt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(ne(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,o;const{data:u,error:h}=t;if(h)throw h;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await Ch(async o=>(o>0&&await Ph(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qt})),(o,u)=>{const h=200*Math.pow(2,o);return u&&Gi(u)&&Date.now()+h-i<Hn})}catch(i){if(this._debug(t,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),kt()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await wn(this.storage,this.storageKey);if(o&&this.userStorage){let h=await wn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await Gn(this.userStorage,this.storageKey+"-user",h)),o.user=(e=h?.user)!==null&&e!==void 0?e:Yi()}else if(o&&!o.user&&!o.user){const h=await wn(this.storage,this.storageKey+"-user");h&&h?.user?(o.user=h.user,await tn(this.storage,this.storageKey+"-user"),await Gn(this.storage,this.storageKey,o)):o.user=Yi()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Hi;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Hi}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),Gi(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:f}=await this._getUser(o.access_token);!f&&h?.user?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ei;const{data:u,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!u.session)throw new nn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={session:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(o,"error",u),ne(u)){const h={session:null,error:u};return Gi(u)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(v){u.push(v)}});if(await Promise.all(h),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await Gn(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const u=structuredClone(o);await Gn(this.storage,this.storageKey,u)}else{const o=structuredClone(t);await Gn(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await tn(this.storage,this.storageKey),await tn(this.storage,this.storageKey+"-code-verifier"),await tn(this.storage,this.storageKey+"-user"),this.userStorage&&await tn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Hn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Hn}ms, refresh threshold is ${ds} ticks`),o<=ds&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const o=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,h]=await Wn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(f.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:o,error:u}=t;return u?{data:null,error:u}:await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,o;const{data:u,error:h}=t;if(h)return{data:null,error:h};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:v,error:_}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return _?{data:null,error:_}:(e.factorType==="totp"&&(!((o=v?.totp)===null||o===void 0)&&o.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),{data:v,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:o,error:u}=t;if(u)return{data:null,error:u};const{data:h,error:f}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:f})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:o,error:u}=t;return u?{data:null,error:u}:await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=e?.factors||[],o=i.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=i.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:i,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:o},error:u}=e;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Ki(o.access_token);let f=null;h.aal&&(f=h.aal);let v=f;((i=(t=o.user.factors)===null||t===void 0?void 0:t.filter(A=>A.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(v="aal2");const y=h.amr||[];return{data:{currentLevel:f,nextLevel:v,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(f=>f.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+lh>o)return i;const{data:u,error:h}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:g,error:O}=await this.getSession();if(O||!g.session)return{data:null,error:O};i=g.session.access_token}const{header:o,payload:u,signature:h,raw:{header:f,payload:v}}=Ki(i);t?.allowExpired||Mh(u.exp);const _=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!_){const{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:u,header:o,signature:h},error:null}}const y=xh(o.alg),A=await crypto.subtle.importKey("jwk",_,y,!0,["verify"]);if(!await crypto.subtle.verify(y,A,h,yh(`${f}.${v}`)))throw new vs("Invalid JWT signature");return{data:{claims:u,header:o,signature:h},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}}Pr.nextInstanceID=0;const Jh=Pr;class Xh extends Jh{constructor(e){super(e)}}var Qh=function(r,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function f(y){try{_(i.next(y))}catch(A){h(A)}}function v(y){try{_(i.throw(y))}catch(A){h(A)}}function _(y){y.done?u(y.value):o(y.value).then(f,v)}_((i=i.apply(r,e||[])).next())})};class Zh{constructor(e,t,i){var o,u,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=rh(e),v=new URL(f);this.realtimeUrl=new URL("realtime/v1",v),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",v),this.storageUrl=new URL("storage/v1",v),this.functionsUrl=new URL("functions/v1",v);const _=`sb-${v.hostname.split(".")[0]}-auth-token`,y={db:Yc,realtime:Xc,auth:Object.assign(Object.assign({},Jc),{storageKey:_}),global:Kc},A=ih(i??{},y);this.storageKey=(o=A.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=A.global.headers)!==null&&u!==void 0?u:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(k,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=A.auth)!==null&&h!==void 0?h:{},this.headers,A.global.fetch),this.fetch=th(t,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new mc(new URL("rest/v1",v).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),A.accessToken||this._listenForAuthEvents()}get functions(){return new sc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new zc(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Qh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:o,storageKey:u,flowType:h,lock:f,debug:v},_,y){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xh({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),_),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:o,flowType:h,lock:f,debug:v,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new jc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i?.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ed=(r,e,t)=>new Zh(r,e,t),td="https://vycjpmuyscfygstjjied.supabase.co",nd="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5Y2pwbXV5c2NmeWdzdGpqaWVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMTQxMDcsImV4cCI6MjA2Mjc5MDEwN30.3t3wUSpe8n0PHPscRQx5vu_fX9B5_d0bEOJMvwLPYAQ",lu=ed(td,nd);var rd=Tn('<button class="auth-btn svelte-c2kee">Войти через Telegram</button>'),id=Tn("<p>Для авторизации откройте приложение в Telegram</p>");function sd(r,e){yi(e,!1);let t=oi(!1);Is(()=>{Qe(t,typeof window.Telegram?.WebApp<"u")});const i=async()=>{if(!Ne(t)){alert("Эта функция доступна только в Telegram");return}try{const v=window.Telegram.WebApp.initData,{error:_}=await lu.auth.signInWithIdToken({provider:"telegram",token:v.user.id,access_token:v.hash});if(_)throw _}catch(v){console.error("Auth error:",v),alert("Ошибка авторизации")}};Va();var o=Bl(),u=Ra(o);{var h=v=>{var _=rd();Wa("click",_,i),an(v,_)},f=v=>{var _=id();an(v,_)};os(u,v=>{Ne(t)?v(h):v(f,!1)})}an(r,o),wi()}var od=Tn('<p class="warning svelte-1o1cpc6">Откройте приложение в Telegram для авторизации</p>'),ad=Tn('<p class="error svelte-1o1cpc6"> </p>'),ud=Tn('<!> <!> <button class="auth-btn svelte-1o1cpc6"> </button> <!>',1),ld=Tn('<div class="auth-container svelte-1o1cpc6"><!></div>');function cd(r,e){yi(e,!1);let t=oi(!1),i=oi(!1),o=oi("");Is(()=>{Qe(t,!!window.Telegram?.WebApp)});const u=async()=>{if(Ne(t)){Qe(i,!0),Qe(o,"");try{const A=window.Telegram.WebApp.initData,g=A||{user:{id:12345},hash:"test_hash"},{error:O}=await lu.auth.signInWithIdToken({provider:"telegram",token:g.user.id,access_token:g.hash});if(O)throw O;window.location.href="/stories"}catch(y){Qe(o,y.message),console.error("Auth error:",y)}finally{Qe(i,!1)}}};Va();var h=ld(),f=ai(h);{var v=y=>{var A=od();an(y,A)},_=y=>{var A=ud(),k=Ra(A);Zl(k,{});var g=Vi(k,2);sd(g,{});var O=Vi(g,2),U=ai(O),D=Vi(O,2);{var K=J=>{var N=ad(),Y=ai(N);Mo(()=>Do(Y,Ne(o))),an(J,N)};os(D,J=>{Ne(o)&&J(K)})}Mo(()=>{O.disabled=Ne(i),Do(U,Ne(i)?"Вход...":"Войти через Telegram")}),Wa("click",O,u),an(y,A)};os(f,y=>{Ne(t)?y(_,!1):y(v)})}an(r,h),wi()}Nl(cd,{target:document.getElementById("app")});
