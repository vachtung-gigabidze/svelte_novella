(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const Mo=!1;var As=Array.isArray,Yu=Array.prototype.indexOf,ks=Array.from,us=Object.defineProperty,Cr=Object.getOwnPropertyDescriptor,Ju=Object.getOwnPropertyDescriptors,Xu=Object.prototype,Qu=Array.prototype,ka=Object.getPrototypeOf,Lo=Object.isExtensible;function Zu(n){for(var e=0;e<n.length;e++)n[e]()}function el(){var n,e,t=new Promise((i,o)=>{n=i,e=o});return{promise:t,resolve:n,reject:e}}const mt=2,Cs=4,Ss=8,xr=16,tn=32,ir=64,Ca=128,pt=256,gi=512,Ge=1024,gt=2048,Fn=4096,Mt=8192,sr=16384,Ps=32768,Ts=65536,Fo=1<<17,tl=1<<18,Is=1<<19,Sa=1<<20,ls=1<<21,Rs=1<<22,xn=1<<23,vi=Symbol("$state"),Os=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function nl(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function rl(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function il(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function sl(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ol(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function al(n){throw new Error("https://svelte.dev/e/effect_orphan")}function ul(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ll(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function cl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const dl=1,fl=2,vl=16,pl=1,gl=2,Je=Symbol(),ml="http://www.w3.org/1999/xhtml";let _l=!1;function Pa(n){return n===this.v}function yl(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Ta(n){return!yl(n,this.v)}let Mr=!1,wl=!1;function bl(){Mr=!0}let Ne=null;function mi(n){Ne=n}function Pi(n,e=!1,t){Ne={p:Ne,c:null,e:null,s:n,x:null,l:Mr&&!e?{s:null,u:null,$:[]}:null}}function Ti(n){var e=Ne,t=e.e;if(t!==null){e.e=null;for(var i of t)Wa(i)}return Ne=e.p,{}}function Lr(){return!Mr||Ne!==null&&Ne.l===null}const El=new WeakMap;function Al(n){var e=ke;if(e===null)return Ae.f|=xn,n;if((e.f&Ps)===0){if((e.f&Ca)===0)throw!e.parent&&n instanceof Error&&Ia(n),n;e.b.error(n)}else js(n,e)}function js(n,e){for(;e!==null;){if((e.f&Ca)!==0)try{e.b.error(n);return}catch{}e=e.parent}throw n instanceof Error&&Ia(n),n}function Ia(n){const e=El.get(n);e&&(us(n,"message",{value:e.message}),us(n,"stack",{value:e.stack}))}let _i=[];function kl(){var n=_i;_i=[],Zu(n)}function Ra(n){_i.length===0&&queueMicrotask(kl),_i.push(n)}function Cl(){for(var n=ke.b;n!==null&&!n.has_pending_snippet();)n=n.parent;return n===null&&nl(),n}function Oa(n){var e=mt|gt,t=Ae!==null&&(Ae.f&mt)!==0?Ae:null;return ke===null||t!==null&&(t.f&pt)!==0?e|=pt:ke.f|=Is,{ctx:Ne,deps:null,effects:null,equals:Pa,f:e,fn:n,reactions:null,rv:0,v:Je,wv:0,parent:t??ke,ac:null}}function Sl(n,e){let t=ke;t===null&&il();var i=t.b,o=void 0,u=Ir(Je),c=null,f=!Ae;return Bl(()=>{try{var p=n()}catch(g){p=Promise.reject(g)}var _=()=>p;o=c?.then(_,_)??Promise.resolve(p),c=o;var y=vt,E=i.pending;f&&(i.update_pending_count(1),E||y.increment());const A=(g,P=void 0)=>{c=null,E||y.activate(),P?P!==Os&&(u.f|=xn,wi(u,P)):((u.f&xn)!==0&&(u.f^=xn),wi(u,g)),f&&(i.update_pending_count(-1),E||y.decrement()),La()};if(o.then(A,g=>A(null,g||"unknown")),y)return()=>{queueMicrotask(()=>y.neuter())}}),new Promise(p=>{function _(y){function E(){y===o?p(u):_(o)}y.then(E,E)}_(o)})}function ja(n){const e=Oa(n);return e.equals=Ta,e}function xa(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)en(e[t])}}function Pl(n){for(var e=n.parent;e!==null;){if((e.f&mt)===0)return e;e=e.parent}return null}function xs(n){var e,t=ke;yn(Pl(n));try{xa(n),e=Xa(n)}finally{yn(t)}return e}function Ma(n){var e=xs(n);if(n.equals(e)||(n.v=e,n.wv=Ya()),!or)if(nr!==null)nr.set(n,n.v);else{var t=(mn||(n.f&pt)!==0)&&n.deps!==null?Fn:Ge;Qe(n,t)}}function Tl(n,e,t){const i=Lr()?Oa:ja;if(e.length===0){t(n.map(i));return}var o=vt,u=ke,c=Il(),f=Cl();Promise.all(e.map(p=>Sl(p))).then(p=>{o?.activate(),c();try{t([...n.map(i),...p])}catch(_){(u.f&sr)===0&&js(_,u)}o?.deactivate(),La()}).catch(p=>{f.error(p)})}function Il(){var n=ke,e=Ae,t=Ne;return function(){yn(n),Vt(e),mi(t)}}function La(){yn(null),Vt(null),mi(null)}const li=new Set;let vt=null,nr=null;let Er=[],yi=null,cs=!1;class Ii{#u=new Map;#s=new Map;#o=new Set;#t=0;#l=null;#c=!1;#r=[];#a=[];#n=[];#e=[];#i=[];skipped_effects=new Set;#d(e){Er=[];var t=null;if(li.size>1){t=new Map,nr=new Map;for(const[u,c]of this.#u)t.set(u,{v:u.v,wv:u.wv}),u.v=c;for(const u of li)if(u!==this)for(const[c,f]of u.#s)t.has(c)||(t.set(c,{v:c.v,wv:c.wv}),c.v=f)}for(const u of e)this.#f(u);if(this.#r.length===0&&this.#t===0){var i=this.#n,o=this.#e;this.#n=[],this.#e=[],this.#i=[],this.#h(),Uo(i),Uo(o),this.#l?.resolve()}else{for(const u of this.#n)Qe(u,Ge);for(const u of this.#e)Qe(u,Ge);for(const u of this.#i)Qe(u,Ge)}if(t){for(const[u,{v:c,wv:f}]of t)u.wv<=f&&(u.v=c);nr=null}for(const u of this.#r)Sr(u);for(const u of this.#a)Sr(u);this.#r=[],this.#a=[]}#f(e){e.f^=Ge;for(var t=e.first;t!==null;){var i=t.f,o=(i&(tn|ir))!==0,u=o&&(i&Ge)!==0,c=u||(i&Mt)!==0||this.skipped_effects.has(t);if(!c&&t.fn!==null){if(o)t.f^=Ge;else if((i&Cs)!==0)this.#e.push(t);else if(Oi(t))if((i&Rs)!==0){var f=t.b?.pending?this.#a:this.#r;f.push(t)}else(t.f&xr)!==0&&this.#i.push(t),Sr(t);var p=t.first;if(p!==null){t=p;continue}}var _=t.parent;for(t=t.next;t===null&&_!==null;)t=_.next,_=_.parent}}capture(e,t){this.#s.has(e)||this.#s.set(e,t),this.#u.set(e,e.v)}activate(){vt=this}deactivate(){vt=null}neuter(){this.#c=!0}flush(){Er.length>0?this.flush_effects():this.#h(),vt===this&&(this.#t===0&&li.delete(this),vt=null)}flush_effects(){var e=tr;cs=!0;try{var t=0;for($o(!0);Er.length>0;)t++>1e3&&Rl(),this.#d(Er),Mn.clear()}finally{cs=!1,$o(e),yi=null}}#h(){if(!this.#c)for(const e of this.#o)e();this.#o.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#n)Qe(e,gt),_n(e);for(const e of this.#e)Qe(e,gt),_n(e);for(const e of this.#i)Qe(e,gt),_n(e);this.#n=[],this.#e=[],this.flush()}}add_callback(e){this.#o.add(e)}settled(){return(this.#l??=el()).promise}static ensure(){if(vt===null){const e=vt=new Ii;li.add(vt),queueMicrotask(()=>{vt===e&&e.flush()})}return vt}}function Rl(){try{ul()}catch(n){if(yi!==null)js(n,yi);else throw n}}function Uo(n){var e=n.length;if(e!==0){for(var t=0;t<e;t++){var i=n[t];if((i.f&(sr|Mt))===0&&Oi(i)){var o=Ei;if(Sr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Ha(i):i.fn=null),Ei>o&&(i.f&Sa)!==0)break}}for(;t<e;t+=1)_n(n[t])}}function _n(n){for(var e=yi=n;e.parent!==null;){e=e.parent;var t=e.f;if(cs&&e===ke&&(t&xr)!==0)return;if((t&(ir|tn))!==0){if((t&Ge)===0)return;e.f^=Ge}}Er.push(e)}const Mn=new Map;function Ir(n,e){var t={f:0,v:n,reactions:null,equals:Pa,rv:0,wv:0};return t}function tt(n,e){const t=Ir(n);return ql(t),t}function Ol(n,e=!1,t=!0){const i=Ir(n);return e||(i.equals=Ta),Mr&&t&&Ne!==null&&Ne.l!==null&&(Ne.l.s??=[]).push(i),i}function ye(n,e,t=!1){Ae!==null&&(!Wt||(Ae.f&Fo)!==0)&&Lr()&&(Ae.f&(mt|xr|Rs|Fo))!==0&&!Zt?.includes(n)&&hl();let i=t?jn(e):e;return wi(n,i)}function wi(n,e){if(!n.equals(e)){var t=n.v;or?Mn.set(n,e):Mn.set(n,t),n.v=e,Ii.ensure().capture(n,t),(n.f&mt)!==0&&((n.f&gt)!==0&&xs(n),Qe(n,(n.f&pt)===0?Ge:Fn)),n.wv=Ya(),Ua(n,gt),Lr()&&ke!==null&&(ke.f&Ge)!==0&&(ke.f&(tn|ir))===0&&(kt===null?zl([n]):kt.push(n))}return e}function Fa(n,e=1){var t=ie(n),i=e===1?t++:t--;return ye(n,t),i}function Qi(n){ye(n,n.v+1)}function Ua(n,e){var t=n.reactions;if(t!==null)for(var i=Lr(),o=t.length,u=0;u<o;u++){var c=t[u],f=c.f;(f&gt)===0&&(!i&&c===ke||(Qe(c,e),(f&(Ge|pt))!==0&&((f&mt)!==0?Ua(c,Fn):_n(c))))}}function jn(n){if(typeof n!="object"||n===null||vi in n)return n;const e=ka(n);if(e!==Xu&&e!==Qu)return n;var t=new Map,i=As(n),o=tt(0),u=Ln,c=f=>{if(Ln===u)return f();var p=Ae,_=Ln;Vt(null),No(u);var y=f();return Vt(p),No(_),y};return i&&t.set("length",tt(n.length)),new Proxy(n,{defineProperty(f,p,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&ll();var y=t.get(p);return y===void 0?y=c(()=>{var E=tt(_.value);return t.set(p,E),E}):ye(y,_.value,!0),!0},deleteProperty(f,p){var _=t.get(p);if(_===void 0){if(p in f){const A=c(()=>tt(Je));t.set(p,A),Qi(o)}}else{if(i&&typeof p=="string"){var y=t.get("length"),E=Number(p);Number.isInteger(E)&&E<y.v&&ye(y,E)}ye(_,Je),Qi(o)}return!0},get(f,p,_){if(p===vi)return n;var y=t.get(p),E=p in f;if(y===void 0&&(!E||Cr(f,p)?.writable)&&(y=c(()=>{var g=jn(E?f[p]:Je),P=tt(g);return P}),t.set(p,y)),y!==void 0){var A=ie(y);return A===Je?void 0:A}return Reflect.get(f,p,_)},getOwnPropertyDescriptor(f,p){var _=Reflect.getOwnPropertyDescriptor(f,p);if(_&&"value"in _){var y=t.get(p);y&&(_.value=ie(y))}else if(_===void 0){var E=t.get(p),A=E?.v;if(E!==void 0&&A!==Je)return{enumerable:!0,configurable:!0,value:A,writable:!0}}return _},has(f,p){if(p===vi)return!0;var _=t.get(p),y=_!==void 0&&_.v!==Je||Reflect.has(f,p);if(_!==void 0||ke!==null&&(!y||Cr(f,p)?.writable)){_===void 0&&(_=c(()=>{var A=y?jn(f[p]):Je,g=tt(A);return g}),t.set(p,_));var E=ie(_);if(E===Je)return!1}return y},set(f,p,_,y){var E=t.get(p),A=p in f;if(i&&p==="length")for(var g=_;g<E.v;g+=1){var P=t.get(g+"");P!==void 0?ye(P,Je):g in f&&(P=c(()=>tt(Je)),t.set(g+"",P))}if(E===void 0)(!A||Cr(f,p)?.writable)&&(E=c(()=>tt(void 0)),ye(E,jn(_)),t.set(p,E));else{A=E.v!==Je;var x=c(()=>jn(_));ye(E,x)}var M=Reflect.getOwnPropertyDescriptor(f,p);if(M?.set&&M.set.call(y,_),!A){if(i&&typeof p=="string"){var H=t.get("length"),z=Number(p);Number.isInteger(z)&&z>=H.v&&ye(H,z+1)}Qi(o)}return!0},ownKeys(f){ie(o);var p=Reflect.ownKeys(f).filter(E=>{var A=t.get(E);return A===void 0||A.v!==Je});for(var[_,y]of t)y.v!==Je&&!(_ in f)&&p.push(_);return p},setPrototypeOf(){cl()}})}var Do,Da,$a,Ba;function jl(){if(Do===void 0){Do=window,Da=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;$a=Cr(e,"firstChild").get,Ba=Cr(e,"nextSibling").get,Lo(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Lo(t)&&(t.__t=void 0)}}function Fr(n=""){return document.createTextNode(n)}function bi(n){return $a.call(n)}function Ri(n){return Ba.call(n)}function De(n,e){return bi(n)}function Zi(n,e){{var t=bi(n);return t instanceof Comment&&t.data===""?Ri(t):t}}function nt(n,e=1,t=!1){let i=n;for(;e--;)i=Ri(i);return i}function xl(n){n.textContent=""}function Na(){return!1}function Ml(n){ke===null&&Ae===null&&al(),Ae!==null&&(Ae.f&pt)!==0&&ke===null&&ol(),or&&sl()}function Ll(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function nn(n,e,t,i=!0){var o=ke;o!==null&&(o.f&Mt)!==0&&(n|=Mt);var u={ctx:Ne,deps:null,nodes_start:null,nodes_end:null,f:n|gt,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Sr(u),u.f|=Ps}catch(p){throw en(u),p}else e!==null&&_n(u);var c=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&Is)===0;if(!c&&i&&(o!==null&&Ll(u,o),Ae!==null&&(Ae.f&mt)!==0)){var f=Ae;(f.effects??=[]).push(u)}return u}function Fl(n){const e=nn(Ss,null,!1);return Qe(e,Ge),e.teardown=n,e}function Ul(n){Ml();var e=ke.f,t=!Ae&&(e&tn)!==0&&(e&Ps)===0;if(t){var i=Ne;(i.e??=[]).push(n)}else return Wa(n)}function Wa(n){return nn(Cs|Sa,n,!1)}function Dl(n){Ii.ensure();const e=nn(ir,n,!0);return(t={})=>new Promise(i=>{t.outro?Ms(e,()=>{en(e),i(void 0)}):(en(e),i(void 0))})}function $l(n){return nn(Cs,n,!1)}function Bl(n){return nn(Rs|Is,n,!0)}function Nl(n,e=0){return nn(Ss|e,n,!0)}function vn(n,e=[],t=[]){Tl(e,t,i=>{nn(Ss,()=>n(...i.map(ie)),!0)})}function Va(n,e=0){var t=nn(xr|e,n,!0);return t}function Rr(n,e=!0){return nn(tn,n,!0,e)}function qa(n){var e=n.teardown;if(e!==null){const t=or,i=Ae;Bo(!0),Vt(null);try{e.call(null)}finally{Bo(t),Vt(i)}}}function za(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){t.ac?.abort(Os);var i=t.next;(t.f&ir)!==0?t.parent=null:en(t,e),t=i}}function Wl(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&tn)===0&&en(e),e=t}}function en(n,e=!0){var t=!1;(e||(n.f&tl)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(Vl(n.nodes_start,n.nodes_end),t=!0),za(n,e&&!t),Ai(n,0),Qe(n,sr);var i=n.transitions;if(i!==null)for(const u of i)u.stop();qa(n);var o=n.parent;o!==null&&o.first!==null&&Ha(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function Vl(n,e){for(;n!==null;){var t=n===e?null:Ri(n);n.remove(),n=t}}function Ha(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function Ms(n,e){var t=[];Ls(n,t,!0),Ga(t,()=>{en(n),e&&e()})}function Ga(n,e){var t=n.length;if(t>0){var i=()=>--t||e();for(var o of n)o.out(i)}else e()}function Ls(n,e,t){if((n.f&Mt)===0){if(n.f^=Mt,n.transitions!==null)for(const c of n.transitions)(c.is_global||t)&&e.push(c);for(var i=n.first;i!==null;){var o=i.next,u=(i.f&Ts)!==0||(i.f&tn)!==0;Ls(i,e,u?t:!1),i=o}}}function Fs(n){Ka(n,!0)}function Ka(n,e){if((n.f&Mt)!==0){n.f^=Mt,(n.f&Ge)===0&&(Qe(n,gt),_n(n));for(var t=n.first;t!==null;){var i=t.next,o=(t.f&Ts)!==0||(t.f&tn)!==0;Ka(t,o?e:!1),t=i}if(n.transitions!==null)for(const u of n.transitions)(u.is_global||e)&&u.in()}}let tr=!1;function $o(n){tr=n}let or=!1;function Bo(n){or=n}let Ae=null,Wt=!1;function Vt(n){Ae=n}let ke=null;function yn(n){ke=n}let Zt=null;function ql(n){Ae!==null&&(Zt===null?Zt=[n]:Zt.push(n))}let rt=null,ft=0,kt=null;function zl(n){kt=n}let Ei=1,Or=0,Ln=Or;function No(n){Ln=n}let mn=!1;function Ya(){return++Ei}function Oi(n){var e=n.f;if((e&gt)!==0)return!0;if((e&Fn)!==0){var t=n.deps,i=(e&pt)!==0;if(t!==null){var o,u,c=(e&gi)!==0,f=i&&ke!==null&&!mn,p=t.length;if((c||f)&&(ke===null||(ke.f&sr)===0)){var _=n,y=_.parent;for(o=0;o<p;o++)u=t[o],(c||!u?.reactions?.includes(_))&&(u.reactions??=[]).push(_);c&&(_.f^=gi),f&&y!==null&&(y.f&pt)===0&&(_.f^=pt)}for(o=0;o<p;o++)if(u=t[o],Oi(u)&&Ma(u),u.wv>n.wv)return!0}(!i||ke!==null&&!mn)&&Qe(n,Ge)}return!1}function Ja(n,e,t=!0){var i=n.reactions;if(i!==null&&!Zt?.includes(n))for(var o=0;o<i.length;o++){var u=i[o];(u.f&mt)!==0?Ja(u,e,!1):e===u&&(t?Qe(u,gt):(u.f&Ge)!==0&&Qe(u,Fn),_n(u))}}function Xa(n){var e=rt,t=ft,i=kt,o=Ae,u=mn,c=Zt,f=Ne,p=Wt,_=Ln,y=n.f;rt=null,ft=0,kt=null,mn=(y&pt)!==0&&(Wt||!tr||Ae===null),Ae=(y&(tn|ir))===0?n:null,Zt=null,mi(n.ctx),Wt=!1,Ln=++Or,n.ac!==null&&(n.ac.abort(Os),n.ac=null);try{n.f|=ls;var E=(0,n.fn)(),A=n.deps;if(rt!==null){var g;if(Ai(n,ft),A!==null&&ft>0)for(A.length=ft+rt.length,g=0;g<rt.length;g++)A[ft+g]=rt[g];else n.deps=A=rt;if(!mn||(y&mt)!==0&&n.reactions!==null)for(g=ft;g<A.length;g++)(A[g].reactions??=[]).push(n)}else A!==null&&ft<A.length&&(Ai(n,ft),A.length=ft);if(Lr()&&kt!==null&&!Wt&&A!==null&&(n.f&(mt|Fn|gt))===0)for(g=0;g<kt.length;g++)Ja(kt[g],n);return o!==null&&o!==n&&(Or++,kt!==null&&(i===null?i=kt:i.push(...kt))),(n.f&xn)!==0&&(n.f^=xn),E}catch(P){return Al(P)}finally{n.f^=ls,rt=e,ft=t,kt=i,Ae=o,mn=u,Zt=c,mi(f),Wt=p,Ln=_}}function Hl(n,e){let t=e.reactions;if(t!==null){var i=Yu.call(t,n);if(i!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[i]=t[o],t.pop())}}t===null&&(e.f&mt)!==0&&(rt===null||!rt.includes(e))&&(Qe(e,Fn),(e.f&(pt|gi))===0&&(e.f^=gi),xa(e),Ai(e,0))}function Ai(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)Hl(n,t[i])}function Sr(n){var e=n.f;if((e&sr)===0){Qe(n,Ge);var t=ke,i=tr;ke=n,tr=!0;try{(e&xr)!==0?Wl(n):za(n),qa(n);var o=Xa(n);n.teardown=typeof o=="function"?o:null,n.wv=Ei;var u;Mo&&wl&&(n.f&gt)!==0&&n.deps}finally{tr=i,ke=t}}}function ie(n){var e=n.f,t=(e&mt)!==0;if(Ae!==null&&!Wt){var i=ke!==null&&(ke.f&sr)!==0;if(!i&&!Zt?.includes(n)){var o=Ae.deps;if((Ae.f&ls)!==0)n.rv<Or&&(n.rv=Or,rt===null&&o!==null&&o[ft]===n?ft++:rt===null?rt=[n]:(!mn||!rt.includes(n))&&rt.push(n));else{(Ae.deps??=[]).push(n);var u=n.reactions;u===null?n.reactions=[Ae]:u.includes(Ae)||u.push(Ae)}}}else if(t&&n.deps===null&&n.effects===null){var c=n,f=c.parent;f!==null&&(f.f&pt)===0&&(c.f^=pt)}if(or){if(Mn.has(n))return Mn.get(n);if(t){c=n;var p=c.v;return((c.f&Ge)!==0||Qa(c))&&(p=xs(c)),Mn.set(c,p),p}}else if(t){if(c=n,nr?.has(c))return nr.get(c);Oi(c)&&Ma(c)}if((n.f&xn)!==0)throw n.v;return n.v}function Qa(n){if(n.v===Je)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Mn.has(e)||(e.f&mt)!==0&&Qa(e))return!0;return!1}function Za(n){var e=Wt;try{return Wt=!0,n()}finally{Wt=e}}const Gl=-7169;function Qe(n,e){n.f=n.f&Gl|e}const Kl=["touchstart","touchmove"];function Yl(n){return Kl.includes(n)}function Jl(n){var e=Ae,t=ke;Vt(null),yn(null);try{return n()}finally{Vt(e),yn(t)}}const eu=new Set,hs=new Set;function Xl(n,e,t,i={}){function o(u){if(i.capture||Ar.call(e,u),!u.cancelBubble)return Jl(()=>t?.call(this,u))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Ra(()=>{e.addEventListener(n,o,i)}):e.addEventListener(n,o,i),o}function Wo(n,e,t,i,o){var u={capture:i,passive:o},c=Xl(n,e,t,u);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Fl(()=>{e.removeEventListener(n,c,u)})}function ji(n){for(var e=0;e<n.length;e++)eu.add(n[e]);for(var t of hs)t(n)}function Ar(n){var e=this,t=e.ownerDocument,i=n.type,o=n.composedPath?.()||[],u=o[0]||n.target,c=0,f=n.__root;if(f){var p=o.indexOf(f);if(p!==-1&&(e===document||e===window)){n.__root=e;return}var _=o.indexOf(e);if(_===-1)return;p<=_&&(c=p)}if(u=o[c]||n.target,u!==e){us(n,"currentTarget",{configurable:!0,get(){return u||t}});var y=Ae,E=ke;Vt(null),yn(null);try{for(var A,g=[];u!==null;){var P=u.assignedSlot||u.parentNode||u.host||null;try{var x=u["__"+i];if(x!=null&&(!u.disabled||n.target===u))if(As(x)){var[M,...H]=x;M.apply(u,[n,...H])}else x.call(u,n)}catch(z){A?g.push(z):A=z}if(n.cancelBubble||P===e||P===null)break;u=P}if(A){for(let z of g)queueMicrotask(()=>{throw z});throw A}}finally{n.__root=e,delete n.currentTarget,Vt(y),yn(E)}}}function Ql(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function ds(n,e){var t=ke;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function it(n,e){var t=(e&pl)!==0,i=(e&gl)!==0,o,u=!n.startsWith("<!>");return()=>{o===void 0&&(o=Ql(u?n:"<!>"+n),t||(o=bi(o)));var c=i||Da?document.importNode(o,!0):o.cloneNode(!0);if(t){var f=bi(c),p=c.lastChild;ds(f,p)}else ds(c,c);return c}}function Vo(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Fr();return n.append(e,t),ds(e,t),n}function Xe(n,e){n!==null&&n.before(e)}function pn(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t+"")}function Zl(n,e){return ec(n,e)}const Wn=new Map;function ec(n,{target:e,anchor:t,props:i={},events:o,context:u,intro:c=!0}){jl();var f=new Set,p=E=>{for(var A=0;A<E.length;A++){var g=E[A];if(!f.has(g)){f.add(g);var P=Yl(g);e.addEventListener(g,Ar,{passive:P});var x=Wn.get(g);x===void 0?(document.addEventListener(g,Ar,{passive:P}),Wn.set(g,1)):Wn.set(g,x+1)}}};p(ks(eu)),hs.add(p);var _=void 0,y=Dl(()=>{var E=t??e.appendChild(Fr());return Rr(()=>{if(u){Pi({});var A=Ne;A.c=u}o&&(i.$$events=o),_=n(E,i)||{},u&&Ti()}),()=>{for(var A of f){e.removeEventListener(A,Ar);var g=Wn.get(A);--g===0?(document.removeEventListener(A,Ar),Wn.delete(A)):Wn.set(A,g)}hs.delete(p),E!==t&&E.parentNode?.removeChild(E)}});return tc.set(_,y),_}let tc=new WeakMap;function Nt(n,e,t=!1){var i=n,o=null,u=null,c=Je,f=t?Ts:0,p=!1;const _=(g,P=!0)=>{p=!0,A(P,g)};var y=null;function E(){y!==null&&(y.lastChild.remove(),i.before(y),y=null);var g=c?o:u,P=c?u:o;g&&Fs(g),P&&Ms(P,()=>{c?u=null:o=null})}const A=(g,P)=>{if(c!==(c=g)){var x=Na(),M=i;if(x&&(y=document.createDocumentFragment(),y.append(M=Fr())),c?o??=P&&Rr(()=>P(M)):u??=P&&Rr(()=>P(M)),x){var H=vt,z=c?o:u,L=c?u:o;z&&H.skipped_effects.delete(z),L&&H.skipped_effects.add(L),H.add_callback(E)}else E()}};Va(()=>{p=!1,e(_),p||A(null,null)},f)}function nc(n,e){return e}function rc(n,e,t){for(var i=n.items,o=[],u=e.length,c=0;c<u;c++)Ls(e[c].e,o,!0);var f=u>0&&o.length===0&&t!==null;if(f){var p=t.parentNode;xl(p),p.append(t),i.clear(),Bt(n,e[0].prev,e[u-1].next)}Ga(o,()=>{for(var _=0;_<u;_++){var y=e[_];f||(i.delete(y.k),Bt(n,y.prev,y.next)),en(y.e,!f)}})}function tu(n,e,t,i,o,u=null){var c=n,f={flags:e,items:new Map,first:null};{var p=n;c=p.appendChild(Fr())}var _=null,y=!1,E=new Map,A=ja(()=>{var M=t();return As(M)?M:M==null?[]:ks(M)}),g,P;function x(){ic(P,g,f,E,c,o,e,i,t),u!==null&&(g.length===0?_?Fs(_):_=Rr(()=>u(c)):_!==null&&Ms(_,()=>{_=null}))}Va(()=>{P??=ke,g=ie(A);var M=g.length;if(!(y&&M===0)){y=M===0;var H,z,L,W;if(Na()){var ee=new Set,j=vt;for(z=0;z<M;z+=1){L=g[z],W=i(L,z);var F=f.items.get(W)??E.get(W);F?nu(F,L,z):(H=ru(null,f,null,null,L,W,z,o,e,t,!0),E.set(W,H)),ee.add(W)}for(const[X,Q]of f.items)ee.has(X)||j.skipped_effects.add(Q.e);j.add_callback(x)}else x();ie(A)}})}function ic(n,e,t,i,o,u,c,f,p){var _=e.length,y=t.items,E=t.first,A=E,g,P=null,x=[],M=[],H,z,L,W;for(W=0;W<_;W+=1){if(H=e[W],z=f(H,W),L=y.get(z),L===void 0){var ee=i.get(z);if(ee!==void 0){i.delete(z),y.set(z,ee);var j=P?P.next:A;Bt(t,P,ee),Bt(t,ee,j),es(ee,j,o),P=ee}else{var F=A?A.e.nodes_start:o;P=ru(F,t,P,P===null?t.first:P.next,H,z,W,u,c,p)}y.set(z,P),x=[],M=[],A=P.next;continue}if(nu(L,H,W),(L.e.f&Mt)!==0&&Fs(L.e),L!==A){if(g!==void 0&&g.has(L)){if(x.length<M.length){var X=M[0],Q;P=X.prev;var ae=x[0],q=x[x.length-1];for(Q=0;Q<x.length;Q+=1)es(x[Q],X,o);for(Q=0;Q<M.length;Q+=1)g.delete(M[Q]);Bt(t,ae.prev,q.next),Bt(t,P,ae),Bt(t,q,X),A=X,P=q,W-=1,x=[],M=[]}else g.delete(L),es(L,A,o),Bt(t,L.prev,L.next),Bt(t,L,P===null?t.first:P.next),Bt(t,P,L),P=L;continue}for(x=[],M=[];A!==null&&A.k!==z;)(A.e.f&Mt)===0&&(g??=new Set).add(A),M.push(A),A=A.next;if(A===null)continue;L=A}x.push(L),P=L,A=L.next}if(A!==null||g!==void 0){for(var ne=g===void 0?[]:ks(g);A!==null;)(A.e.f&Mt)===0&&ne.push(A),A=A.next;var Ie=ne.length;if(Ie>0){var xe=_===0?o:null;rc(t,ne,xe)}}n.first=t.first&&t.first.e,n.last=P&&P.e;for(var Ue of i.values())en(Ue.e);i.clear()}function nu(n,e,t,i){wi(n.v,e),n.i=t}function ru(n,e,t,i,o,u,c,f,p,_,y){var E=(p&dl)!==0,A=(p&vl)===0,g=E?A?Ol(o,!1,!1):Ir(o):o,P=(p&fl)===0?c:Ir(c),x={i:P,v:g,k:u,a:null,e:null,prev:t,next:i};try{if(n===null){var M=document.createDocumentFragment();M.append(n=Fr())}return x.e=Rr(()=>f(n,g,P,_),_l),x.e.prev=t&&t.e,x.e.next=i&&i.e,t===null?y||(e.first=x):(t.next=x,t.e.next=x.e),i!==null&&(i.prev=x,i.e.prev=x.e),x}finally{}}function es(n,e,t){for(var i=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,u=n.e.nodes_start;u!==null&&u!==i;){var c=Ri(u);o.before(u),u=c}}function Bt(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const qo=[...` 	
\r\fÂ \v\uFEFF`];function sc(n,e,t){var i=n==null?"":""+n;if(e&&(i=i?i+" "+e:e),t){for(var o in t)if(t[o])i=i?i+" "+o:o;else if(i.length)for(var u=o.length,c=0;(c=i.indexOf(o,c))>=0;){var f=c+u;(c===0||qo.includes(i[c-1]))&&(f===i.length||qo.includes(i[f]))?i=(c===0?"":i.substring(0,c))+i.substring(f+1):c=f}}return i===""?null:i}function fs(n,e,t,i,o,u){var c=n.__className;if(c!==t||c===void 0){var f=sc(t,i,u);f==null?n.removeAttribute("class"):n.className=f,n.__className=t}else if(u&&o!==u)for(var p in u){var _=!!u[p];(o==null||_!==!!o[p])&&n.classList.toggle(p,_)}return u}const oc=Symbol("is custom element"),ac=Symbol("is html");function zo(n,e,t,i){var o=uc(n);o[e]!==(o[e]=t)&&(t==null?n.removeAttribute(e):typeof t!="string"&&lc(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function uc(n){return n.__attributes??={[oc]:n.nodeName.includes("-"),[ac]:n.namespaceURI===ml}}var Ho=new Map;function lc(n){var e=Ho.get(n.nodeName);if(e)return e;Ho.set(n.nodeName,e=[]);for(var t,i=n,o=Element.prototype;o!==i;){t=Ju(i);for(var u in t)t[u].set&&e.push(u);i=ka(i)}return e}function Go(n,e){return n===e||n?.[vi]===e}function cc(n={},e,t,i){return $l(()=>{var o,u;return Nl(()=>{o=u,u=[],Za(()=>{n!==t(...u)&&(e(n,...u),o&&Go(t(...o),n)&&e(null,...o))})}),()=>{Ra(()=>{u&&Go(t(...u),n)&&e(null,...u)})}}),n}function ki(n){Ne===null&&rl(),Mr&&Ne.l!==null?hc(Ne).m.push(n):Ul(()=>{const e=Za(n);if(typeof e=="function")return e})}function hc(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const dc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(dc);bl();const fc="modulepreload",vc=function(n,e){return new URL(n,e).href},Ko={},Ur=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let _=function(y){return Promise.all(y.map(E=>Promise.resolve(E).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};const c=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");o=_(t.map(y=>{if(y=vc(y,i),y in Ko)return;Ko[y]=!0;const E=y.endsWith(".css"),A=E?'[rel="stylesheet"]':"";if(!!i)for(let x=c.length-1;x>=0;x--){const M=c[x];if(M.href===y&&(!E||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${A}`))return;const P=document.createElement("link");if(P.rel=E?"stylesheet":fc,E||(P.as="script"),P.crossOrigin="",P.href=y,p&&P.setAttribute("nonce",p),document.head.appendChild(P),E)return new Promise((x,M)=>{P.addEventListener("load",x),P.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&u(f.reason);return e().catch(u)})},pc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>ar);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class Us extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class gc extends Us{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yo extends Us{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Jo extends Us{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vs;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(vs||(vs={}));var mc=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};class _c{constructor(e,{headers:t={},customFetch:i,region:o=vs.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=pc(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return mc(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:c}=t;let f={},{region:p}=t;p||(p=this.region);const _=new URL(`${this.url}/${e}`);p&&p!=="any"&&(f["x-region"]=p,_.searchParams.set("forceFunctionRegion",p));let y;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)));const E=yield this.fetch(_.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y}).catch(x=>{throw new gc(x)}),A=E.headers.get("x-relay-error");if(A&&A==="true")throw new Yo(E);if(!E.ok)throw new Jo(E);let g=((i=E.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),P;return g==="application/json"?P=yield E.json():g==="application/octet-stream"?P=yield E.blob():g==="text/event-stream"?P=E:g==="multipart/form-data"?P=yield E.formData():P=yield E.text(),{data:P,error:null,response:E}}catch(o){return{data:null,error:o,response:o instanceof Jo||o instanceof Yo?o.context:void 0}}})}}function yc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function wc(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),t}var ze={},Vn={},qn={},zn={},Hn={},Gn={},bc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rr=bc();const Ec=rr.fetch,iu=rr.fetch.bind(rr),su=rr.Headers,Ac=rr.Request,kc=rr.Response,ar=Object.freeze(Object.defineProperty({__proto__:null,Headers:su,Request:Ac,Response:kc,default:iu,fetch:Ec},Symbol.toStringTag,{value:"Module"})),Cc=wc(ar);var ci={},Xo;function ou(){if(Xo)return ci;Xo=1,Object.defineProperty(ci,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return ci.default=n,ci}var Qo;function au(){if(Qo)return Gn;Qo=1;var n=Gn&&Gn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Gn,"__esModule",{value:!0});const e=n(Cc),t=n(ou());class i{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,c){return this.headers=Object.assign({},this.headers),this.headers[u]=c,this}then(u,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async _=>{var y,E,A;let g=null,P=null,x=null,M=_.status,H=_.statusText;if(_.ok){if(this.method!=="HEAD"){const ee=await _.text();ee===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?P=ee:P=JSON.parse(ee))}const L=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),W=(E=_.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");L&&W&&W.length>1&&(x=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(g={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,x=null,M=406,H="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const L=await _.text();try{g=JSON.parse(L),Array.isArray(g)&&_.status===404&&(P=[],g=null,M=200,H="OK")}catch{_.status===404&&L===""?(M=204,H="No Content"):g={message:L}}if(g&&this.isMaybeSingle&&(!((A=g?.details)===null||A===void 0)&&A.includes("0 rows"))&&(g=null,M=200,H="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:P,count:x,status:M,statusText:H}});return this.shouldThrowOnError||(p=p.catch(_=>{var y,E,A;return{error:{message:`${(y=_?.name)!==null&&y!==void 0?y:"FetchError"}: ${_?.message}`,details:`${(E=_?.stack)!==null&&E!==void 0?E:""}`,hint:"",code:`${(A=_?.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,c)}returns(){return this}overrideTypes(){return this}}return Gn.default=i,Gn}var Zo;function uu(){if(Zo)return Hn;Zo=1;var n=Hn&&Hn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Hn,"__esModule",{value:!0});const e=n(au());class t extends e.default{select(o){let u=!1;const c=(o??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:u=!0,nullsFirst:c,foreignTable:f,referencedTable:p=f}={}){const _=p?`${p}.order`:"order",y=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:c=u}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,u,{foreignTable:c,referencedTable:f=c}={}){const p=typeof f>"u"?"offset":`${f}.offset`,_=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(_,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:u=!1,settings:c=!1,buffers:f=!1,wal:p=!1,format:_="text"}={}){var y;const E=[o?"analyze":null,u?"verbose":null,c?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),A=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${_}; for="${A}"; options=${E};`,_==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Hn.default=t,Hn}var ea;function Ds(){if(ea)return zn;ea=1;var n=zn&&zn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zn,"__esModule",{value:!0});const e=n(uu());class t extends e.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const c=Array.from(new Set(u)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:c,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const _=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${p}fts${_}.${u}`),this}match(o){return Object.entries(o).forEach(([u,c])=>{this.url.searchParams.append(u,`eq.${c}`)}),this}not(o,u,c){return this.url.searchParams.append(o,`not.${u}.${c}`),this}or(o,{foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,u,c){return this.url.searchParams.append(o,`${u}.${c}`),this}}return zn.default=t,zn}var ta;function lu(){if(ta)return qn;ta=1;var n=qn&&qn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qn,"__esModule",{value:!0});const e=n(Ds());class t{constructor(o,{headers:u={},schema:c,fetch:f}){this.url=o,this.headers=u,this.schema=c,this.fetch=f}select(o,{head:u=!1,count:c}={}){const f=u?"HEAD":"GET";let p=!1;const _=(o??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",_),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:u,defaultToNull:c=!0}={}){const f="POST",p=[];if(this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),c||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(o)){const _=o.reduce((y,E)=>y.concat(Object.keys(E)),[]);if(_.length>0){const y=[...new Set(_)].map(E=>`"${E}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:u,ignoreDuplicates:c=!1,count:f,defaultToNull:p=!0}={}){const _="POST",y=[`resolution=${c?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&y.push(this.headers.Prefer),f&&y.push(`count=${f}`),p||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const E=o.reduce((A,g)=>A.concat(Object.keys(g)),[]);if(E.length>0){const A=[...new Set(E)].map(g=>`"${g}"`);this.url.searchParams.set("columns",A.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:u}={}){const c="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),u&&f.push(`count=${u}`),this.headers.Prefer=f.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const u="DELETE",c=[];return o&&c.push(`count=${o}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return qn.default=t,qn}var wr={},br={},na;function Sc(){return na||(na=1,Object.defineProperty(br,"__esModule",{value:!0}),br.version=void 0,br.version="0.0.0-automated"),br}var ra;function Pc(){if(ra)return wr;ra=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.DEFAULT_HEADERS=void 0;const n=Sc();return wr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},wr}var ia;function Tc(){if(ia)return Vn;ia=1;var n=Vn&&Vn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Vn,"__esModule",{value:!0});const e=n(lu()),t=n(Ds()),i=Pc();class o{constructor(c,{headers:f={},schema:p,fetch:_}={}){this.url=c,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),f),this.schemaName=p,this.fetch=_}from(c){const f=new URL(`${this.url}/${c}`);return new e.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new o(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,f={},{head:p=!1,get:_=!1,count:y}={}){let E;const A=new URL(`${this.url}/rpc/${c}`);let g;p||_?(E=p?"HEAD":"GET",Object.entries(f).filter(([x,M])=>M!==void 0).map(([x,M])=>[x,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([x,M])=>{A.searchParams.append(x,M)})):(E="POST",g=f);const P=Object.assign({},this.headers);return y&&(P.Prefer=`count=${y}`),new t.default({method:E,url:A,headers:P,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return Vn.default=o,Vn}var sa;function Ic(){if(sa)return ze;sa=1;var n=ze&&ze.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ze,"__esModule",{value:!0}),ze.PostgrestError=ze.PostgrestBuilder=ze.PostgrestTransformBuilder=ze.PostgrestFilterBuilder=ze.PostgrestQueryBuilder=ze.PostgrestClient=void 0;const e=n(Tc());ze.PostgrestClient=e.default;const t=n(lu());ze.PostgrestQueryBuilder=t.default;const i=n(Ds());ze.PostgrestFilterBuilder=i.default;const o=n(uu());ze.PostgrestTransformBuilder=o.default;const u=n(au());ze.PostgrestBuilder=u.default;const c=n(ou());return ze.PostgrestError=c.default,ze.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:c.default},ze}var Rc=Ic();const Oc=yc(Rc),{PostgrestClient:jc,PostgrestQueryBuilder:qd,PostgrestFilterBuilder:zd,PostgrestTransformBuilder:Hd,PostgrestBuilder:Gd,PostgrestError:Kd}=Oc;function xc(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Mc=xc(),Lc="2.11.15",Fc=`realtime-js/${Lc}`,Uc="1.0.0",cu=1e4,Dc=1e3;var Pr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pr||(Pr={}));var et;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(et||(et={}));var xt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(xt||(xt={}));var ps;(function(n){n.websocket="websocket"})(ps||(ps={}));var On;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(On||(On={}));class $c{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const o=t.getUint8(1),u=t.getUint8(2);let c=this.HEADER_LENGTH+2;const f=i.decode(e.slice(c,c+o));c=c+o;const p=i.decode(e.slice(c,c+u));c=c+u;const _=JSON.parse(i.decode(e.slice(c,e.byteLength)));return{ref:null,topic:f,event:p,payload:_}}}class hu{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Oe||(Oe={}));const oa=(n,e,t={})=>{var i;const o=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((u,c)=>(u[c]=Bc(c,n,e,o),u),{})},Bc=(n,e,t,i)=>{const o=e.find(f=>f.name===n),u=o?.type,c=t[n];return u&&!i.includes(u)?du(u,c):gs(c)},du=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return qc(e,t)}switch(n){case Oe.bool:return Nc(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Wc(e);case Oe.json:case Oe.jsonb:return Vc(e);case Oe.timestamp:return zc(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return gs(e);default:return gs(e)}},gs=n=>n,Nc=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Wc=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Vc=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},qc=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let u;const c=n.slice(1,t);try{u=JSON.parse("["+c+"]")}catch{u=c?c.split(","):[]}return u.map(f=>du(e,f))}return n},zc=n=>typeof n=="string"?n.replace(" ","T"):n,fu=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ts{constructor(e,t,i={},o=cu){this.channel=e,this.event=t,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var aa;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(aa||(aa={}));class Tr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tr.syncState(this.state,o,u,c),this.pendingDiffs.forEach(p=>{this.state=Tr.syncDiff(this.state,p,u,c)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Tr.syncDiff(this.state,o,u,c),f())}),this.onJoin((o,u,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:c})}),this.onLeave((o,u,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,o){const u=this.cloneDeep(e),c=this.transformState(t),f={},p={};return this.map(u,(_,y)=>{c[_]||(p[_]=y)}),this.map(c,(_,y)=>{const E=u[_];if(E){const A=y.map(M=>M.presence_ref),g=E.map(M=>M.presence_ref),P=y.filter(M=>g.indexOf(M.presence_ref)<0),x=E.filter(M=>A.indexOf(M.presence_ref)<0);P.length>0&&(f[_]=P),x.length>0&&(p[_]=x)}else f[_]=y}),this.syncDiff(u,{joins:f,leaves:p},i,o)}static syncDiff(e,t,i,o){const{joins:u,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(f,p)=>{var _;const y=(_=e[f])!==null&&_!==void 0?_:[];if(e[f]=this.cloneDeep(p),y.length>0){const E=e[f].map(g=>g.presence_ref),A=y.filter(g=>E.indexOf(g.presence_ref)<0);e[f].unshift(...A)}i(f,y,p)}),this.map(c,(f,p)=>{let _=e[f];if(!_)return;const y=p.map(E=>E.presence_ref);_=_.filter(E=>y.indexOf(E.presence_ref)<0),e[f]=_,o(f,_,p),_.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const o=e[i];return"metas"in o?t[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):t[i]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ua;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ua||(ua={}));var la;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(la||(la={}));var Qt;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Qt||(Qt={}));class $s{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ts(this,xt.join,this.params,this.timeout),this.rejoinTimer=new hu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xt.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Tr(this),this.broadcastEndpointURL=fu(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:u,presence:c,private:f}}=this.params;this._onError(y=>e?.(Qt.CHANNEL_ERROR,y)),this._onClose(()=>e?.(Qt.CLOSED));const p={},_={broadcast:u,presence:c,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&o!==void 0?o:[],private:f};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:_},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var E;if(this.socket.setAuth(),y===void 0){e?.(Qt.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,g=(E=A?.length)!==null&&E!==void 0?E:0,P=[];for(let x=0;x<g;x++){const M=A[x],{filter:{event:H,schema:z,table:L,filter:W}}=M,ee=y&&y[x];if(ee&&ee.event===H&&ee.schema===z&&ee.table===L&&ee.filter===W)P.push(Object.assign(Object.assign({},M),{id:ee.id}));else{this.unsubscribe(),this.state=et.errored,e?.(Qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Qt.SUBSCRIBED);return}}).receive("error",y=>{this.state=et.errored,e?.(Qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(Qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:u,payload:c}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:c,private:this.private}]})};try{const _=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=_.body)===null||o===void 0?void 0:o.cancel()),_.ok?"ok":"error"}catch(_){return _.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var c,f,p;const _=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),_.receive("ok",()=>u("ok")),_.receive("error",()=>u("error")),_.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=et.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new ts(this,xt.leave,{},e),i.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(u),c}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ts(this,e,t,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var o,u;const c=e.toLocaleLowerCase(),{close:f,error:p,leave:_,join:y}=xt;if(i&&[f,p,_,y].indexOf(c)>=0&&i!==this._joinRef())return;let A=this._onMessage(c,t,i);if(t&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var P,x,M;return((P=g.filter)===null||P===void 0?void 0:P.event)==="*"||((M=(x=g.filter)===null||x===void 0?void 0:x.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===c}).map(g=>g.callback(A,i)):(u=this.bindings[c])===null||u===void 0||u.filter(g=>{var P,x,M,H,z,L;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in g){const W=g.id,ee=(P=g.filter)===null||P===void 0?void 0:P.event;return W&&((x=t.ids)===null||x===void 0?void 0:x.includes(W))&&(ee==="*"||ee?.toLocaleLowerCase()===((M=t.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const W=(z=(H=g?.filter)===null||H===void 0?void 0:H.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return W==="*"||W===((L=t?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===c}).map(g=>{if(typeof A=="object"&&"ids"in A){const P=A.data,{schema:x,table:M,commit_timestamp:H,type:z,errors:L}=P;A=Object.assign(Object.assign({},{schema:x,table:M,commit_timestamp:H,eventType:z,new:{},old:{},errors:L}),this._getPayloadRecords(P))}g.callback(A,i)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const o=e.toLocaleLowerCase(),u={type:o,filter:t,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&$s.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xt.close,{},e)}_onError(e){this._on(xt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=oa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=oa(e.columns,e.old_record)),t}}const ca=()=>{},Hc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gc{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cu,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ca,this.ref=0,this.logger=ca,this.conn=null,this.sendBuffer=[],this.serializer=new $c,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let c;return u?c=u:typeof fetch>"u"?c=(...f)=>Ur(async()=>{const{default:p}=await Promise.resolve().then(()=>ar);return{default:p}},void 0,import.meta.url).then(({default:p})=>p(...f)):c=fetch,(...f)=>c(...f)},this.endPoint=`${e}/${ps.websocket}`,this.httpEndpoint=fu(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(i=t?.params)===null||i===void 0?void 0:i.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=t?.encode?t.encode:(u,c)=>c(JSON.stringify(u)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new hu(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Mc),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Uc}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Pr.connecting:return On.Connecting;case Pr.open:return On.Open;case Pr.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}channel(e,t={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new $s(`realtime:${e}`,t,this);return this.channels.push(u),u}}push(e){const{topic:t,event:i,payload:o,ref:u}=e,c=()=>{this.encode(e,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${t} ${i} (${u})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const o={access_token:t,version:Fc};t&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(xt.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Dc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:o,payload:u,ref:c}=t;i==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${i} ${o} ${c&&"("+c+")"||""}`,u),Array.from(this.channels).filter(f=>f._isMember(i)).forEach(f=>f._trigger(o,u,c)),this.stateChangeCallbacks.message.forEach(f=>f(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(xt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${i}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([Hc],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}}class Bs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function He(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Kc extends Bs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ms extends Bs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Yc=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};const vu=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>ar);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},Jc=()=>Yc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ur(()=>Promise.resolve().then(()=>ar),void 0,import.meta.url)).Response:Response}),_s=n=>{if(Array.isArray(n))return n.map(t=>_s(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const o=t.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[o]=_s(i)}),e};var Un=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};const ns=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Xc=(n,e,t)=>Un(void 0,void 0,void 0,function*(){const i=yield Jc();n instanceof i&&!t?.noResolveJson?n.json().then(o=>{e(new Kc(ns(o),n.status||500))}).catch(o=>{e(new ms(ns(o),o))}):e(new ms(ns(n),n))}),Qc=(n,e,t,i)=>{const o={method:n,headers:e?.headers||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i&&(o.body=JSON.stringify(i)),Object.assign(Object.assign({},o),t))};function Dr(n,e,t,i,o,u){return Un(this,void 0,void 0,function*(){return new Promise((c,f)=>{n(t,Qc(e,i,o,u)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>Xc(p,f,i))})})}function Ci(n,e,t,i){return Un(this,void 0,void 0,function*(){return Dr(n,"GET",e,t,i)})}function fn(n,e,t,i,o){return Un(this,void 0,void 0,function*(){return Dr(n,"POST",e,i,o,t)})}function Zc(n,e,t,i,o){return Un(this,void 0,void 0,function*(){return Dr(n,"PUT",e,i,o,t)})}function eh(n,e,t,i){return Un(this,void 0,void 0,function*(){return Dr(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function pu(n,e,t,i,o){return Un(this,void 0,void 0,function*(){return Dr(n,"DELETE",e,i,o,t)})}var lt=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};const th={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ha={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nh{constructor(e,t={},i,o){this.url=e,this.headers=t,this.bucketId=i,this.fetch=vu(o)}uploadOrUpdate(e,t,i,o){return lt(this,void 0,void 0,function*(){try{let u;const c=Object.assign(Object.assign({},ha),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",c.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=i,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const _=this._removeEmptyFolders(t),y=this._getFinalPath(_),E=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:e,body:u,headers:f},c?.duplex?{duplex:c.duplex}:{})),A=yield E.json();return E.ok?{data:{path:_,id:A.Id,fullPath:A.Key},error:null}:{data:null,error:A}}catch(u){if(He(u))return{data:null,error:u};throw u}})}upload(e,t,i){return lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,o){return lt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),c=this._getFinalPath(u),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",t);try{let p;const _=Object.assign({upsert:ha.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(_.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",_.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",_.cacheControl)):(p=i,y["cache-control"]=`max-age=${_.cacheControl}`,y["content-type"]=_.contentType);const E=yield this.fetch(f.toString(),{method:"PUT",body:p,headers:y}),A=yield E.json();return E.ok?{data:{path:u,fullPath:A.Key},error:null}:{data:null,error:A}}catch(p){if(He(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,t){return lt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const u=yield fn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),c=new URL(this.url+u.url),f=c.searchParams.get("token");if(!f)throw new Bs("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(i){if(He(i))return{data:null,error:i};throw i}})}update(e,t,i){return lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return lt(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(He(o))return{data:null,error:o};throw o}})}copy(e,t,i){return lt(this,void 0,void 0,function*(){try{return{data:{path:(yield fn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(He(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,i){return lt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),u=yield fn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${c}`)},{data:u,error:null}}catch(o){if(He(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,i){return lt(this,void 0,void 0,function*(){try{const o=yield fn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${u}`):null})),error:null}}catch(o){if(He(o))return{data:null,error:o};throw o}})}download(e,t){return lt(this,void 0,void 0,function*(){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(t?.transform||{}),c=u?`?${u}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield Ci(this.fetch,`${this.url}/${o}/${f}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(He(f))return{data:null,error:f};throw f}})}info(e){return lt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield Ci(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_s(i),error:null}}catch(i){if(He(i))return{data:null,error:i};throw i}})}exists(e){return lt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield eh(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(He(i)&&i instanceof ms){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),o=[],u=t?.download?`download=${t.download===!0?"":t.download}`:"";u!==""&&o.push(u);const f=typeof t?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(t?.transform||{});p!==""&&o.push(p);let _=o.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${_}`)}}}remove(e){return lt(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}})}list(e,t,i){return lt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},th),t),{prefix:e||""});return{data:yield fn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(He(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const rh="2.7.1",ih={"X-Client-Info":`storage-js/${rh}`};var Kn=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};class sh{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},ih),t),this.fetch=vu(i)}listBuckets(){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(He(e))return{data:null,error:e};throw e}})}getBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Kn(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(He(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Kn(this,void 0,void 0,function*(){try{return{data:yield Zc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(He(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(He(t))return{data:null,error:t};throw t}})}}class oh extends sh{constructor(e,t={},i){super(e,t,i)}from(e){return new nh(this.url,this.headers,e,this.fetch)}}const ah="2.51.0";let kr="";typeof Deno<"u"?kr="deno":typeof document<"u"?kr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kr="react-native":kr="node";const uh={"X-Client-Info":`supabase-js-${kr}/${ah}`},lh={headers:uh},ch={schema:"public"},hh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dh={};var fh=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};const vh=n=>{let e;return n?e=n:typeof fetch>"u"?e=iu:e=fetch,(...t)=>e(...t)},ph=()=>typeof Headers>"u"?su:Headers,gh=(n,e,t)=>{const i=vh(t),o=ph();return(u,c)=>fh(void 0,void 0,void 0,function*(){var f;const p=(f=yield e())!==null&&f!==void 0?f:n;let _=new o(c?.headers);return _.has("apikey")||_.set("apikey",n),_.has("Authorization")||_.set("Authorization",`Bearer ${p}`),i(u,Object.assign(Object.assign({},c),{headers:_}))})};var mh=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};function _h(n){return n.endsWith("/")?n:n+"/"}function yh(n,e){var t,i;const{db:o,auth:u,realtime:c,global:f}=n,{db:p,auth:_,realtime:y,global:E}=e,A={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},_),u),realtime:Object.assign(Object.assign({},y),c),global:Object.assign(Object.assign(Object.assign({},E),f),{headers:Object.assign(Object.assign({},(t=E?.headers)!==null&&t!==void 0?t:{}),(i=f?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>mh(this,void 0,void 0,function*(){return""})};return n.accessToken?A.accessToken=n.accessToken:delete A.accessToken,A}const gu="2.71.0",Zn=30*1e3,ys=3,rs=ys*Zn,wh="http://localhost:9999",bh="supabase.auth.token",Eh={"X-Client-Info":`gotrue-js/${gu}`},ws="X-Supabase-Api-Version",mu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ah=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kh=10*60*1e3;class Ns extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function oe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Ch extends Ns{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Sh(n){return oe(n)&&n.name==="AuthApiError"}class _u extends Ns{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wn extends Ns{constructor(e,t,i,o){super(e,i,o),this.name=t,this.status=i}}class dn extends wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ph(n){return oe(n)&&n.name==="AuthSessionMissingError"}class hi extends wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class di extends wn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fi extends wn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Th(n){return oe(n)&&n.name==="AuthImplicitGrantRedirectError"}class da extends wn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bs extends wn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function is(n){return oe(n)&&n.name==="AuthRetryableFetchError"}class fa extends wn{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class Es extends wn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),va=` 	
\r=`.split(""),Ih=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<va.length;e+=1)n[va[e].charCodeAt(0)]=-2;for(let e=0;e<Si.length;e+=1)n[Si[e].charCodeAt(0)]=e;return n})();function pa(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Si[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Si[i]),e.queuedBits-=6}}function yu(n,e,t){const i=Ih[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ga(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=c=>{jh(c,i,t)};for(let c=0;c<n.length;c+=1)yu(n.charCodeAt(c),o,u);return e.join("")}function Rh(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Oh(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}Rh(i,e)}}function jh(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function xh(n){const e=[],t={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)yu(n.charCodeAt(o),t,i);return new Uint8Array(e)}function Mh(n){const e=[];return Oh(n,t=>e.push(t)),new Uint8Array(e)}function Lh(n){const e=[],t={queue:0,queuedBits:0},i=o=>{e.push(o)};return n.forEach(o=>pa(o,t,i)),pa(null,t,i),e.join("")}function Fh(n){return Math.round(Date.now()/1e3)+n}function Uh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const jt=()=>typeof window<"u"&&typeof document<"u",Tn={tested:!1,writable:!1},wu=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tn.tested)return Tn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Tn.tested=!0,Tn.writable=!0}catch{Tn.tested=!0,Tn.writable=!1}return Tn.writable};function Dh(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,u)=>{e[u]=o})}catch{}return t.searchParams.forEach((i,o)=>{e[o]=i}),e}const bu=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>ar);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},$h=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",er=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},In=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},hn=async(n,e)=>{await n.removeItem(e)};class xi{constructor(){this.promise=new xi.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}xi.promiseConstructor=Promise;function ss(n){const e=n.split(".");if(e.length!==3)throw new Es("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Ah.test(e[i]))throw new Es("JWT not in base64url format");return{header:JSON.parse(ga(e[0])),payload:JSON.parse(ga(e[1])),signature:xh(e[2]),raw:{header:e[0],payload:e[1]}}}async function Bh(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Nh(n,e){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const c=await n(u);if(!e(u,null,c)){i(c);return}}catch(c){if(!e(u,c)){o(c);return}}})()})}function Wh(n){return("0"+n.toString(16)).substr(-2)}function Vh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let o="";for(let u=0;u<56;u++)o+=t.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,Wh).join("")}async function qh(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function zh(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await qh(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yn(n,e,t=!1){const i=Vh();let o=i;t&&(o+="/PASSWORD_RECOVERY"),await er(n,`${e}-code-verifier`,o);const u=await zh(i);return[u,i===u?"plain":"s256"]}const Hh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gh(n){const e=n.headers.get(ws);if(!e||!e.match(Hh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Kh(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Yh(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jn(n){if(!Jh.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function os(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var Xh=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};const Rn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Qh=[502,503,504];async function ma(n){var e;if(!$h(n))throw new bs(Rn(n),0);if(Qh.includes(n.status))throw new bs(Rn(n),n.status);let t;try{t=await n.json()}catch(u){throw new _u(Rn(u),u)}let i;const o=Gh(n);if(o&&o.getTime()>=mu["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new fa(Rn(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new dn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((u,c)=>u&&typeof c=="string",!0))throw new fa(Rn(t),n.status,t.weak_password.reasons);throw new Ch(Rn(t),n.status||500,i)}const Zh=(n,e,t,i)=>{const o={method:n,headers:e?.headers||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),t))};async function ve(n,e,t,i){var o;const u=Object.assign({},i?.headers);u[ws]||(u[ws]=mu["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const c=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await ed(n,e,t+f,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function ed(n,e,t,i,o,u){const c=Zh(e,i,o,u);let f;try{f=await n(t,Object.assign({},c))}catch(p){throw console.error(p),new bs(Rn(p),0)}if(f.ok||await ma(f),i?.noResolveJson)return f;try{return await f.json()}catch(p){await ma(p)}}function Xt(n){var e;let t=null;id(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Fh(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function _a(n){const e=Xt(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function gn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function td(n){return{data:n,error:null}}function nd(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:o,verification_type:u}=n,c=Xh(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:i,redirect_to:o,verification_type:u},p=Object.assign({},c);return{data:{properties:f,user:p},error:null}}function rd(n){return n}function id(n){return n.access_token&&n.refresh_token&&n.expires_in}const as=["global","local","others"];var sd=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t};class od{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=bu(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=as[0]){if(as.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${as.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gn})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=sd(e,["options"]),o=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:nd,redirectTo:t?.redirectTo})}catch(t){if(oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gn})}catch(t){if(oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,o,u,c,f,p;try{const _={nextPage:null,lastPage:0,total:0},y=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:rd});if(y.error)throw y.error;const E=await y.json(),A=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,g=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return g.length>0&&(g.forEach(P=>{const x=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(P.split(";")[1].split("=")[1]);_[`${M}Page`]=x}),_.total=parseInt(A)),{data:Object.assign(Object.assign({},E),_),error:null}}catch(_){if(oe(_))return{data:{users:[]},error:_};throw _}}async getUserById(e){Jn(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gn})}catch(t){if(oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Jn(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gn})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Jn(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gn})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Jn(e.userId);try{const{data:t,error:i}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:i}}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Jn(e.userId),Jn(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}}}function ya(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function ad(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xn={debug:!!(globalThis&&wu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Eu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ud extends Eu{}async function ld(n,e,t){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ud(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ad();const cd={url:wh,storageKey:bh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Eh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wa(n,e,t){return await t()}const Qn={};class jr{constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jr.nextInstanceID,jr.nextInstanceID+=1,this.instanceID>0&&jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},cd),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new od({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=bu(o.fetch),this.lock=o.lock||wa,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:jt()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ld:this.lock=wa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:wu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ya(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ya(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Qn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Qn[this.storageKey]=Object.assign(Object.assign({},Qn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Qn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qn[this.storageKey]=Object.assign(Object.assign({},Qn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Dh(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),jt()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(t,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Th(u)){const p=(e=u.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:c,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return oe(t)?{error:t}:{error:new _u("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,o;try{const u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Xt}),{data:c,error:f}=u;if(f||!c)return{data:{user:null,session:null},error:f};const p=c.session,_=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:_,session:p},error:null}}catch(u){if(oe(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(e){var t,i,o;try{let u;if("email"in e){const{email:y,password:E,options:A}=e;let g=null,P=null;this.flowType==="pkce"&&([g,P]=await Yn(this.storage,this.storageKey)),u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A?.emailRedirectTo,body:{email:y,password:E,data:(t=A?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:A?.captchaToken},code_challenge:g,code_challenge_method:P},xform:Xt})}else if("phone"in e){const{phone:y,password:E,options:A}=e;u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:E,data:(i=A?.data)!==null&&i!==void 0?i:{},channel:(o=A?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:Xt})}else throw new di("You must provide either an email or phone number and a password");const{data:c,error:f}=u;if(f||!c)return{data:{user:null,session:null},error:f};const p=c.session,_=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:_,session:p},error:null}}catch(u){if(oe(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(e){try{let t;if("email"in e){const{email:u,password:c,options:f}=e;t=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:_a})}else if("phone"in e){const{phone:u,password:c,options:f}=e;t=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:_a})}else throw new di("You must provide either an email or phone number and a password");const{data:i,error:o}=t;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new hi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(t){if(oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,o,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,o,u,c,f,p,_,y,E,A,g;let P,x;if("message"in e)P=e.message,x=e.signature;else{const{chain:M,wallet:H,statement:z,options:L}=e;let W;if(jt())if(typeof H=="object")W=H;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))W=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=H}const ee=new URL((t=L?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in W&&W.signIn){const j=await W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),z?{statement:z}:null));let F;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")F=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)F=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)P=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),x=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in W)||typeof W.signMessage!="function"||!("publicKey"in W)||typeof W!="object"||!W.publicKey||!("toBase58"in W.publicKey)||typeof W.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${ee.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(o=(i=L?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=L?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((c=L?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((f=L?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((_=L?.signInWithSolana)===null||_===void 0)&&_.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((E=(y=L?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||E===void 0)&&E.length?["Resources",...L.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const j=await W.signMessage(new TextEncoder().encode(P),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:M,error:H}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Lh(x)},!((A=e.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Xt});if(H)throw H;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new hi}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:H})}catch(M){if(oe(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(e){const t=await In(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(t??"").split("/");try{const{data:u,error:c}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Xt});if(await hn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new hi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:c})}catch(u){if(oe(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(e){try{const{options:t,provider:i,token:o,access_token:u,nonce:c}=e,f=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Xt}),{data:p,error:_}=f;return _?{data:{user:null,session:null},error:_}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new hi}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:_})}catch(t){if(oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,o,u,c;try{if("email"in e){const{email:f,options:p}=e;let _=null,y=null;this.flowType==="pkce"&&([_,y]=await Yn(this.storage,this.storageKey));const{error:E}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=p?.data)!==null&&t!==void 0?t:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:_,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:E}}if("phone"in e){const{phone:f,options:p}=e,{data:_,error:y}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(c=p?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:_?.message_id},error:y}}throw new di("You must provide either an email or phone number.")}catch(f){if(oe(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,i;try{let o,u;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,u=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:f}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Xt});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,_=c.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:_,session:p},error:null}}catch(o){if(oe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,i,o;try{let u=null,c=null;return this.flowType==="pkce"&&([u,c]=await Yn(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:c}),headers:this.headers,xform:td})}catch(u){if(oe(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new dn;const{error:o}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:u}=e,{error:c}=await ve(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:i,type:o,options:u}=e,{data:c,error:f}=await ve(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:f}}throw new di("You must provide either an email or phone number and a type")}catch(t){if(oe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await In(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<rs:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await In(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=os()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(p,_,y)=>(!c&&_==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,_,y))})}return{data:{session:e},error:null}}const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gn}):await this._useSession(async t=>{var i,o,u;const{data:c,error:f}=t;if(f)throw f;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:gn})})}catch(t){if(oe(t))return Ph(t)&&(await this._removeSession(),await hn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new dn;const c=o.session;let f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=await Yn(this.storage,this.storageKey));const{data:_,error:y}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:c.access_token,xform:gn});if(y)throw y;return c.user=_.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dn;const t=Date.now()/1e3;let i=t,o=!0,u=null;const{payload:c}=ss(e.access_token);if(c.exp&&(i=c.exp,o=i<=t),o){const{session:f,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:p}=await this._getUser(e.access_token);if(p)throw p;u={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(t){if(oe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new dn;const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(oe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!jt())throw new fi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new da("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fi("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new da("No code detected.");const{data:z,error:L}=await this._exchangeCodeForSession(e.code);if(L)throw L;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:c,expires_in:f,expires_at:p,token_type:_}=e;if(!u||!f||!c||!_)throw new fi("No session defined in URL");const y=Math.round(Date.now()/1e3),E=parseInt(f);let A=y+E;p&&(A=parseInt(p));const g=A-y;g*1e3<=Zn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${E}s`);const P=A-E;y-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,A,y):y-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,A,y);const{data:x,error:M}=await this._getUser(u);if(M)throw M;const H={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:E,expires_at:A,refresh_token:c,token_type:_,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:H,redirectType:e.type},error:null}}catch(i){if(oe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await In(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:o,error:u}=t;if(u)return{error:u};const c=(i=o.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(Sh(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await hn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Uh(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,o;try{const{data:{session:u},error:c}=t;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,t={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Yn(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(u){if(oe(u))return{data:null,error:u};throw u}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:o}=await this._useSession(async u=>{var c,f,p,_,y;const{data:E,error:A}=u;if(A)throw A;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",g,{headers:this.headers,jwt:(y=(_=E.session)===null||_===void 0?void 0:_.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return jt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(oe(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,o;const{data:u,error:c}=t;if(c)throw c;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await Nh(async o=>(o>0&&await Bh(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xt})),(o,u)=>{const c=200*Math.pow(2,o);return u&&is(u)&&Date.now()+c-i<Zn})}catch(i){if(this._debug(t,"error",i),oe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),jt()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await In(this.storage,this.storageKey);if(o&&this.userStorage){let c=await In(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await er(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c?.user)!==null&&e!==void 0?e:os()}else if(o&&!o.user&&!o.user){const c=await In(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await hn(this.storage,this.storageKey+"-user"),await er(this.storage,this.storageKey,o)):o.user=os()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<rs;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${rs}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),is(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(o.access_token);!f&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new xi;const{data:u,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!u.session)throw new dn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={session:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(o,"error",u),oe(u)){const c={session:null,error:u};return is(u)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const u=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(p){u.push(p)}});if(await Promise.all(c),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await er(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const u=structuredClone(o);await er(this.storage,this.storageKey,u)}else{const o=structuredClone(t);await er(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await hn(this.storage,this.storageKey),await hn(this.storage,this.storageKey+"-code-verifier"),await hn(this.storage,this.storageKey+"-user"),this.userStorage&&await hn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Zn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Zn}ms, refresh threshold is ${ys} ticks`),o<=ys&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Eu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const o=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,c]=await Yn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(f.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:o,error:u}=t;return u?{data:null,error:u}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,o;const{data:u,error:c}=t;if(c)return{data:null,error:c};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:p,error:_}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return _?{data:null,error:_}:(e.factorType==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:o,error:u}=t;if(u)return{data:null,error:u};const{data:c,error:f}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:f})})}catch(t){if(oe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:o,error:u}=t;return u?{data:null,error:u}:await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(oe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=e?.factors||[],o=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),u=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:o},error:u}=e;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=ss(o.access_token);let f=null;c.aal&&(f=c.aal);let p=f;((i=(t=o.user.factors)===null||t===void 0?void 0:t.filter(E=>E.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const y=c.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(f=>f.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+kh>o)return i;const{data:u,error:c}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:g,error:P}=await this.getSession();if(P||!g.session)return{data:null,error:P};i=g.session.access_token}const{header:o,payload:u,signature:c,raw:{header:f,payload:p}}=ss(i);t?.allowExpired||Kh(u.exp);const _=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!_){const{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:u,header:o,signature:c},error:null}}const y=Yh(o.alg),E=await crypto.subtle.importKey("jwk",_,y,!0,["verify"]);if(!await crypto.subtle.verify(y,E,c,Mh(`${f}.${p}`)))throw new Es("Invalid JWT signature");return{data:{claims:u,header:o,signature:c},error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}}jr.nextInstanceID=0;const hd=jr;class dd extends hd{constructor(e){super(e)}}var fd=function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(c){c(u)})}return new(t||(t=Promise))(function(u,c){function f(y){try{_(i.next(y))}catch(E){c(E)}}function p(y){try{_(i.throw(y))}catch(E){c(E)}}function _(y){y.done?u(y.value):o(y.value).then(f,p)}_((i=i.apply(n,e||[])).next())})};class vd{constructor(e,t,i){var o,u,c;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=_h(e),p=new URL(f);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const _=`sb-${p.hostname.split(".")[0]}-auth-token`,y={db:ch,realtime:dh,auth:Object.assign(Object.assign({},hh),{storageKey:_}),global:lh},E=yh(i??{},y);this.storageKey=(o=E.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=E.global.headers)!==null&&u!==void 0?u:{},E.accessToken?(this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(A,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=E.auth)!==null&&c!==void 0?c:{},this.headers,E.global.fetch),this.fetch=gh(t,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.rest=new jc(new URL("rest/v1",p).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),E.accessToken||this._listenForAuthEvents()}get functions(){return new _c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new oh(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return fd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:o,storageKey:u,flowType:c,lock:f,debug:p},_,y){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dd({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),_),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:o,flowType:c,lock:f,debug:p,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Gc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i?.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pd=(n,e,t)=>new vd(n,e,t),gd="https://vycjpmuyscfygstjjied.supabaseClient.co",md="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5Y2pwbXV5c2NmeWdzdGpqaWVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMTQxMDcsImV4cCI6MjA2Mjc5MDEwN30.3t3wUSpe8n0PHPscRQx5vu_fX9B5_d0bEOJMvwLPYAQ";pd(gd,md,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"Content-Type":"application/json"}}});ji(["click"]);ji(["click"]);var pi={exports:{}},_d=pi.exports,ba;function yd(){return ba||(ba=1,function(n,e){(function(i,o){n.exports=o()})(_d,()=>(()=>{var t=[,(c,f,p)=>{p.r(f),p.d(f,{default:()=>y});var _=(()=>{var E=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(A={}){var g=A,P,x;g.ready=new Promise((r,s)=>{P=r,x=s});function M(){function r(k){const I=d;l=s=0,d=new Map,I.forEach(R=>{try{R(k)}catch(T){console.error(T)}}),this.pb(),m&&m.Tb()}let s=0,l=0,d=new Map,m=null,b=null;this.requestAnimationFrame=function(k){s||(s=requestAnimationFrame(r.bind(this)));const I=++l;return d.set(I,k),I},this.cancelAnimationFrame=function(k){d.delete(k),s&&d.size==0&&(cancelAnimationFrame(s),s=0)},this.Rb=function(k){b&&(document.body.remove(b),b=null),k||(b=document.createElement("div"),b.style.backgroundColor="black",b.style.position="fixed",b.style.right=0,b.style.top=0,b.style.color="white",b.style.padding="4px",b.innerHTML="RIVE FPS",k=function(I){b.innerHTML="RIVE FPS "+I.toFixed(1)},document.body.appendChild(b)),m=new function(){let I=0,R=0;this.Tb=function(){var T=performance.now();R?(++I,T-=R,1e3<T&&(k(1e3*I/T),I=R=0)):(R=T,I=0)}}},this.Ob=function(){b&&(document.body.remove(b),b=null),m=null},this.pb=function(){}}function H(r){console.assert(!0);const s=new Map;let l=-1/0;this.push=function(d){return d=d+((1<<r)-1)>>r,s.has(d)&&clearTimeout(s.get(d)),s.set(d,setTimeout(function(){s.delete(d),s.length==0?l=-1/0:d==l&&(l=Math.max(...s.keys()),console.assert(l<d))},1e3)),l=Math.max(d,l),l<<r}}const z=g.onRuntimeInitialized;g.onRuntimeInitialized=function(){z&&z();let r=g.decodeAudio;g.decodeAudio=function(m,b){m=r(m),b(m)};let s=g.decodeFont;g.decodeFont=function(m,b){m=s(m),b(m)};const l=g.FileAssetLoader;g.ptrToAsset=m=>{let b=g.ptrToFileAsset(m);return b.isImage?g.ptrToImageAsset(m):b.isFont?g.ptrToFontAsset(m):b.isAudio?g.ptrToAudioAsset(m):b},g.CustomFileAssetLoader=l.extend("CustomFileAssetLoader",{__construct:function({loadContents:m}){this.__parent.__construct.call(this),this.Gb=m},loadContents:function(m,b){return m=g.ptrToAsset(m),this.Gb(m,b)}}),g.CDNFileAssetLoader=l.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(m){let b=g.ptrToAsset(m);return m=b.cdnUuid,m===""?!1:(function(k,I){var R=new XMLHttpRequest;R.responseType="arraybuffer",R.onreadystatechange=function(){R.readyState==4&&R.status==200&&I(R)},R.open("GET",k,!0),R.send(null)}(b.cdnBaseUrl+"/"+m,k=>{b.decode(new Uint8Array(k.response))}),!0)}}),g.FallbackFileAssetLoader=l.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.lb=[]},addLoader:function(m){this.lb.push(m)},loadContents:function(m,b){for(let k of this.lb)if(k.loadContents(m,b))return!0;return!1}});let d=g.computeAlignment;g.computeAlignment=function(m,b,k,I,R=1){return d.call(this,m,b,k,I,R)}};const L="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),W=new function(){function r(){if(!s){let le=function(de,G,je){if(G=$.createShader(G),$.shaderSource(G,je),$.compileShader(G),je=$.getShaderInfoLog(G),0<(je||"").length)throw je;$.attachShader(de,G)};var C=document.createElement("canvas"),B={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let $;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if($=C.getContext("webgl",B),l=1,!$)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if($=C.getContext("webgl2",B))l=2;else if($=C.getContext("webgl",B))l=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if($=new Proxy($,{get(de,G){if(de.isContextLost()){if(R||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",G),R=!0),typeof de[G]=="function")return function(){}}else return typeof de[G]=="function"?function(...je){return de[G].apply(de,je)}:de[G]},set(de,G,je){if(de.isContextLost())R||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+G),R=!0);else return de[G]=je,!0}}),d=Math.min($.getParameter($.MAX_RENDERBUFFER_SIZE),$.getParameter($.MAX_TEXTURE_SIZE)),C=$.createProgram(),le(C,$.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),le(C,$.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),$.bindAttribLocation(C,0,"vertex"),$.bindAttribLocation(C,1,"uv"),$.linkProgram(C),B=$.getProgramInfoLog(C),0<(B||"").trim().length)throw B;m=$.getUniformLocation(C,"mat"),b=$.getUniformLocation(C,"translate"),$.useProgram(C),$.bindBuffer($.ARRAY_BUFFER,$.createBuffer()),$.enableVertexAttribArray(0),$.enableVertexAttribArray(1),$.bindBuffer($.ELEMENT_ARRAY_BUFFER,$.createBuffer()),$.uniform1i($.getUniformLocation(C,"image"),0),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s=$}return!0}let s=null,l=0,d=0,m=null,b=null,k=0,I=0,R=!1;r(),this.hc=function(){return r(),d},this.Mb=function(C){s.deleteTexture&&s.deleteTexture(C)},this.Lb=function(C){if(!r())return null;const B=s.createTexture();return B?(s.bindTexture(s.TEXTURE_2D,B),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,C),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),l==2?(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),s.generateMipmap(s.TEXTURE_2D)):s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),B):null};const T=new H(8),N=new H(8),V=new H(10),Y=new H(10);this.Qb=function(C,B,$,le,de){if(r()){var G=T.push(C),je=N.push(B);if(s.canvas){(s.canvas.width!=G||s.canvas.height!=je)&&(s.canvas.width=G,s.canvas.height=je),s.viewport(0,je-B,C,B),s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.enable(s.SCISSOR_TEST),$.sort((we,$t)=>$t.xb-we.xb),G=V.push(le),k!=G&&(s.bufferData(s.ARRAY_BUFFER,8*G,s.DYNAMIC_DRAW),k=G),G=0;for(var Ye of $)s.bufferSubData(s.ARRAY_BUFFER,G,Ye.Ua),G+=4*Ye.Ua.length;console.assert(G==4*le);for(var Dt of $)s.bufferSubData(s.ARRAY_BUFFER,G,Dt.Db),G+=4*Dt.Db.length;console.assert(G==8*le),G=Y.push(de),I!=G&&(s.bufferData(s.ELEMENT_ARRAY_BUFFER,2*G,s.DYNAMIC_DRAW),I=G),Ye=0;for(var Cn of $)s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,Ye,Cn.indices),Ye+=2*Cn.indices.length;console.assert(Ye==2*de),Cn=0,Dt=!0,G=Ye=0;for(const we of $){we.image.Ka!=Cn&&(s.bindTexture(s.TEXTURE_2D,we.image.Ja||null),Cn=we.image.Ka),we.mc?(s.scissor(we.Za,je-we.$a-we.kb,we.Ac,we.kb),Dt=!0):Dt&&(s.scissor(0,je-B,C,B),Dt=!1),$=2/C;const $t=-2/B;s.uniform4f(m,we.ha[0]*$*we.Ba,we.ha[1]*$t*we.Ca,we.ha[2]*$*we.Ba,we.ha[3]*$t*we.Ca),s.uniform2f(b,we.ha[4]*$*we.Ba+$*(we.Za-we.ic*we.Ba)-1,we.ha[5]*$t*we.Ca+$t*(we.$a-we.jc*we.Ca)+1),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,G),s.vertexAttribPointer(1,2,s.FLOAT,!1,0,G+4*le),s.drawElements(s.TRIANGLES,we.indices.length,s.UNSIGNED_SHORT,Ye),G+=4*we.Ua.length,Ye+=2*we.indices.length}console.assert(G==4*le),console.assert(Ye==2*de)}}},this.canvas=function(){return r()&&s.canvas}},ee=g.onRuntimeInitialized;g.onRuntimeInitialized=function(){function r(U){switch(U){case T.srcOver:return"source-over";case T.screen:return"screen";case T.overlay:return"overlay";case T.darken:return"darken";case T.lighten:return"lighten";case T.colorDodge:return"color-dodge";case T.colorBurn:return"color-burn";case T.hardLight:return"hard-light";case T.softLight:return"soft-light";case T.difference:return"difference";case T.exclusion:return"exclusion";case T.multiply:return"multiply";case T.hue:return"hue";case T.saturation:return"saturation";case T.color:return"color";case T.luminosity:return"luminosity"}}function s(U){return"rgba("+((16711680&U)>>>16)+","+((65280&U)>>>8)+","+((255&U)>>>0)+","+((4278190080&U)>>>24)/255+")"}function l(){0<je.length&&(W.Qb(G.drawWidth(),G.drawHeight(),je,Ye,Dt),je=[],Dt=Ye=0,G.reset(512,512));for(const U of de){for(const K of U.H)K();U.H=[]}de.clear()}ee&&ee();var d=g.RenderPaintStyle;const m=g.RenderPath,b=g.RenderPaint,k=g.Renderer,I=g.StrokeCap,R=g.StrokeJoin,T=g.BlendMode,N=d.fill,V=d.stroke,Y=g.FillRule.evenOdd;let C=1;var B=g.RenderImage.extend("CanvasRenderImage",{__construct:function({la:U,xa:K}={}){this.__parent.__construct.call(this),this.Ka=C,C=C+1&2147483647||1,this.la=U,this.xa=K},__destruct:function(){this.Ja&&(W.Mb(this.Ja),URL.revokeObjectURL(this.Xa)),this.__parent.__destruct.call(this)},decode:function(U){var K=this;K.xa&&K.xa(K);var pe=new Image;K.Xa=URL.createObjectURL(new Blob([U],{type:"image/png"})),pe.onload=function(){K.Fb=pe,K.Ja=W.Lb(pe),K.size(pe.width,pe.height),K.la&&K.la(K)},pe.src=K.Xa}}),$=m.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(U,K,pe,be,ce,_e,Se){var Te=this.T,Ot=Te.addPath;U=U.T;const Ve=new DOMMatrix;Ve.a=K,Ve.b=pe,Ve.c=be,Ve.d=ce,Ve.e=_e,Ve.f=Se,Ot.call(Te,U,Ve)},fillRule:function(U){this.Wa=U},moveTo:function(U,K){this.T.moveTo(U,K)},lineTo:function(U,K){this.T.lineTo(U,K)},cubicTo:function(U,K,pe,be,ce,_e){this.T.bezierCurveTo(U,K,pe,be,ce,_e)},close:function(){this.T.closePath()}}),le=b.extend("CanvasRenderPaint",{color:function(U){this.Ya=s(U)},thickness:function(U){this.Ib=U},join:function(U){switch(U){case R.miter:this.Ia="miter";break;case R.round:this.Ia="round";break;case R.bevel:this.Ia="bevel"}},cap:function(U){switch(U){case I.butt:this.Ha="butt";break;case I.round:this.Ha="round";break;case I.square:this.Ha="square"}},style:function(U){this.Hb=U},blendMode:function(U){this.Eb=r(U)},clearGradient:function(){this.ja=null},linearGradient:function(U,K,pe,be){this.ja={zb:U,Ab:K,cb:pe,eb:be,Ra:[]}},radialGradient:function(U,K,pe,be){this.ja={zb:U,Ab:K,cb:pe,eb:be,Ra:[],ec:!0}},addStop:function(U,K){this.ja.Ra.push({color:U,stop:K})},completeGradient:function(){},draw:function(U,K,pe){let be=this.Hb;var ce=this.Ya,_e=this.ja;if(U.globalCompositeOperation=this.Eb,_e!=null){ce=_e.zb;var Se=_e.Ab;const Ot=_e.cb;var Te=_e.eb;const Ve=_e.Ra;_e.ec?(_e=Ot-ce,Te-=Se,ce=U.createRadialGradient(ce,Se,0,ce,Se,Math.sqrt(_e*_e+Te*Te))):ce=U.createLinearGradient(ce,Se,Ot,Te);for(let At=0,qe=Ve.length;At<qe;At++)Se=Ve[At],ce.addColorStop(Se.stop,s(Se.color));this.Ya=ce,this.ja=null}switch(be){case V:U.strokeStyle=ce,U.lineWidth=this.Ib,U.lineCap=this.Ha,U.lineJoin=this.Ia,U.stroke(K);break;case N:U.fillStyle=ce,U.fill(K,pe)}}});const de=new Set;let G=null,je=[],Ye=0,Dt=0;var Cn=g.CanvasRenderer=k.extend("Renderer",{__construct:function(U){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=U.getContext("2d"),this.Va=U,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const U=this.S.length-6;if(6>U)throw"restore() called without matching save().";this.S.splice(U),this.H.push(this.C.restore.bind(this.C))},transform:function(U,K,pe,be,ce,_e){const Se=this.S,Te=Se.length-6;Se.splice(Te,6,Se[Te]*U+Se[Te+2]*K,Se[Te+1]*U+Se[Te+3]*K,Se[Te]*pe+Se[Te+2]*be,Se[Te+1]*pe+Se[Te+3]*be,Se[Te]*ce+Se[Te+2]*_e+Se[Te+4],Se[Te+1]*ce+Se[Te+3]*_e+Se[Te+5]),this.H.push(this.C.transform.bind(this.C,U,K,pe,be,ce,_e))},rotate:function(U){const K=Math.sin(U);U=Math.cos(U),this.transform(U,K,-K,U,0,0)},_drawPath:function(U,K){this.H.push(K.draw.bind(K,this.C,U.T,U.Wa===Y?"evenodd":"nonzero"))},_drawRiveImage:function(U,K,pe,be){var ce=U.Fb;if(ce){var _e=this.C,Se=r(pe);this.H.push(function(){_e.globalCompositeOperation=Se,_e.globalAlpha=be,_e.drawImage(ce,0,0),_e.globalAlpha=1})}},_getMatrix:function(U){const K=this.S,pe=K.length-6;for(let be=0;6>be;++be)U[be]=K[pe+be]},_drawImageMesh:function(U,K,pe,be,ce,_e,Se,Te,Ot,Ve,At){K=this.C.canvas.width;var qe=this.C.canvas.height;const Io=Ve-Te,Ro=At-Ot;Te=Math.max(Te,0),Ot=Math.max(Ot,0),Ve=Math.min(Ve,K),At=Math.min(At,qe);const _r=Ve-Te,yr=At-Ot;if(console.assert(_r<=Math.min(Io,K)),console.assert(yr<=Math.min(Ro,qe)),!(0>=_r||0>=yr)){Ve=_r<Io||yr<Ro,K=At=1;var Sn=Math.ceil(_r*At),Pn=Math.ceil(yr*K);qe=W.hc(),Sn>qe&&(At*=qe/Sn,Sn=qe),Pn>qe&&(K*=qe/Pn,Pn=qe),G||(G=new g.DynamicRectanizer(qe),G.reset(512,512)),qe=G.addRect(Sn,Pn),0>qe&&(l(),de.add(this),qe=G.addRect(Sn,Pn),console.assert(0<=qe));var Oo=qe&65535,jo=qe>>16;je.push({ha:this.S.slice(this.S.length-6),image:U,Za:Oo,$a:jo,ic:Te,jc:Ot,Ac:Sn,kb:Pn,Ba:At,Ca:K,Ua:new Float32Array(ce),Db:new Float32Array(_e),indices:new Uint16Array(Se),mc:Ve,xb:U.Ka<<1|(Ve?1:0)}),Ye+=ce.length,Dt+=Se.length;var Nn=this.C,Ku=r(pe);this.H.push(function(){Nn.save(),Nn.resetTransform(),Nn.globalCompositeOperation=Ku,Nn.globalAlpha=be;const xo=W.canvas();xo&&Nn.drawImage(xo,Oo,jo,Sn,Pn,Te,Ot,_r,yr),Nn.restore()})}},_clipPath:function(U){this.H.push(this.C.clip.bind(this.C,U.T,U.Wa===Y?"evenodd":"nonzero"))},clear:function(){de.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Va.width,this.Va.height))},flush:function(){},translate:function(U,K){this.transform(1,0,0,1,U,K)}});g.makeRenderer=function(U){const K=new Cn(U),pe=K.C;return new Proxy(K,{get(be,ce){if(typeof be[ce]=="function")return function(..._e){return be[ce].apply(be,_e)};if(typeof pe[ce]=="function"){if(-1<L.indexOf(ce))throw Error("RiveException: Method call to '"+ce+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(..._e){K.H.push(pe[ce].bind(pe,..._e))}}return be[ce]},set(be,ce,_e){if(ce in pe)return K.H.push(()=>{pe[ce]=_e}),!0}})},g.decodeImage=function(U,K){new B({la:K}).decode(U)},g.renderFactory={makeRenderPaint:function(){return new le},makeRenderPath:function(){return new $},makeRenderImage:function(){let U=$t;return new B({xa:()=>{U.total++},la:()=>{if(U.loaded++,U.loaded===U.total){const K=U.ready;K&&(K(),U.ready=null)}}})}};let we=g.load,$t=null;g.load=function(U,K,pe=!0){const be=new g.FallbackFileAssetLoader;return K!==void 0&&be.addLoader(K),pe&&(K=new g.CDNFileAssetLoader,be.addLoader(K)),new Promise(function(ce){let _e=null;$t={total:0,loaded:0,ready:function(){ce(_e)}},_e=we(U,be),$t.total==0&&ce(_e)})};let Gu=g.RendererWrapper.prototype.align;g.RendererWrapper.prototype.align=function(U,K,pe,be,ce=1){Gu.call(this,U,K,pe,be,ce)},d=new M,g.requestAnimationFrame=d.requestAnimationFrame.bind(d),g.cancelAnimationFrame=d.cancelAnimationFrame.bind(d),g.enableFPSCounter=d.Rb.bind(d),g.disableFPSCounter=d.Ob,d.pb=l,g.resolveAnimationFrame=l,g.cleanup=function(){G&&G.delete()}};var j=Object.assign({},g),F="./this.program",X=typeof window=="object",Q=typeof importScripts=="function",ae="",q,ne;(X||Q)&&(Q?ae=self.location.href:typeof document<"u"&&document.currentScript&&(ae=document.currentScript.src),E&&(ae=E),ae.indexOf("blob:")!==0?ae=ae.substr(0,ae.replace(/[?#].*/,"").lastIndexOf("/")+1):ae="",Q&&(ne=r=>{var s=new XMLHttpRequest;return s.open("GET",r,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),q=(r,s,l)=>{var d=new XMLHttpRequest;d.open("GET",r,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?s(d.response):l()},d.onerror=l,d.send(null)});var Ie=g.print||console.log.bind(console),xe=g.printErr||console.error.bind(console);Object.assign(g,j),j=null,g.thisProgram&&(F=g.thisProgram);var Ue;g.wasmBinary&&(Ue=g.wasmBinary),g.noExitRuntime,typeof WebAssembly!="object"&&sn("no native wasm support detected");var Ct,ge,rn=!1,$e,Re,Be,st,he,me,ct,Pe;function Ke(){var r=Ct.buffer;g.HEAP8=$e=new Int8Array(r),g.HEAP16=Be=new Int16Array(r),g.HEAP32=he=new Int32Array(r),g.HEAPU8=Re=new Uint8Array(r),g.HEAPU16=st=new Uint16Array(r),g.HEAPU32=me=new Uint32Array(r),g.HEAPF32=ct=new Float32Array(r),g.HEAPF64=Pe=new Float64Array(r)}var Le,_t=[],yt=[],qt=[];function bn(){var r=g.preRun.shift();_t.unshift(r)}var ot=0,St=null;function sn(r){throw g.onAbort&&g.onAbort(r),r="Aborted("+r+")",xe(r),rn=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),x(r),r}function ur(r){return r.startsWith("data:application/octet-stream;base64,")}var zt;if(zt="canvas_advanced.wasm",!ur(zt)){var $r=zt;zt=g.locateFile?g.locateFile($r,ae):ae+$r}function ht(r){if(r==zt&&Ue)return new Uint8Array(Ue);if(ne)return ne(r);throw"both async and sync fetching of the wasm failed"}function Mi(r){if(!Ue&&(X||Q)){if(typeof fetch=="function"&&!r.startsWith("file://"))return fetch(r,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+r+"'";return s.arrayBuffer()}).catch(()=>ht(r));if(q)return new Promise((s,l)=>{q(r,d=>s(new Uint8Array(d)),l)})}return Promise.resolve().then(()=>ht(r))}function Br(r,s,l){return Mi(r).then(d=>WebAssembly.instantiate(d,s)).then(d=>d).then(l,d=>{xe("failed to asynchronously prepare wasm: "+d),sn(d)})}function Li(r,s){var l=zt;return Ue||typeof WebAssembly.instantiateStreaming!="function"||ur(l)||l.startsWith("file://")||typeof fetch!="function"?Br(l,r,s):fetch(l,{credentials:"same-origin"}).then(d=>WebAssembly.instantiateStreaming(d,r).then(s,function(m){return xe("wasm streaming compile failed: "+m),xe("falling back to ArrayBuffer instantiation"),Br(l,r,s)}))}var on,v,a={460492:(r,s,l,d,m)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(typeof window.h>"u"){window.h={Aa:0},window.h.I={},window.h.I.ya=r,window.h.I.capture=s,window.h.I.La=l,window.h.ga={},window.h.ga.stopped=d,window.h.ga.yb=m;let b=window.h;b.D=[],b.yc=function(k){for(var I=0;I<b.D.length;++I)if(b.D[I]==null)return b.D[I]=k,I;return b.D.push(k),b.D.length-1},b.Cb=function(k){for(b.D[k]=null;0<b.D.length&&b.D[b.D.length-1]==null;)b.D.pop()},b.Sc=function(k){for(var I=0;I<b.D.length;++I)if(b.D[I]==k)return b.Cb(I)},b.ra=function(k){return b.D[k]},b.Ta=["touchend","click"],b.unlock=function(){for(var k=0;k<b.D.length;++k){var I=b.D[k];I!=null&&I.J!=null&&I.state===b.ga.yb&&I.J.resume().then(()=>{ko(I.qb)},R=>{console.error("Failed to resume audiocontext",R)})}b.Ta.map(function(R){document.removeEventListener(R,b.unlock,!0)})},b.Ta.map(function(k){document.addEventListener(k,b.unlock,!0)})}return window.h.Aa+=1,1},462670:()=>{typeof window.h<"u"&&(window.h.Ta.map(function(r){document.removeEventListener(r,window.h.unlock,!0)}),--window.h.Aa,window.h.Aa===0&&delete window.h)},462974:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,463078:()=>{try{var r=new(window.AudioContext||window.webkitAudioContext),s=r.sampleRate;return r.close(),s}catch{return 0}},463249:(r,s,l,d,m,b)=>{if(typeof window.h>"u")return-1;var k={},I={};return r==window.h.I.ya&&l!=0&&(I.sampleRate=l),k.J=new(window.AudioContext||window.webkitAudioContext)(I),k.J.suspend(),k.state=window.h.ga.stopped,l=0,r!=window.h.I.ya&&(l=s),k.Z=k.J.createScriptProcessor(d,l,s),k.Z.onaudioprocess=function(R){if((k.sa==null||k.sa.length==0)&&(k.sa=new Float32Array(ct.buffer,m,d*s)),r==window.h.I.capture||r==window.h.I.La){for(var T=0;T<s;T+=1)for(var N=R.inputBuffer.getChannelData(T),V=k.sa,Y=0;Y<d;Y+=1)V[Y*s+T]=N[Y];Co(b,d,m)}if(r==window.h.I.ya||r==window.h.I.La)for(So(b,d,m),T=0;T<R.outputBuffer.numberOfChannels;++T)for(N=R.outputBuffer.getChannelData(T),V=k.sa,Y=0;Y<d;Y+=1)N[Y]=V[Y*s+T];else for(T=0;T<R.outputBuffer.numberOfChannels;++T)R.outputBuffer.getChannelData(T).fill(0)},r!=window.h.I.capture&&r!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(R){k.Da=k.J.createMediaStreamSource(R),k.Da.connect(k.Z),k.Z.connect(k.J.destination)}).catch(function(R){console.log("Failed to get user media: "+R)}),r==window.h.I.ya&&k.Z.connect(k.J.destination),k.qb=b,window.h.yc(k)},466126:r=>window.h.ra(r).J.sampleRate,466199:r=>{r=window.h.ra(r),r.Z!==void 0&&(r.Z.onaudioprocess=function(){},r.Z.disconnect(),r.Z=void 0),r.Da!==void 0&&(r.Da.disconnect(),r.Da=void 0),r.J.close(),r.J=void 0,r.qb=void 0},466599:r=>{window.h.Cb(r)},466649:r=>{r=window.h.ra(r),r.J.resume(),r.state=window.h.ga.yb},466788:r=>{r=window.h.ra(r),r.J.suspend(),r.state=window.h.ga.stopped}},h=r=>{for(;0<r.length;)r.shift()(g)},w=(r,s)=>{for(var l=0,d=r.length-1;0<=d;d--){var m=r[d];m==="."?r.splice(d,1):m===".."?(r.splice(d,1),l++):l&&(r.splice(d,1),l--)}if(s)for(;l;l--)r.unshift("..");return r},S=r=>{var s=r.charAt(0)==="/",l=r.substr(-1)==="/";return(r=w(r.split("/").filter(d=>!!d),!s).join("/"))||s||(r="."),r&&l&&(r+="/"),(s?"/":"")+r},O=r=>{var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(r).slice(1);return r=s[0],s=s[1],!r&&!s?".":(s&&(s=s.substr(0,s.length-1)),r+s)},D=r=>{if(r==="/")return"/";r=S(r),r=r.replace(/\/$/,"");var s=r.lastIndexOf("/");return s===-1?r:r.substr(s+1)},te=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return r=>crypto.getRandomValues(r);sn("initRandomDevice")},se=r=>(se=te())(r);function Z(){for(var r="",s=!1,l=arguments.length-1;-1<=l&&!s;l--){if(s=0<=l?arguments[l]:"/",typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";r=s+"/"+r,s=s.charAt(0)==="/"}return r=w(r.split("/").filter(d=>!!d),!s).join("/"),(s?"/":"")+r||"."}var fe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ce=(r,s,l)=>{var d=s+l;for(l=s;r[l]&&!(l>=d);)++l;if(16<l-s&&r.buffer&&fe)return fe.decode(r.subarray(s,l));for(d="";s<l;){var m=r[s++];if(m&128){var b=r[s++]&63;if((m&224)==192)d+=String.fromCharCode((m&31)<<6|b);else{var k=r[s++]&63;m=(m&240)==224?(m&15)<<12|b<<6|k:(m&7)<<18|b<<12|k<<6|r[s++]&63,65536>m?d+=String.fromCharCode(m):(m-=65536,d+=String.fromCharCode(55296|m>>10,56320|m&1023))}}else d+=String.fromCharCode(m)}return d},We=[],Me=r=>{for(var s=0,l=0;l<r.length;++l){var d=r.charCodeAt(l);127>=d?s++:2047>=d?s+=2:55296<=d&&57343>=d?(s+=4,++l):s+=3}return s},Pt=(r,s,l,d)=>{if(!(0<d))return 0;var m=l;d=l+d-1;for(var b=0;b<r.length;++b){var k=r.charCodeAt(b);if(55296<=k&&57343>=k){var I=r.charCodeAt(++b);k=65536+((k&1023)<<10)|I&1023}if(127>=k){if(l>=d)break;s[l++]=k}else{if(2047>=k){if(l+1>=d)break;s[l++]=192|k>>6}else{if(65535>=k){if(l+2>=d)break;s[l++]=224|k>>12}else{if(l+3>=d)break;s[l++]=240|k>>18,s[l++]=128|k>>12&63}s[l++]=128|k>>6&63}s[l++]=128|k&63}}return s[l]=0,l-m};function wt(r,s){var l=Array(Me(r)+1);return r=Pt(r,l,0,l.length),s&&(l.length=r),l}var at=[];function ut(r,s){at[r]={input:[],F:[],V:s},Ui(r,bt)}var bt={open:function(r){var s=at[r.node.za];if(!s)throw new J(43);r.s=s,r.seekable=!1},close:function(r){r.s.V.qa(r.s)},qa:function(r){r.s.V.qa(r.s)},read:function(r,s,l,d){if(!r.s||!r.s.V.jb)throw new J(60);for(var m=0,b=0;b<d;b++){try{var k=r.s.V.jb(r.s)}catch{throw new J(29)}if(k===void 0&&m===0)throw new J(6);if(k==null)break;m++,s[l+b]=k}return m&&(r.node.timestamp=Date.now()),m},write:function(r,s,l,d){if(!r.s||!r.s.V.Oa)throw new J(60);try{for(var m=0;m<d;m++)r.s.V.Oa(r.s,s[l+m])}catch{throw new J(29)}return d&&(r.node.timestamp=Date.now()),m}},an={jb:function(){e:{if(!We.length){var r=null;if(typeof window<"u"&&typeof window.prompt=="function"?(r=window.prompt("Input: "),r!==null&&(r+=`
`)):typeof readline=="function"&&(r=readline(),r!==null&&(r+=`
`)),!r){r=null;break e}We=wt(r,!0)}r=We.shift()}return r},Oa:function(r,s){s===null||s===10?(Ie(Ce(r.F,0)),r.F=[]):s!=0&&r.F.push(s)},qa:function(r){r.F&&0<r.F.length&&(Ie(Ce(r.F,0)),r.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},un={Oa:function(r,s){s===null||s===10?(xe(Ce(r.F,0)),r.F=[]):s!=0&&r.F.push(s)},qa:function(r){r.F&&0<r.F.length&&(xe(Ce(r.F,0)),r.F=[])}};function Lt(r,s){var l=r.j?r.j.length:0;l>=s||(s=Math.max(s,l*(1048576>l?2:1.125)>>>0),l!=0&&(s=Math.max(s,256)),l=r.j,r.j=new Uint8Array(s),0<r.v&&r.j.set(l.subarray(0,r.v),0))}var re={O:null,U(){return re.createNode(null,"/",16895,0)},createNode(r,s,l,d){if((l&61440)===24576||(l&61440)===4096)throw new J(63);return re.O||(re.O={dir:{node:{Y:re.l.Y,P:re.l.P,ka:re.l.ka,va:re.l.va,vb:re.l.vb,Bb:re.l.Bb,wb:re.l.wb,tb:re.l.tb,Ea:re.l.Ea},stream:{ba:re.m.ba}},file:{node:{Y:re.l.Y,P:re.l.P},stream:{ba:re.m.ba,read:re.m.read,write:re.m.write,pa:re.m.pa,mb:re.m.mb,ob:re.m.ob}},link:{node:{Y:re.l.Y,P:re.l.P,ma:re.l.ma},stream:{}},ab:{node:{Y:re.l.Y,P:re.l.P},stream:Cu}}),l=Hs(r,s,l,d),(l.mode&61440)===16384?(l.l=re.O.dir.node,l.m=re.O.dir.stream,l.j={}):(l.mode&61440)===32768?(l.l=re.O.file.node,l.m=re.O.file.stream,l.v=0,l.j=null):(l.mode&61440)===40960?(l.l=re.O.link.node,l.m=re.O.link.stream):(l.mode&61440)===8192&&(l.l=re.O.ab.node,l.m=re.O.ab.stream),l.timestamp=Date.now(),r&&(r.j[s]=l,r.timestamp=l.timestamp),l},Kc(r){return r.j?r.j.subarray?r.j.subarray(0,r.v):new Uint8Array(r.j):new Uint8Array(0)},l:{Y(r){var s={};return s.Jc=(r.mode&61440)===8192?r.id:1,s.Mc=r.id,s.mode=r.mode,s.Oc=1,s.uid=0,s.Lc=0,s.za=r.za,(r.mode&61440)===16384?s.size=4096:(r.mode&61440)===32768?s.size=r.v:(r.mode&61440)===40960?s.size=r.link.length:s.size=0,s.Bc=new Date(r.timestamp),s.Nc=new Date(r.timestamp),s.Ic=new Date(r.timestamp),s.Jb=4096,s.Cc=Math.ceil(s.size/s.Jb),s},P(r,s){if(s.mode!==void 0&&(r.mode=s.mode),s.timestamp!==void 0&&(r.timestamp=s.timestamp),s.size!==void 0&&(s=s.size,r.v!=s))if(s==0)r.j=null,r.v=0;else{var l=r.j;r.j=new Uint8Array(s),l&&r.j.set(l.subarray(0,Math.min(s,r.v))),r.v=s}},ka(){throw Fi[44]},va(r,s,l,d){return re.createNode(r,s,l,d)},vb(r,s,l){if((r.mode&61440)===16384){try{var d=Wr(s,l)}catch{}if(d)for(var m in d.j)throw new J(55)}delete r.parent.j[r.name],r.parent.timestamp=Date.now(),r.name=l,s.j[l]=r,s.timestamp=r.parent.timestamp,r.parent=s},Bb(r,s){delete r.j[s],r.timestamp=Date.now()},wb(r,s){var l=Wr(r,s),d;for(d in l.j)throw new J(55);delete r.j[s],r.timestamp=Date.now()},tb(r){var s=[".",".."],l;for(l in r.j)r.j.hasOwnProperty(l)&&s.push(l);return s},Ea(r,s,l){return r=re.createNode(r,s,41471,0),r.link=l,r},ma(r){if((r.mode&61440)!==40960)throw new J(28);return r.link}},m:{read(r,s,l,d,m){var b=r.node.j;if(m>=r.node.v)return 0;if(r=Math.min(r.node.v-m,d),8<r&&b.subarray)s.set(b.subarray(m,m+r),l);else for(d=0;d<r;d++)s[l+d]=b[m+d];return r},write(r,s,l,d,m,b){if(s.buffer===$e.buffer&&(b=!1),!d)return 0;if(r=r.node,r.timestamp=Date.now(),s.subarray&&(!r.j||r.j.subarray)){if(b)return r.j=s.subarray(l,l+d),r.v=d;if(r.v===0&&m===0)return r.j=s.slice(l,l+d),r.v=d;if(m+d<=r.v)return r.j.set(s.subarray(l,l+d),m),d}if(Lt(r,m+d),r.j.subarray&&s.subarray)r.j.set(s.subarray(l,l+d),m);else for(b=0;b<d;b++)r.j[m+b]=s[l+b];return r.v=Math.max(r.v,m+d),d},ba(r,s,l){if(l===1?s+=r.position:l===2&&(r.node.mode&61440)===32768&&(s+=r.node.v),0>s)throw new J(28);return s},pa(r,s,l){Lt(r.node,s+l),r.node.v=Math.max(r.node.v,s+l)},mb(r,s,l,d,m){if((r.node.mode&61440)!==32768)throw new J(43);if(r=r.node.j,m&2||r.buffer!==$e.buffer){if((0<l||l+s<r.length)&&(r.subarray?r=r.subarray(l,l+s):r=Array.prototype.slice.call(r,l,l+s)),l=!0,sn(),s=void 0,!s)throw new J(48);$e.set(r,s)}else l=!1,s=r.byteOffset;return{o:s,M:l}},ob(r,s,l,d){return re.m.write(r,s,0,d,l,!1),0}}};function Ee(r,s){var l=0;return r&&(l|=365),s&&(l|=146),l}var Ft=null,Ws={},Nr=[],Au=1,lr=null,Vs=!0,J=null,Fi={},En=(r,s={})=>{if(r=Z(r),!r)return{path:"",node:null};if(s=Object.assign({hb:!0,Qa:0},s),8<s.Qa)throw new J(32);r=r.split("/").filter(k=>!!k);for(var l=Ft,d="/",m=0;m<r.length;m++){var b=m===r.length-1;if(b&&s.parent)break;if(l=Wr(l,r[m]),d=S(d+"/"+r[m]),l.wa&&(!b||b&&s.hb)&&(l=l.wa.root),!b||s.gb){for(b=0;(l.mode&61440)===40960;)if(l=Su(d),d=Z(O(d),l),l=En(d,{Qa:s.Qa+1}).node,40<b++)throw new J(32)}}return{path:d,node:l}},qs=r=>{for(var s;;){if(r===r.parent)return r=r.U.nb,s?r[r.length-1]!=="/"?`${r}/${s}`:r+s:r;s=s?`${r.name}/${s}`:r.name,r=r.parent}},zs=(r,s)=>{for(var l=0,d=0;d<s.length;d++)l=(l<<5)-l+s.charCodeAt(d)|0;return(r+l>>>0)%lr.length},Wr=(r,s)=>{var l;if(l=(l=Vr(r,"x"))?l:r.l.ka?0:2)throw new J(l,r);for(l=lr[zs(r.id,s)];l;l=l.lc){var d=l.name;if(l.parent.id===r.id&&d===s)return l}return r.l.ka(r,s)},Hs=(r,s,l,d)=>(r=new wo(r,s,l,d),s=zs(r.parent.id,r.name),r.lc=lr[s],lr[s]=r),Gs=r=>{var s=["r","w","rw"][r&3];return r&512&&(s+="w"),s},Vr=(r,s)=>{if(Vs)return 0;if(!s.includes("r")||r.mode&292){if(s.includes("w")&&!(r.mode&146)||s.includes("x")&&!(r.mode&73))return 2}else return 2;return 0},Ks=(r,s)=>{try{return Wr(r,s),20}catch{}return Vr(r,"wx")},ku=()=>{for(var r=0;4096>=r;r++)if(!Nr[r])return r;throw new J(33)},ln=r=>{if(r=Nr[r],!r)throw new J(8);return r},Ys=(r,s=-1)=>(hr||(hr=function(){this.h={}},hr.prototype={},Object.defineProperties(hr.prototype,{object:{get(){return this.node},set(l){this.node=l}},flags:{get(){return this.h.flags},set(l){this.h.flags=l}},position:{get(){return this.h.position},set(l){this.h.position=l}}})),r=Object.assign(new hr,r),s==-1&&(s=ku()),r.X=s,Nr[s]=r),Cu={open:r=>{r.m=Ws[r.node.za].m,r.m.open&&r.m.open(r)},ba:()=>{throw new J(70)}},Ui=(r,s)=>{Ws[r]={m:s}},Js=(r,s)=>{var l=s==="/",d=!s;if(l&&Ft)throw new J(10);if(!l&&!d){var m=En(s,{hb:!1});if(s=m.path,m=m.node,m.wa)throw new J(10);if((m.mode&61440)!==16384)throw new J(54)}s={type:r,Qc:{},nb:s,kc:[]},r=r.U(s),r.U=s,s.root=r,l?Ft=r:m&&(m.wa=s,m.U&&m.U.kc.push(s))},Tt=(r,s,l)=>{var d=En(r,{parent:!0}).node;if(r=D(r),!r||r==="."||r==="..")throw new J(28);var m=Ks(d,r);if(m)throw new J(m);if(!d.l.va)throw new J(63);return d.l.va(d,r,s,l)},qr=(r,s,l)=>{typeof l>"u"&&(l=s,s=438),Tt(r,s|8192,l)},Di=(r,s)=>{if(!Z(r))throw new J(44);var l=En(s,{parent:!0}).node;if(!l)throw new J(44);s=D(s);var d=Ks(l,s);if(d)throw new J(d);if(!l.l.Ea)throw new J(63);l.l.Ea(l,s,r)},Su=r=>{if(r=En(r).node,!r)throw new J(44);if(!r.l.ma)throw new J(28);return Z(qs(r.parent),r.l.ma(r))},zr=(r,s,l)=>{if(r==="")throw new J(44);if(typeof s=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[s];if(typeof d>"u")throw Error(`Unknown file open mode: ${s}`);s=d}if(l=s&64?(typeof l>"u"?438:l)&4095|32768:0,typeof r=="object")var m=r;else{r=S(r);try{m=En(r,{gb:!(s&131072)}).node}catch{}}if(d=!1,s&64)if(m){if(s&128)throw new J(20)}else m=Tt(r,l,0),d=!0;if(!m)throw new J(44);if((m.mode&61440)===8192&&(s&=-513),s&65536&&(m.mode&61440)!==16384)throw new J(54);if(!d&&(l=m?(m.mode&61440)===40960?32:(m.mode&61440)===16384&&(Gs(s)!=="r"||s&512)?31:Vr(m,Gs(s)):44))throw new J(l);if(s&512&&!d){if(l=m,l=typeof l=="string"?En(l,{gb:!0}).node:l,!l.l.P)throw new J(63);if((l.mode&61440)===16384)throw new J(31);if((l.mode&61440)!==32768)throw new J(28);if(d=Vr(l,"w"))throw new J(d);l.l.P(l,{size:0,timestamp:Date.now()})}return s&=-131713,m=Ys({node:m,path:qs(m),flags:s,seekable:!0,position:0,m:m.m,zc:[],error:!1}),m.m.open&&m.m.open(m),!g.logReadFiles||s&1||(Hr||(Hr={}),r in Hr||(Hr[r]=1)),m},Xs=(r,s,l)=>{if(r.X===null)throw new J(8);if(!r.seekable||!r.m.ba)throw new J(70);if(l!=0&&l!=1&&l!=2)throw new J(28);r.position=r.m.ba(r,s,l),r.zc=[]},Qs=()=>{J||(J=function(r,s){this.name="ErrnoError",this.node=s,this.pc=function(l){this.aa=l},this.pc(r),this.message="FS error"},J.prototype=Error(),J.prototype.constructor=J,[44].forEach(r=>{Fi[r]=new J(r),Fi[r].stack="<generic error, no stack>"}))},Zs,cr=(r,s,l)=>{r=S("/dev/"+r);var d=Ee(!!s,!!l);$i||($i=64);var m=$i++<<8|0;Ui(m,{open:b=>{b.seekable=!1},close:()=>{l&&l.buffer&&l.buffer.length&&l(10)},read:(b,k,I,R)=>{for(var T=0,N=0;N<R;N++){try{var V=s()}catch{throw new J(29)}if(V===void 0&&T===0)throw new J(6);if(V==null)break;T++,k[I+N]=V}return T&&(b.node.timestamp=Date.now()),T},write:(b,k,I,R)=>{for(var T=0;T<R;T++)try{l(k[I+T])}catch{throw new J(29)}return R&&(b.node.timestamp=Date.now()),T}}),qr(r,d,m)},$i,An={},hr,Hr,dr=void 0;function Ht(){return dr+=4,he[dr-4>>2]}function eo(r){if(r===void 0)return"_unknown";r=r.replace(/[^a-zA-Z0-9_]/g,"$");var s=r.charCodeAt(0);return 48<=s&&57>=s?`_${r}`:r}function Gr(r,s){return r=eo(r),{[r]:function(){return s.apply(this,arguments)}}[r]}function to(){this.M=[void 0],this.ib=[]}var Et=new to,Dn=void 0;function ue(r){throw new Dn(r)}var It=r=>(r||ue("Cannot use deleted val. handle = "+r),Et.get(r).value),Rt=r=>{switch(r){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Et.pa({ub:1,value:r})}};function no(r){var s=Error,l=Gr(r,function(d){this.name=r,this.message=d,d=Error(d).stack,d!==void 0&&(this.stack=this.toString()+`
`+d.replace(/^Error(:[^\n]*)?\n/,""))});return l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},l}var ro=void 0,io=void 0;function Fe(r){for(var s="";Re[r];)s+=io[Re[r++]];return s}var fr=[];function Bi(){for(;fr.length;){var r=fr.pop();r.g.fa=!1,r.delete()}}var vr=void 0,Gt={};function Ni(r,s){for(s===void 0&&ue("ptr should not be undefined");r.A;)s=r.na(s),r=r.A;return s}var kn={};function so(r){r=Po(r);var s=Fe(r);return Jt(r),s}function pr(r,s){var l=kn[r];return l===void 0&&ue(s+" has unknown type "+so(r)),l}function Kr(){}var Wi=!1;function oo(r){--r.count.value,r.count.value===0&&(r.G?r.L.W(r.G):r.u.i.W(r.o))}function ao(r,s,l){return s===l?r:l.A===void 0?null:(r=ao(r,s,l.A),r===null?null:l.Pb(r))}var uo={};function Pu(r,s){return s=Ni(r,s),Gt[s]}var lo=void 0;function Yr(r){throw new lo(r)}function Jr(r,s){return s.u&&s.o||Yr("makeClassHandle requires ptr and ptrType"),!!s.L!=!!s.G&&Yr("Both smartPtrType and smartPtr must be specified"),s.count={value:1},$n(Object.create(r,{g:{value:s}}))}function $n(r){return typeof FinalizationRegistry>"u"?($n=s=>s,r):(Wi=new FinalizationRegistry(s=>{oo(s.g)}),$n=s=>{var l=s.g;return l.G&&Wi.register(s,{g:l},s),s},Kr=s=>{Wi.unregister(s)},$n(r))}var Xr={};function gr(r){for(;r.length;){var s=r.pop();r.pop()(s)}}function mr(r){return this.fromWireType(he[r>>2])}var Bn={},Qr={};function dt(r,s,l){function d(I){I=l(I),I.length!==r.length&&Yr("Mismatched type converter count");for(var R=0;R<r.length;++R)Ut(r[R],I[R])}r.forEach(function(I){Qr[I]=s});var m=Array(s.length),b=[],k=0;s.forEach((I,R)=>{kn.hasOwnProperty(I)?m[R]=kn[I]:(b.push(I),Bn.hasOwnProperty(I)||(Bn[I]=[]),Bn[I].push(()=>{m[R]=kn[I],++k,k===b.length&&d(m)}))}),b.length===0&&d(m)}function Zr(r){switch(r){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${r}`)}}function Tu(r,s,l={}){var d=s.name;if(r||ue(`type "${d}" must have a positive integer typeid pointer`),kn.hasOwnProperty(r)){if(l.$b)return;ue(`Cannot register type '${d}' twice`)}kn[r]=s,delete Qr[r],Bn.hasOwnProperty(r)&&(s=Bn[r],delete Bn[r],s.forEach(m=>m()))}function Ut(r,s,l={}){if(!("argPackAdvance"in s))throw new TypeError("registerType registeredInstance requires argPackAdvance");Tu(r,s,l)}function Vi(r){ue(r.g.u.i.name+" instance already deleted")}function cn(){}function qi(r,s,l){if(r[s].B===void 0){var d=r[s];r[s]=function(){return r[s].B.hasOwnProperty(arguments.length)||ue(`Function '${l}' called with an invalid number of arguments (${arguments.length}) - expects one of (${r[s].B})!`),r[s].B[arguments.length].apply(this,arguments)},r[s].B=[],r[s].B[d.ea]=d}}function zi(r,s,l){g.hasOwnProperty(r)?((l===void 0||g[r].B!==void 0&&g[r].B[l]!==void 0)&&ue(`Cannot register public name '${r}' twice`),qi(g,r,r),g.hasOwnProperty(l)&&ue(`Cannot register multiple overloads of a function with the same number of arguments (${l})!`),g[r].B[l]=s):(g[r]=s,l!==void 0&&(g[r].Pc=l))}function Iu(r,s,l,d,m,b,k,I){this.name=r,this.constructor=s,this.N=l,this.W=d,this.A=m,this.Ub=b,this.na=k,this.Pb=I,this.rb=[]}function ei(r,s,l){for(;s!==l;)s.na||ue(`Expected null or instance of ${l.name}, got an instance of ${s.name}`),r=s.na(r),s=s.A;return r}function Ru(r,s){return s===null?(this.Na&&ue(`null is not a valid ${this.name}`),0):(s.g||ue(`Cannot pass "${Gi(s)}" as a ${this.name}`),s.g.o||ue(`Cannot pass deleted object as a pointer of type ${this.name}`),ei(s.g.o,s.g.u.i,this.i))}function Ou(r,s){if(s===null){if(this.Na&&ue(`null is not a valid ${this.name}`),this.ua){var l=this.Pa();return r!==null&&r.push(this.W,l),l}return 0}if(s.g||ue(`Cannot pass "${Gi(s)}" as a ${this.name}`),s.g.o||ue(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&s.g.u.ta&&ue(`Cannot convert argument of type ${s.g.L?s.g.L.name:s.g.u.name} to parameter type ${this.name}`),l=ei(s.g.o,s.g.u.i,this.i),this.ua)switch(s.g.G===void 0&&ue("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:s.g.L===this?l=s.g.G:ue(`Cannot convert argument of type ${s.g.L?s.g.L.name:s.g.u.name} to parameter type ${this.name}`);break;case 1:l=s.g.G;break;case 2:if(s.g.L===this)l=s.g.G;else{var d=s.clone();l=this.oc(l,Rt(function(){d.delete()})),r!==null&&r.push(this.W,l)}break;default:ue("Unsupporting sharing policy")}return l}function ju(r,s){return s===null?(this.Na&&ue(`null is not a valid ${this.name}`),0):(s.g||ue(`Cannot pass "${Gi(s)}" as a ${this.name}`),s.g.o||ue(`Cannot pass deleted object as a pointer of type ${this.name}`),s.g.u.ta&&ue(`Cannot convert argument of type ${s.g.u.name} to parameter type ${this.name}`),ei(s.g.o,s.g.u.i,this.i))}function Kt(r,s,l,d){this.name=r,this.i=s,this.Na=l,this.ta=d,this.ua=!1,this.W=this.oc=this.Pa=this.sb=this.tc=this.nc=void 0,s.A!==void 0?this.toWireType=Ou:(this.toWireType=d?Ru:ju,this.K=null)}function co(r,s,l){g.hasOwnProperty(r)||Yr("Replacing nonexistant public symbol"),g[r].B!==void 0&&l!==void 0?g[r].B[l]=s:(g[r]=s,g[r].ea=l)}var ti=[],ho=r=>{var s=ti[r];return s||(r>=ti.length&&(ti.length=r+1),ti[r]=s=Le.get(r)),s},xu=(r,s)=>{var l=[];return function(){if(l.length=0,Object.assign(l,arguments),r.includes("j")){var d=g["dynCall_"+r];d=l&&l.length?d.apply(null,[s].concat(l)):d.call(null,s)}else d=ho(s).apply(null,l);return d}};function Ze(r,s){r=Fe(r);var l=r.includes("j")?xu(r,s):ho(s);return typeof l!="function"&&ue(`unknown function pointer with signature ${r}: ${s}`),l}var fo=void 0;function Yt(r,s){function l(b){m[b]||kn[b]||(Qr[b]?Qr[b].forEach(l):(d.push(b),m[b]=!0))}var d=[],m={};throw s.forEach(l),new fo(`${r}: `+d.map(so).join([", "]))}function ni(r,s,l,d,m){var b=s.length;2>b&&ue("argTypes array size mismatch! Must at least get return value and 'this' types!");var k=s[1]!==null&&l!==null,I=!1;for(l=1;l<s.length;++l)if(s[l]!==null&&s[l].K===void 0){I=!0;break}var R=s[0].name!=="void",T=b-2,N=Array(T),V=[],Y=[];return function(){if(arguments.length!==T&&ue(`function ${r} called with ${arguments.length} arguments, expected ${T} args!`),Y.length=0,V.length=k?2:1,V[0]=m,k){var C=s[1].toWireType(Y,this);V[1]=C}for(var B=0;B<T;++B)N[B]=s[B+2].toWireType(Y,arguments[B]),V.push(N[B]);if(B=d.apply(null,V),I)gr(Y);else for(var $=k?1:2;$<s.length;$++){var le=$===1?C:N[$-2];s[$].K!==null&&s[$].K(le)}return C=R?s[0].fromWireType(B):void 0,C}}function ri(r,s){for(var l=[],d=0;d<r;d++)l.push(me[s+4*d>>2]);return l}function vo(r,s,l){return r instanceof Object||ue(`${l} with invalid "this": ${r}`),r instanceof s.i.constructor||ue(`${l} incompatible with "this" of type ${r.constructor.name}`),r.g.o||ue(`cannot call emscripten binding method ${l} on deleted object`),ei(r.g.o,r.g.u.i,s.i)}function Hi(r){r>=Et.h&&--Et.get(r).ub===0&&Et.Zb(r)}function Mu(r,s,l){switch(s){case 0:return function(d){return this.fromWireType((l?$e:Re)[d])};case 1:return function(d){return this.fromWireType((l?Be:st)[d>>1])};case 2:return function(d){return this.fromWireType((l?he:me)[d>>2])};default:throw new TypeError("Unknown integer type: "+r)}}function Gi(r){if(r===null)return"null";var s=typeof r;return s==="object"||s==="array"||s==="function"?r.toString():""+r}function Lu(r,s){switch(s){case 2:return function(l){return this.fromWireType(ct[l>>2])};case 3:return function(l){return this.fromWireType(Pe[l>>3])};default:throw new TypeError("Unknown float type: "+r)}}function Fu(r,s,l){switch(s){case 0:return l?function(d){return $e[d]}:function(d){return Re[d]};case 1:return l?function(d){return Be[d>>1]}:function(d){return st[d>>1]};case 2:return l?function(d){return he[d>>2]}:function(d){return me[d>>2]};default:throw new TypeError("Unknown integer type: "+r)}}var po=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Uu=(r,s)=>{for(var l=r>>1,d=l+s/2;!(l>=d)&&st[l];)++l;if(l<<=1,32<l-r&&po)return po.decode(Re.subarray(r,l));for(l="",d=0;!(d>=s/2);++d){var m=Be[r+2*d>>1];if(m==0)break;l+=String.fromCharCode(m)}return l},Du=(r,s,l)=>{if(l===void 0&&(l=2147483647),2>l)return 0;l-=2;var d=s;l=l<2*r.length?l/2:r.length;for(var m=0;m<l;++m)Be[s>>1]=r.charCodeAt(m),s+=2;return Be[s>>1]=0,s-d},$u=r=>2*r.length,Bu=(r,s)=>{for(var l=0,d="";!(l>=s/4);){var m=he[r+4*l>>2];if(m==0)break;++l,65536<=m?(m-=65536,d+=String.fromCharCode(55296|m>>10,56320|m&1023)):d+=String.fromCharCode(m)}return d},Nu=(r,s,l)=>{if(l===void 0&&(l=2147483647),4>l)return 0;var d=s;l=d+l-4;for(var m=0;m<r.length;++m){var b=r.charCodeAt(m);if(55296<=b&&57343>=b){var k=r.charCodeAt(++m);b=65536+((b&1023)<<10)|k&1023}if(he[s>>2]=b,s+=4,s+4>l)break}return he[s>>2]=0,s-d},Wu=r=>{for(var s=0,l=0;l<r.length;++l){var d=r.charCodeAt(l);55296<=d&&57343>=d&&++l,s+=4}return s},Vu={};function ii(r){var s=Vu[r];return s===void 0?Fe(r):s}var si=[];function qu(r){var s=si.length;return si.push(r),s}function zu(r,s){for(var l=Array(r),d=0;d<r;++d)l[d]=pr(me[s+4*d>>2],"parameter "+d);return l}var go=[],Ki=[],Yi={},mo=()=>{if(!Ji){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:F||"./this.program"},s;for(s in Yi)Yi[s]===void 0?delete r[s]:r[s]=Yi[s];var l=[];for(s in r)l.push(`${s}=${r[s]}`);Ji=l}return Ji},Ji,oi=r=>r%4===0&&(r%100!==0||r%400===0),_o=[31,29,31,30,31,30,31,31,30,31,30,31],yo=[31,28,31,30,31,30,31,31,30,31,30,31],Hu=(r,s,l,d)=>{function m(C,B,$){for(C=typeof C=="number"?C.toString():C||"";C.length<B;)C=$[0]+C;return C}function b(C,B){return m(C,B,"0")}function k(C,B){function $(de){return 0>de?-1:0<de?1:0}var le;return(le=$(C.getFullYear()-B.getFullYear()))===0&&(le=$(C.getMonth()-B.getMonth()))===0&&(le=$(C.getDate()-B.getDate())),le}function I(C){switch(C.getDay()){case 0:return new Date(C.getFullYear()-1,11,29);case 1:return C;case 2:return new Date(C.getFullYear(),0,3);case 3:return new Date(C.getFullYear(),0,2);case 4:return new Date(C.getFullYear(),0,1);case 5:return new Date(C.getFullYear()-1,11,31);case 6:return new Date(C.getFullYear()-1,11,30)}}function R(C){var B=C.ca;for(C=new Date(new Date(C.da+1900,0,1).getTime());0<B;){var $=C.getMonth(),le=(oi(C.getFullYear())?_o:yo)[$];if(B>le-C.getDate())B-=le-C.getDate()+1,C.setDate(1),11>$?C.setMonth($+1):(C.setMonth(0),C.setFullYear(C.getFullYear()+1));else{C.setDate(C.getDate()+B);break}}return $=new Date(C.getFullYear()+1,0,4),B=I(new Date(C.getFullYear(),0,4)),$=I($),0>=k(B,C)?0>=k($,C)?C.getFullYear()+1:C.getFullYear():C.getFullYear()-1}var T=he[d+40>>2];d={wc:he[d>>2],vc:he[d+4>>2],Fa:he[d+8>>2],Sa:he[d+12>>2],Ga:he[d+16>>2],da:he[d+20>>2],R:he[d+24>>2],ca:he[d+28>>2],Rc:he[d+32>>2],uc:he[d+36>>2],xc:T&&T?Ce(Re,T):""},l=l?Ce(Re,l):"",T={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var N in T)l=l.replace(new RegExp(N,"g"),T[N]);var V="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Y="January February March April May June July August September October November December".split(" ");T={"%a":C=>V[C.R].substring(0,3),"%A":C=>V[C.R],"%b":C=>Y[C.Ga].substring(0,3),"%B":C=>Y[C.Ga],"%C":C=>b((C.da+1900)/100|0,2),"%d":C=>b(C.Sa,2),"%e":C=>m(C.Sa,2," "),"%g":C=>R(C).toString().substring(2),"%G":C=>R(C),"%H":C=>b(C.Fa,2),"%I":C=>(C=C.Fa,C==0?C=12:12<C&&(C-=12),b(C,2)),"%j":C=>{for(var B=0,$=0;$<=C.Ga-1;B+=(oi(C.da+1900)?_o:yo)[$++]);return b(C.Sa+B,3)},"%m":C=>b(C.Ga+1,2),"%M":C=>b(C.vc,2),"%n":()=>`
`,"%p":C=>0<=C.Fa&&12>C.Fa?"AM":"PM","%S":C=>b(C.wc,2),"%t":()=>"	","%u":C=>C.R||7,"%U":C=>b(Math.floor((C.ca+7-C.R)/7),2),"%V":C=>{var B=Math.floor((C.ca+7-(C.R+6)%7)/7);if(2>=(C.R+371-C.ca-2)%7&&B++,B)B==53&&($=(C.R+371-C.ca)%7,$==4||$==3&&oi(C.da)||(B=1));else{B=52;var $=(C.R+7-C.ca-1)%7;($==4||$==5&&oi(C.da%400-1))&&B++}return b(B,2)},"%w":C=>C.R,"%W":C=>b(Math.floor((C.ca+7-(C.R+6)%7)/7),2),"%y":C=>(C.da+1900).toString().substring(2),"%Y":C=>C.da+1900,"%z":C=>{C=C.uc;var B=0<=C;return C=Math.abs(C)/60,(B?"+":"-")+("0000"+(C/60*100+C%60)).slice(-4)},"%Z":C=>C.xc,"%%":()=>"%"},l=l.replace(/%%/g,"\0\0");for(N in T)l.includes(N)&&(l=l.replace(new RegExp(N,"g"),T[N](d)));return l=l.replace(/\0\0/g,"%"),N=wt(l,!1),N.length>s?0:($e.set(N,r),N.length-1)};function wo(r,s,l,d){r||(r=this),this.parent=r,this.U=r.U,this.wa=null,this.id=Au++,this.name=s,this.mode=l,this.l={},this.m={},this.za=d}Object.defineProperties(wo.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(r){r?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(r){r?this.mode|=146:this.mode&=-147}}}),Qs(),lr=Array(4096),Js(re,"/"),Tt("/tmp",16895,0),Tt("/home",16895,0),Tt("/home/web_user",16895,0),(()=>{Tt("/dev",16895,0),Ui(259,{read:()=>0,write:(d,m,b,k)=>k}),qr("/dev/null",259),ut(1280,an),ut(1536,un),qr("/dev/tty",1280),qr("/dev/tty1",1536);var r=new Uint8Array(1024),s=0,l=()=>(s===0&&(s=se(r).byteLength),r[--s]);cr("random",l),cr("urandom",l),Tt("/dev/shm",16895,0),Tt("/dev/shm/tmp",16895,0)})(),(()=>{Tt("/proc",16895,0);var r=Tt("/proc/self",16895,0);Tt("/proc/self/fd",16895,0),Js({U:()=>{var s=Hs(r,"fd",16895,73);return s.l={ka:(l,d)=>{var m=ln(+d);return l={parent:null,U:{nb:"fake"},l:{ma:()=>m.path}},l.parent=l}},s}},"/proc/self/fd")})(),Object.assign(to.prototype,{get(r){return this.M[r]},has(r){return this.M[r]!==void 0},pa(r){var s=this.ib.pop()||this.M.length;return this.M[s]=r,s},Zb(r){this.M[r]=void 0,this.ib.push(r)}}),Dn=g.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},Et.M.push({value:void 0},{value:null},{value:!0},{value:!1}),Et.h=Et.M.length,g.count_emval_handles=function(){for(var r=0,s=Et.h;s<Et.M.length;++s)Et.M[s]!==void 0&&++r;return r},ro=g.PureVirtualError=no("PureVirtualError");for(var bo=Array(256),ai=0;256>ai;++ai)bo[ai]=String.fromCharCode(ai);io=bo,g.getInheritedInstanceCount=function(){return Object.keys(Gt).length},g.getLiveInheritedInstances=function(){var r=[],s;for(s in Gt)Gt.hasOwnProperty(s)&&r.push(Gt[s]);return r},g.flushPendingDeletes=Bi,g.setDelayFunction=function(r){vr=r,fr.length&&vr&&vr(Bi)},lo=g.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},cn.prototype.isAliasOf=function(r){if(!(this instanceof cn&&r instanceof cn))return!1;var s=this.g.u.i,l=this.g.o,d=r.g.u.i;for(r=r.g.o;s.A;)l=s.na(l),s=s.A;for(;d.A;)r=d.na(r),d=d.A;return s===d&&l===r},cn.prototype.clone=function(){if(this.g.o||Vi(this),this.g.ia)return this.g.count.value+=1,this;var r=$n,s=Object,l=s.create,d=Object.getPrototypeOf(this),m=this.g;return r=r(l.call(s,d,{g:{value:{count:m.count,fa:m.fa,ia:m.ia,o:m.o,u:m.u,G:m.G,L:m.L}}})),r.g.count.value+=1,r.g.fa=!1,r},cn.prototype.delete=function(){this.g.o||Vi(this),this.g.fa&&!this.g.ia&&ue("Object already scheduled for deletion"),Kr(this),oo(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},cn.prototype.isDeleted=function(){return!this.g.o},cn.prototype.deleteLater=function(){return this.g.o||Vi(this),this.g.fa&&!this.g.ia&&ue("Object already scheduled for deletion"),fr.push(this),fr.length===1&&vr&&vr(Bi),this.g.fa=!0,this},Kt.prototype.Vb=function(r){return this.sb&&(r=this.sb(r)),r},Kt.prototype.bb=function(r){this.W&&this.W(r)},Kt.prototype.argPackAdvance=8,Kt.prototype.readValueFromPointer=mr,Kt.prototype.deleteObject=function(r){r!==null&&r.delete()},Kt.prototype.fromWireType=function(r){function s(){return this.ua?Jr(this.i.N,{u:this.nc,o:l,L:this,G:r}):Jr(this.i.N,{u:this,o:r})}var l=this.Vb(r);if(!l)return this.bb(r),null;var d=Pu(this.i,l);if(d!==void 0)return d.g.count.value===0?(d.g.o=l,d.g.G=r,d.clone()):(d=d.clone(),this.bb(r),d);if(d=this.i.Ub(l),d=uo[d],!d)return s.call(this);d=this.ta?d.Kb:d.pointerType;var m=ao(l,this.i,d.i);return m===null?s.call(this):this.ua?Jr(d.i.N,{u:d,o:m,L:this,G:r}):Jr(d.i.N,{u:d,o:m})},fo=g.UnboundTypeError=no("UnboundTypeError");var Eo={__syscall_fcntl64:function(r,s,l){dr=l;try{var d=ln(r);switch(s){case 0:var m=Ht();return 0>m?-28:Ys(d,m).X;case 1:case 2:return 0;case 3:return d.flags;case 4:return m=Ht(),d.flags|=m,0;case 5:return m=Ht(),Be[m+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return he[Ao()>>2]=28,-1;default:return-28}}catch(b){if(typeof An>"u"||b.name!=="ErrnoError")throw b;return-b.aa}},__syscall_ioctl:function(r,s,l){dr=l;try{var d=ln(r);switch(s){case 21509:return d.s?0:-59;case 21505:if(!d.s)return-59;if(d.s.V.bc){s=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var m=Ht();he[m>>2]=25856,he[m+4>>2]=5,he[m+8>>2]=191,he[m+12>>2]=35387;for(var b=0;32>b;b++)$e[m+b+17>>0]=s[b]||0}return 0;case 21510:case 21511:case 21512:return d.s?0:-59;case 21506:case 21507:case 21508:if(!d.s)return-59;if(d.s.V.cc)for(m=Ht(),s=[],b=0;32>b;b++)s.push($e[m+b+17>>0]);return 0;case 21519:return d.s?(m=Ht(),he[m>>2]=0):-59;case 21520:return d.s?-28:-59;case 21531:if(m=Ht(),!d.m.ac)throw new J(59);return d.m.ac(d,s,m);case 21523:return d.s?(d.s.V.dc&&(b=[24,80],m=Ht(),Be[m>>1]=b[0],Be[m+2>>1]=b[1]),0):-59;case 21524:return d.s?0:-59;case 21515:return d.s?0:-59;default:return-28}}catch(k){if(typeof An>"u"||k.name!=="ErrnoError")throw k;return-k.aa}},__syscall_openat:function(r,s,l,d){dr=d;try{s=s?Ce(Re,s):"";var m=s;if(m.charAt(0)==="/")s=m;else{var b=r===-100?"/":ln(r).path;if(m.length==0)throw new J(44);s=S(b+"/"+m)}var k=d?Ht():0;return zr(s,l,k).X}catch(I){if(typeof An>"u"||I.name!=="ErrnoError")throw I;return-I.aa}},_embind_create_inheriting_constructor:function(r,s,l){r=Fe(r),s=pr(s,"wrapper"),l=It(l);var d=[].slice,m=s.i,b=m.N,k=m.A.N,I=m.A.constructor;r=Gr(r,function(){m.A.rb.forEach((function(T){if(this[T]===k[T])throw new ro(`Pure virtual function ${T} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:b}),this.__construct.apply(this,d.call(arguments))}),b.__construct=function(){this===b&&ue("Pass correct 'this' to __construct");var T=I.implement.apply(void 0,[this].concat(d.call(arguments)));Kr(T);var N=T.g;T.notifyOnDestruction(),N.ia=!0,Object.defineProperties(this,{g:{value:N}}),$n(this),T=N.o,T=Ni(m,T),Gt.hasOwnProperty(T)?ue(`Tried to register registered instance: ${T}`):Gt[T]=this},b.__destruct=function(){this===b&&ue("Pass correct 'this' to __destruct"),Kr(this);var T=this.g.o;T=Ni(m,T),Gt.hasOwnProperty(T)?delete Gt[T]:ue(`Tried to unregister unregistered instance: ${T}`)},r.prototype=Object.create(b);for(var R in l)r.prototype[R]=l[R];return Rt(r)},_embind_finalize_value_object:function(r){var s=Xr[r];delete Xr[r];var l=s.Pa,d=s.W,m=s.fb,b=m.map(k=>k.Yb).concat(m.map(k=>k.rc));dt([r],b,k=>{var I={};return m.forEach((R,T)=>{var N=k[T],V=R.Wb,Y=R.Xb,C=k[T+m.length],B=R.qc,$=R.sc;I[R.Sb]={read:le=>N.fromWireType(V(Y,le)),write:(le,de)=>{var G=[];B($,le,C.toWireType(G,de)),gr(G)}}}),[{name:s.name,fromWireType:function(R){var T={},N;for(N in I)T[N]=I[N].read(R);return d(R),T},toWireType:function(R,T){for(var N in I)if(!(N in T))throw new TypeError(`Missing field: "${N}"`);var V=l();for(N in I)I[N].write(V,T[N]);return R!==null&&R.push(d,V),V},argPackAdvance:8,readValueFromPointer:mr,K:d}]})},_embind_register_bigint:function(){},_embind_register_bool:function(r,s,l,d,m){var b=Zr(l);s=Fe(s),Ut(r,{name:s,fromWireType:function(k){return!!k},toWireType:function(k,I){return I?d:m},argPackAdvance:8,readValueFromPointer:function(k){if(l===1)var I=$e;else if(l===2)I=Be;else if(l===4)I=he;else throw new TypeError("Unknown boolean type size: "+s);return this.fromWireType(I[k>>b])},K:null})},_embind_register_class:function(r,s,l,d,m,b,k,I,R,T,N,V,Y){N=Fe(N),b=Ze(m,b),I&&(I=Ze(k,I)),T&&(T=Ze(R,T)),Y=Ze(V,Y);var C=eo(N);zi(C,function(){Yt(`Cannot construct ${N} due to unbound types`,[d])}),dt([r,s,l],d?[d]:[],function(B){if(B=B[0],d)var $=B.i,le=$.N;else le=cn.prototype;B=Gr(C,function(){if(Object.getPrototypeOf(this)!==de)throw new Dn("Use 'new' to construct "+N);if(G.$===void 0)throw new Dn(N+" has no accessible constructor");var Ye=G.$[arguments.length];if(Ye===void 0)throw new Dn(`Tried to invoke ctor of ${N} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(G.$).toString()}) parameters instead!`);return Ye.apply(this,arguments)});var de=Object.create(le,{constructor:{value:B}});B.prototype=de;var G=new Iu(N,B,de,Y,$,b,I,T);G.A&&(G.A.oa===void 0&&(G.A.oa=[]),G.A.oa.push(G)),$=new Kt(N,G,!0,!1),le=new Kt(N+"*",G,!1,!1);var je=new Kt(N+" const*",G,!1,!0);return uo[r]={pointerType:le,Kb:je},co(C,B),[$,le,je]})},_embind_register_class_class_function:function(r,s,l,d,m,b,k){var I=ri(l,d);s=Fe(s),b=Ze(m,b),dt([],[r],function(R){function T(){Yt(`Cannot call ${N} due to unbound types`,I)}R=R[0];var N=`${R.name}.${s}`;s.startsWith("@@")&&(s=Symbol[s.substring(2)]);var V=R.i.constructor;return V[s]===void 0?(T.ea=l-1,V[s]=T):(qi(V,s,N),V[s].B[l-1]=T),dt([],I,function(Y){if(Y=ni(N,[Y[0],null].concat(Y.slice(1)),null,b,k),V[s].B===void 0?(Y.ea=l-1,V[s]=Y):V[s].B[l-1]=Y,R.i.oa)for(const C of R.i.oa)C.constructor.hasOwnProperty(s)||(C.constructor[s]=Y);return[]}),[]})},_embind_register_class_class_property:function(r,s,l,d,m,b,k,I){s=Fe(s),b=Ze(m,b),dt([],[r],function(R){R=R[0];var T=`${R.name}.${s}`,N={get(){Yt(`Cannot access ${T} due to unbound types`,[l])},enumerable:!0,configurable:!0};return N.set=I?()=>{Yt(`Cannot access ${T} due to unbound types`,[l])}:()=>{ue(`${T} is a read-only property`)},Object.defineProperty(R.i.constructor,s,N),dt([],[l],function(V){V=V[0];var Y={get(){return V.fromWireType(b(d))},enumerable:!0};return I&&(I=Ze(k,I),Y.set=C=>{var B=[];I(d,V.toWireType(B,C)),gr(B)}),Object.defineProperty(R.i.constructor,s,Y),[]}),[]})},_embind_register_class_constructor:function(r,s,l,d,m,b){var k=ri(s,l);m=Ze(d,m),dt([],[r],function(I){I=I[0];var R=`constructor ${I.name}`;if(I.i.$===void 0&&(I.i.$=[]),I.i.$[s-1]!==void 0)throw new Dn(`Cannot register multiple constructors with identical number of parameters (${s-1}) for class '${I.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return I.i.$[s-1]=()=>{Yt(`Cannot construct ${I.name} due to unbound types`,k)},dt([],k,function(T){return T.splice(1,0,null),I.i.$[s-1]=ni(R,T,null,m,b),[]}),[]})},_embind_register_class_function:function(r,s,l,d,m,b,k,I){var R=ri(l,d);s=Fe(s),b=Ze(m,b),dt([],[r],function(T){function N(){Yt(`Cannot call ${V} due to unbound types`,R)}T=T[0];var V=`${T.name}.${s}`;s.startsWith("@@")&&(s=Symbol[s.substring(2)]),I&&T.i.rb.push(s);var Y=T.i.N,C=Y[s];return C===void 0||C.B===void 0&&C.className!==T.name&&C.ea===l-2?(N.ea=l-2,N.className=T.name,Y[s]=N):(qi(Y,s,V),Y[s].B[l-2]=N),dt([],R,function(B){return B=ni(V,B,T,b,k),Y[s].B===void 0?(B.ea=l-2,Y[s]=B):Y[s].B[l-2]=B,[]}),[]})},_embind_register_class_property:function(r,s,l,d,m,b,k,I,R,T){s=Fe(s),m=Ze(d,m),dt([],[r],function(N){N=N[0];var V=`${N.name}.${s}`,Y={get(){Yt(`Cannot access ${V} due to unbound types`,[l,k])},enumerable:!0,configurable:!0};return Y.set=R?()=>{Yt(`Cannot access ${V} due to unbound types`,[l,k])}:()=>{ue(V+" is a read-only property")},Object.defineProperty(N.i.N,s,Y),dt([],R?[l,k]:[l],function(C){var B=C[0],$={get(){var de=vo(this,N,V+" getter");return B.fromWireType(m(b,de))},enumerable:!0};if(R){R=Ze(I,R);var le=C[1];$.set=function(de){var G=vo(this,N,V+" setter"),je=[];R(T,G,le.toWireType(je,de)),gr(je)}}return Object.defineProperty(N.i.N,s,$),[]}),[]})},_embind_register_emval:function(r,s){s=Fe(s),Ut(r,{name:s,fromWireType:function(l){var d=It(l);return Hi(l),d},toWireType:function(l,d){return Rt(d)},argPackAdvance:8,readValueFromPointer:mr,K:null})},_embind_register_enum:function(r,s,l,d){function m(){}l=Zr(l),s=Fe(s),m.values={},Ut(r,{name:s,constructor:m,fromWireType:function(b){return this.constructor.values[b]},toWireType:function(b,k){return k.value},argPackAdvance:8,readValueFromPointer:Mu(s,l,d),K:null}),zi(s,m)},_embind_register_enum_value:function(r,s,l){var d=pr(r,"enum");s=Fe(s),r=d.constructor,d=Object.create(d.constructor.prototype,{value:{value:l},constructor:{value:Gr(`${d.name}_${s}`,function(){})}}),r.values[l]=d,r[s]=d},_embind_register_float:function(r,s,l){l=Zr(l),s=Fe(s),Ut(r,{name:s,fromWireType:function(d){return d},toWireType:function(d,m){return m},argPackAdvance:8,readValueFromPointer:Lu(s,l),K:null})},_embind_register_function:function(r,s,l,d,m,b){var k=ri(s,l);r=Fe(r),m=Ze(d,m),zi(r,function(){Yt(`Cannot call ${r} due to unbound types`,k)},s-1),dt([],k,function(I){return co(r,ni(r,[I[0],null].concat(I.slice(1)),null,m,b),s-1),[]})},_embind_register_integer:function(r,s,l,d,m){s=Fe(s),m===-1&&(m=4294967295),m=Zr(l);var b=I=>I;if(d===0){var k=32-8*l;b=I=>I<<k>>>k}l=s.includes("unsigned")?function(I,R){return R>>>0}:function(I,R){return R},Ut(r,{name:s,fromWireType:b,toWireType:l,argPackAdvance:8,readValueFromPointer:Fu(s,m,d!==0),K:null})},_embind_register_memory_view:function(r,s,l){function d(b){b>>=2;var k=me;return new m(k.buffer,k[b+1],k[b])}var m=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][s];l=Fe(l),Ut(r,{name:l,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{$b:!0})},_embind_register_std_string:function(r,s){s=Fe(s);var l=s==="std::string";Ut(r,{name:s,fromWireType:function(d){var m=me[d>>2],b=d+4;if(l)for(var k=b,I=0;I<=m;++I){var R=b+I;if(I==m||Re[R]==0){if(k=k?Ce(Re,k,R-k):"",T===void 0)var T=k;else T+="\0",T+=k;k=R+1}}else{for(T=Array(m),I=0;I<m;++I)T[I]=String.fromCharCode(Re[b+I]);T=T.join("")}return Jt(d),T},toWireType:function(d,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));var b=typeof m=="string";b||m instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Int8Array||ue("Cannot pass non-string to std::string");var k=l&&b?Me(m):m.length,I=Xi(4+k+1),R=I+4;if(me[I>>2]=k,l&&b)Pt(m,Re,R,k+1);else if(b)for(b=0;b<k;++b){var T=m.charCodeAt(b);255<T&&(Jt(R),ue("String has UTF-16 code units that do not fit in 8 bits")),Re[R+b]=T}else for(b=0;b<k;++b)Re[R+b]=m[b];return d!==null&&d.push(Jt,I),I},argPackAdvance:8,readValueFromPointer:mr,K:function(d){Jt(d)}})},_embind_register_std_wstring:function(r,s,l){if(l=Fe(l),s===2)var d=Uu,m=Du,b=$u,k=()=>st,I=1;else s===4&&(d=Bu,m=Nu,b=Wu,k=()=>me,I=2);Ut(r,{name:l,fromWireType:function(R){for(var T=me[R>>2],N=k(),V,Y=R+4,C=0;C<=T;++C){var B=R+4+C*s;(C==T||N[B>>I]==0)&&(Y=d(Y,B-Y),V===void 0?V=Y:(V+="\0",V+=Y),Y=B+s)}return Jt(R),V},toWireType:function(R,T){typeof T!="string"&&ue(`Cannot pass non-string to C++ string type ${l}`);var N=b(T),V=Xi(4+N+s);return me[V>>2]=N>>I,m(T,V+4,N+s),R!==null&&R.push(Jt,V),V},argPackAdvance:8,readValueFromPointer:mr,K:function(R){Jt(R)}})},_embind_register_value_object:function(r,s,l,d,m,b){Xr[r]={name:Fe(s),Pa:Ze(l,d),W:Ze(m,b),fb:[]}},_embind_register_value_object_field:function(r,s,l,d,m,b,k,I,R,T){Xr[r].fb.push({Sb:Fe(s),Yb:l,Wb:Ze(d,m),Xb:b,rc:k,qc:Ze(I,R),sc:T})},_embind_register_void:function(r,s){s=Fe(s),Ut(r,{fc:!0,name:s,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(r,s,l){r=It(r),s=pr(s,"emval::as");var d=[],m=Rt(d);return me[l>>2]=m,s.toWireType(d,r)},_emval_call_method:function(r,s,l,d,m){r=si[r],s=It(s),l=ii(l);var b=[];return me[d>>2]=Rt(b),r(s,l,b,m)},_emval_call_void_method:function(r,s,l,d){r=si[r],s=It(s),l=ii(l),r(s,l,null,d)},_emval_decref:Hi,_emval_get_method_caller:function(r,s){var l=zu(r,s),d=l[0];s=d.name+"_$"+l.slice(1).map(function(k){return k.name}).join("_")+"$";var m=go[s];if(m!==void 0)return m;var b=Array(r-1);return m=qu((k,I,R,T)=>{for(var N=0,V=0;V<r-1;++V)b[V]=l[V+1].readValueFromPointer(T+N),N+=l[V+1].argPackAdvance;for(k=k[I].apply(k,b),V=0;V<r-1;++V)l[V+1].Nb&&l[V+1].Nb(b[V]);if(!d.fc)return d.toWireType(R,k)}),go[s]=m},_emval_get_module_property:function(r){return r=ii(r),Rt(g[r])},_emval_get_property:function(r,s){return r=It(r),s=It(s),Rt(r[s])},_emval_incref:function(r){4<r&&(Et.get(r).ub+=1)},_emval_new_array:function(){return Rt([])},_emval_new_cstring:function(r){return Rt(ii(r))},_emval_new_object:function(){return Rt({})},_emval_run_destructors:function(r){var s=It(r);gr(s),Hi(r)},_emval_set_property:function(r,s,l){r=It(r),s=It(s),l=It(l),r[s]=l},_emval_take_value:function(r,s){return r=pr(r,"_emval_take_value"),r=r.readValueFromPointer(s),Rt(r)},abort:()=>{sn("")},emscripten_asm_const_int:(r,s,l)=>{Ki.length=0;var d;for(l>>=2;d=Re[s++];)l+=d!=105&l,Ki.push(d==105?he[l]:Pe[l++>>1]),++l;return a[r].apply(null,Ki)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(r,s,l)=>Re.copyWithin(r,s,s+l),emscripten_resize_heap:r=>{var s=Re.length;if(r>>>=0,2147483648<r)return!1;for(var l=1;4>=l;l*=2){var d=s*(1+.2/l);d=Math.min(d,r+100663296);var m=Math;d=Math.max(r,d);e:{m=m.min.call(m,2147483648,d+(65536-d%65536)%65536)-Ct.buffer.byteLength+65535>>>16;try{Ct.grow(m),Ke();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},environ_get:(r,s)=>{var l=0;return mo().forEach(function(d,m){var b=s+l;for(m=me[r+4*m>>2]=b,b=0;b<d.length;++b)$e[m++>>0]=d.charCodeAt(b);$e[m>>0]=0,l+=d.length+1}),0},environ_sizes_get:(r,s)=>{var l=mo();me[r>>2]=l.length;var d=0;return l.forEach(function(m){d+=m.length+1}),me[s>>2]=d,0},fd_close:function(r){try{var s=ln(r);if(s.X===null)throw new J(8);s.Ma&&(s.Ma=null);try{s.m.close&&s.m.close(s)}catch(l){throw l}finally{Nr[s.X]=null}return s.X=null,0}catch(l){if(typeof An>"u"||l.name!=="ErrnoError")throw l;return l.aa}},fd_read:function(r,s,l,d){try{e:{var m=ln(r);r=s;for(var b,k=s=0;k<l;k++){var I=me[r>>2],R=me[r+4>>2];r+=8;var T=m,N=I,V=R,Y=b,C=$e;if(0>V||0>Y)throw new J(28);if(T.X===null)throw new J(8);if((T.flags&2097155)===1)throw new J(8);if((T.node.mode&61440)===16384)throw new J(31);if(!T.m.read)throw new J(28);var B=typeof Y<"u";if(!B)Y=T.position;else if(!T.seekable)throw new J(70);var $=T.m.read(T,C,N,V,Y);B||(T.position+=$);var le=$;if(0>le){var de=-1;break e}if(s+=le,le<R)break;typeof b<"u"&&(b+=le)}de=s}return me[d>>2]=de,0}catch(G){if(typeof An>"u"||G.name!=="ErrnoError")throw G;return G.aa}},fd_seek:function(r,s,l,d,m){s=l+2097152>>>0<4194305-!!s?(s>>>0)+4294967296*l:NaN;try{if(isNaN(s))return 61;var b=ln(r);return Xs(b,s,d),v=[b.position>>>0,(on=b.position,1<=+Math.abs(on)?0<on?+Math.floor(on/4294967296)>>>0:~~+Math.ceil((on-+(~~on>>>0))/4294967296)>>>0:0)],he[m>>2]=v[0],he[m+4>>2]=v[1],b.Ma&&s===0&&d===0&&(b.Ma=null),0}catch(k){if(typeof An>"u"||k.name!=="ErrnoError")throw k;return k.aa}},fd_write:function(r,s,l,d){try{e:{var m=ln(r);r=s;for(var b,k=s=0;k<l;k++){var I=me[r>>2],R=me[r+4>>2];r+=8;var T=m,N=I,V=R,Y=b,C=$e;if(0>V||0>Y)throw new J(28);if(T.X===null)throw new J(8);if((T.flags&2097155)===0)throw new J(8);if((T.node.mode&61440)===16384)throw new J(31);if(!T.m.write)throw new J(28);T.seekable&&T.flags&1024&&Xs(T,0,2);var B=typeof Y<"u";if(!B)Y=T.position;else if(!T.seekable)throw new J(70);var $=T.m.write(T,C,N,V,Y,void 0);B||(T.position+=$);var le=$;if(0>le){var de=-1;break e}s+=le,typeof b<"u"&&(b+=le)}de=s}return me[d>>2]=de,0}catch(G){if(typeof An>"u"||G.name!=="ErrnoError")throw G;return G.aa}},strftime_l:(r,s,l,d)=>Hu(r,s,l,d)};(function(){function r(l){if(ge=l=l.exports,Ct=ge.memory,Ke(),Le=ge.__indirect_function_table,yt.unshift(ge.__wasm_call_ctors),ot--,g.monitorRunDependencies&&g.monitorRunDependencies(ot),ot==0&&St){var d=St;St=null,d()}return l}var s={env:Eo,wasi_snapshot_preview1:Eo};if(ot++,g.monitorRunDependencies&&g.monitorRunDependencies(ot),g.instantiateWasm)try{return g.instantiateWasm(s,r)}catch(l){xe("Module.instantiateWasm callback failed with error: "+l),x(l)}return Li(s,function(l){r(l.instance)}).catch(x),{}})();var Jt=r=>(Jt=ge.free)(r),Xi=r=>(Xi=ge.malloc)(r),Ao=()=>(Ao=ge.__errno_location)(),ko=g._ma_device__on_notification_unlocked=r=>(ko=g._ma_device__on_notification_unlocked=ge.ma_device__on_notification_unlocked)(r);g._ma_malloc_emscripten=(r,s)=>(g._ma_malloc_emscripten=ge.ma_malloc_emscripten)(r,s),g._ma_free_emscripten=(r,s)=>(g._ma_free_emscripten=ge.ma_free_emscripten)(r,s);var Co=g._ma_device_process_pcm_frames_capture__webaudio=(r,s,l)=>(Co=g._ma_device_process_pcm_frames_capture__webaudio=ge.ma_device_process_pcm_frames_capture__webaudio)(r,s,l),So=g._ma_device_process_pcm_frames_playback__webaudio=(r,s,l)=>(So=g._ma_device_process_pcm_frames_playback__webaudio=ge.ma_device_process_pcm_frames_playback__webaudio)(r,s,l),Po=r=>(Po=ge.__getTypeName)(r);g.__embind_initialize_bindings=()=>(g.__embind_initialize_bindings=ge._embind_initialize_bindings)(),g.dynCall_iiji=(r,s,l,d,m)=>(g.dynCall_iiji=ge.dynCall_iiji)(r,s,l,d,m),g.dynCall_jiji=(r,s,l,d,m)=>(g.dynCall_jiji=ge.dynCall_jiji)(r,s,l,d,m),g.dynCall_iiiji=(r,s,l,d,m,b)=>(g.dynCall_iiiji=ge.dynCall_iiiji)(r,s,l,d,m,b),g.dynCall_iij=(r,s,l,d)=>(g.dynCall_iij=ge.dynCall_iij)(r,s,l,d),g.dynCall_jii=(r,s,l)=>(g.dynCall_jii=ge.dynCall_jii)(r,s,l),g.dynCall_viijii=(r,s,l,d,m,b,k)=>(g.dynCall_viijii=ge.dynCall_viijii)(r,s,l,d,m,b,k),g.dynCall_iiiiij=(r,s,l,d,m,b,k)=>(g.dynCall_iiiiij=ge.dynCall_iiiiij)(r,s,l,d,m,b,k),g.dynCall_iiiiijj=(r,s,l,d,m,b,k,I,R)=>(g.dynCall_iiiiijj=ge.dynCall_iiiiijj)(r,s,l,d,m,b,k,I,R),g.dynCall_iiiiiijj=(r,s,l,d,m,b,k,I,R,T)=>(g.dynCall_iiiiiijj=ge.dynCall_iiiiiijj)(r,s,l,d,m,b,k,I,R,T);var ui;St=function r(){ui||To(),ui||(St=r)};function To(){function r(){if(!ui&&(ui=!0,g.calledRun=!0,!rn)){if(g.noFSInit||Zs||(Zs=!0,Qs(),g.stdin=g.stdin,g.stdout=g.stdout,g.stderr=g.stderr,g.stdin?cr("stdin",g.stdin):Di("/dev/tty","/dev/stdin"),g.stdout?cr("stdout",null,g.stdout):Di("/dev/tty","/dev/stdout"),g.stderr?cr("stderr",null,g.stderr):Di("/dev/tty1","/dev/stderr"),zr("/dev/stdin",0),zr("/dev/stdout",1),zr("/dev/stderr",1)),Vs=!1,h(yt),P(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;){var s=g.postRun.shift();qt.unshift(s)}h(qt)}}if(!(0<ot)){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)bn();h(_t),0<ot||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),r()},1)):r())}}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return To(),A.ready}})();const y=_},c=>{c.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.31.2","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(c,f,p)=>{p.r(f),p.d(f,{Animation:()=>_.Animation});var _=p(4)},(c,f,p)=>{p.r(f),p.d(f,{Animation:()=>_});var _=function(){function y(E,A,g,P){this.animation=E,this.artboard=A,this.playing=P,this.loopCount=0,this.scrubTo=null,this.instance=new g.LinearAnimationInstance(E,A)}return Object.defineProperty(y.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"time",{get:function(){return this.instance.time},set:function(E){this.instance.time=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),y.prototype.advance=function(E){this.scrubTo===null?this.instance.advance(E):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},y.prototype.apply=function(E){this.instance.apply(E)},y.prototype.cleanup=function(){this.instance.delete()},y}()},(c,f,p)=>{p.r(f),p.d(f,{AudioAssetWrapper:()=>E.AudioAssetWrapper,AudioWrapper:()=>E.AudioWrapper,BLANK_URL:()=>y.BLANK_URL,CustomFileAssetLoaderWrapper:()=>E.CustomFileAssetLoaderWrapper,FileAssetWrapper:()=>E.FileAssetWrapper,Finalizable:()=>E.Finalizable,FontAssetWrapper:()=>E.FontAssetWrapper,FontWrapper:()=>E.FontWrapper,ImageAssetWrapper:()=>E.ImageAssetWrapper,ImageWrapper:()=>E.ImageWrapper,finalizationRegistry:()=>E.finalizationRegistry,registerTouchInteractions:()=>_.registerTouchInteractions,sanitizeUrl:()=>y.sanitizeUrl});var _=p(6),y=p(7),E=p(8)},(c,f,p)=>{p.r(f),p.d(f,{registerTouchInteractions:()=>E});var _=void 0,y=function(A,g){var P,x;return["touchstart","touchmove"].indexOf(A.type)>-1&&(!((P=A.touches)===null||P===void 0)&&P.length)?(g||A.preventDefault(),{clientX:A.touches[0].clientX,clientY:A.touches[0].clientY}):A.type==="touchend"&&(!((x=A.changedTouches)===null||x===void 0)&&x.length)?{clientX:A.changedTouches[0].clientX,clientY:A.changedTouches[0].clientY}:{clientX:A.clientX,clientY:A.clientY}},E=function(A){var g=A.canvas,P=A.artboard,x=A.stateMachines,M=x===void 0?[]:x,H=A.renderer,z=A.rive,L=A.fit,W=A.alignment,ee=A.isTouchScrollEnabled,j=ee===void 0?!1:ee,F=A.layoutScaleFactor,X=F===void 0?1:F;if(!g||!M.length||!H||!z||!P||typeof window>"u")return null;var Q=null,ae=!1,q=function(Ie){if(ae&&Ie instanceof MouseEvent){Ie.type=="mouseup"&&(ae=!1);return}ae=j&&Ie.type==="touchend"&&Q==="touchstart",Q=Ie.type;var xe=Ie.currentTarget.getBoundingClientRect(),Ue=y(Ie,j),Ct=Ue.clientX,ge=Ue.clientY;if(!(!Ct&&!ge)){var rn=Ct-xe.left,$e=ge-xe.top,Re=z.computeAlignment(L,W,{minX:0,minY:0,maxX:xe.width,maxY:xe.height},P.bounds,X),Be=new z.Mat2D;Re.invert(Be);var st=new z.Vec2D(rn,$e),he=z.mapXY(Be,st),me=he.x(),ct=he.y();switch(he.delete(),Be.delete(),st.delete(),Re.delete(),Ie.type){case"mouseout":for(var Pe=0,Ke=M;Pe<Ke.length;Pe++){var Le=Ke[Pe];Le.pointerMove(me,ct)}break;case"touchmove":case"mouseover":case"mousemove":{for(var _t=0,yt=M;_t<yt.length;_t++){var Le=yt[_t];Le.pointerMove(me,ct)}break}case"touchstart":case"mousedown":{for(var qt=0,bn=M;qt<bn.length;qt++){var Le=bn[qt];Le.pointerDown(me,ct)}break}case"touchend":case"mouseup":{for(var ot=0,St=M;ot<St.length;ot++){var Le=St[ot];Le.pointerUp(me,ct)}break}}}},ne=q.bind(_);return g.addEventListener("mouseover",ne),g.addEventListener("mouseout",ne),g.addEventListener("mousemove",ne),g.addEventListener("mousedown",ne),g.addEventListener("mouseup",ne),g.addEventListener("touchmove",ne,{passive:j}),g.addEventListener("touchstart",ne,{passive:j}),g.addEventListener("touchend",ne),function(){g.removeEventListener("mouseover",ne),g.removeEventListener("mouseout",ne),g.removeEventListener("mousemove",ne),g.removeEventListener("mousedown",ne),g.removeEventListener("mouseup",ne),g.removeEventListener("touchmove",ne),g.removeEventListener("touchstart",ne),g.removeEventListener("touchend",ne)}}},(c,f,p)=>{p.r(f),p.d(f,{BLANK_URL:()=>x,sanitizeUrl:()=>z});var _=/^([^\w]*)(javascript|data|vbscript)/im,y=/&#(\w+)(^\w|;)?/g,E=/&(newline|tab);/gi,A=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,g=/^.+(:|&colon;)/gim,P=[".","/"],x="about:blank";function M(L){return P.indexOf(L[0])>-1}function H(L){var W=L.replace(A,"");return W.replace(y,function(ee,j){return String.fromCharCode(j)})}function z(L){if(!L)return x;var W=H(L).replace(E,"").replace(A,"").trim();if(!W)return x;if(M(W))return W;var ee=W.match(g);if(!ee)return W;var j=ee[0];return _.test(j)?x:W}},(c,f,p)=>{p.r(f),p.d(f,{AudioAssetWrapper:()=>H,AudioWrapper:()=>A,CustomFileAssetLoaderWrapper:()=>P,FileAssetWrapper:()=>x,Finalizable:()=>y,FontAssetWrapper:()=>z,FontWrapper:()=>g,ImageAssetWrapper:()=>M,ImageWrapper:()=>E,finalizationRegistry:()=>ee});var _=function(){var j=function(F,X){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ae){Q.__proto__=ae}||function(Q,ae){for(var q in ae)Object.prototype.hasOwnProperty.call(ae,q)&&(Q[q]=ae[q])},j(F,X)};return function(F,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");j(F,X);function Q(){this.constructor=F}F.prototype=X===null?Object.create(X):(Q.prototype=X.prototype,new Q)}}(),y=function(){function j(){this.selfUnref=!1}return j}(),E=function(j){_(F,j);function F(X){var Q=j.call(this)||this;return Q._nativeImage=X,Q}return Object.defineProperty(F.prototype,"nativeImage",{get:function(){return this._nativeImage},enumerable:!1,configurable:!0}),F.prototype.unref=function(){this.selfUnref&&this._nativeImage.unref()},F}(y),A=function(j){_(F,j);function F(X){var Q=j.call(this)||this;return Q._nativeAudio=X,Q}return Object.defineProperty(F.prototype,"nativeAudio",{get:function(){return this._nativeAudio},enumerable:!1,configurable:!0}),F.prototype.unref=function(){this.selfUnref&&this._nativeAudio.unref()},F}(y),g=function(j){_(F,j);function F(X){var Q=j.call(this)||this;return Q._nativeFont=X,Q}return Object.defineProperty(F.prototype,"nativeFont",{get:function(){return this._nativeFont},enumerable:!1,configurable:!0}),F.prototype.unref=function(){this.selfUnref&&this._nativeFont.unref()},F}(y),P=function(){function j(F,X){this._assetLoaderCallback=X,this.assetLoader=new F.CustomFileAssetLoader({loadContents:this.loadContents.bind(this)})}return j.prototype.loadContents=function(F,X){var Q;return F.isImage?Q=new M(F):F.isAudio?Q=new H(F):F.isFont&&(Q=new z(F)),this._assetLoaderCallback(Q,X)},j}(),x=function(){function j(F){this._nativeFileAsset=F}return j.prototype.decode=function(F){this._nativeFileAsset.decode(F)},Object.defineProperty(j.prototype,"name",{get:function(){return this._nativeFileAsset.name},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"fileExtension",{get:function(){return this._nativeFileAsset.fileExtension},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"uniqueFilename",{get:function(){return this._nativeFileAsset.uniqueFilename},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isAudio",{get:function(){return this._nativeFileAsset.isAudio},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isImage",{get:function(){return this._nativeFileAsset.isImage},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isFont",{get:function(){return this._nativeFileAsset.isFont},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"cdnUuid",{get:function(){return this._nativeFileAsset.cdnUuid},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"nativeFileAsset",{get:function(){return this._nativeFileAsset},enumerable:!1,configurable:!0}),j}(),M=function(j){_(F,j);function F(){return j!==null&&j.apply(this,arguments)||this}return F.prototype.setRenderImage=function(X){this._nativeFileAsset.setRenderImage(X.nativeImage)},F}(x),H=function(j){_(F,j);function F(){return j!==null&&j.apply(this,arguments)||this}return F.prototype.setAudioSource=function(X){this._nativeFileAsset.setAudioSource(X.nativeAudio)},F}(x),z=function(j){_(F,j);function F(){return j!==null&&j.apply(this,arguments)||this}return F.prototype.setFont=function(X){this._nativeFileAsset.setFont(X.nativeFont)},F}(x),L=function(){function j(F){}return j.prototype.register=function(F){F.selfUnref=!0},j.prototype.unregister=function(F){},j}(),W=typeof FinalizationRegistry<"u"?FinalizationRegistry:L,ee=new W(function(j){j.unref()})}],i={};function o(c){var f=i[c];if(f!==void 0)return f.exports;var p=i[c]={exports:{}};return t[c](p,p.exports,o),p.exports}o.d=(c,f)=>{for(var p in f)o.o(f,p)&&!o.o(c,p)&&Object.defineProperty(c,p,{enumerable:!0,get:f[p]})},o.o=(c,f)=>Object.prototype.hasOwnProperty.call(c,f),o.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var u={};return(()=>{o.r(u),o.d(u,{Alignment:()=>z,DataEnum:()=>ct,EventType:()=>q,Fit:()=>H,Layout:()=>L,LoopType:()=>ne,Rive:()=>he,RiveEventType:()=>F,RiveFile:()=>st,RuntimeLoader:()=>W,StateMachineInput:()=>j,StateMachineInputType:()=>ee,Testing:()=>Mi,ViewModel:()=>me,ViewModelInstance:()=>Ke,ViewModelInstanceArtboard:()=>zt,ViewModelInstanceAssetImage:()=>ur,ViewModelInstanceBoolean:()=>qt,ViewModelInstanceColor:()=>sn,ViewModelInstanceEnum:()=>ot,ViewModelInstanceList:()=>St,ViewModelInstanceNumber:()=>yt,ViewModelInstanceString:()=>_t,ViewModelInstanceTrigger:()=>bn,ViewModelInstanceValue:()=>Le,decodeAudio:()=>Br,decodeFont:()=>on,decodeImage:()=>Li});var c=o(1),f=o(2),p=o(3),_=o(5),y=function(){var v=function(a,h){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,S){w.__proto__=S}||function(w,S){for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(w[O]=S[O])},v(a,h)};return function(a,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");v(a,h);function w(){this.constructor=a}a.prototype=h===null?Object.create(h):(w.prototype=h.prototype,new w)}}(),E=function(){return E=Object.assign||function(v){for(var a,h=1,w=arguments.length;h<w;h++){a=arguments[h];for(var S in a)Object.prototype.hasOwnProperty.call(a,S)&&(v[S]=a[S])}return v},E.apply(this,arguments)},A=function(v,a,h,w){function S(O){return O instanceof h?O:new h(function(D){D(O)})}return new(h||(h=Promise))(function(O,D){function te(fe){try{Z(w.next(fe))}catch(Ce){D(Ce)}}function se(fe){try{Z(w.throw(fe))}catch(Ce){D(Ce)}}function Z(fe){fe.done?O(fe.value):S(fe.value).then(te,se)}Z((w=w.apply(v,a||[])).next())})},g=function(v,a){var h={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},w,S,O,D=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return D.next=te(0),D.throw=te(1),D.return=te(2),typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function te(Z){return function(fe){return se([Z,fe])}}function se(Z){if(w)throw new TypeError("Generator is already executing.");for(;D&&(D=0,Z[0]&&(h=0)),h;)try{if(w=1,S&&(O=Z[0]&2?S.return:Z[0]?S.throw||((O=S.return)&&O.call(S),0):S.next)&&!(O=O.call(S,Z[1])).done)return O;switch(S=0,O&&(Z=[Z[0]&2,O.value]),Z[0]){case 0:case 1:O=Z;break;case 4:return h.label++,{value:Z[1],done:!1};case 5:h.label++,S=Z[1],Z=[0];continue;case 7:Z=h.ops.pop(),h.trys.pop();continue;default:if(O=h.trys,!(O=O.length>0&&O[O.length-1])&&(Z[0]===6||Z[0]===2)){h=0;continue}if(Z[0]===3&&(!O||Z[1]>O[0]&&Z[1]<O[3])){h.label=Z[1];break}if(Z[0]===6&&h.label<O[1]){h.label=O[1],O=Z;break}if(O&&h.label<O[2]){h.label=O[2],h.ops.push(Z);break}O[2]&&h.ops.pop(),h.trys.pop();continue}Z=a.call(v,h)}catch(fe){Z=[6,fe],S=0}finally{w=O=0}if(Z[0]&5)throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}},P=function(v,a,h){if(h||arguments.length===2)for(var w=0,S=a.length,O;w<S;w++)(O||!(w in a))&&(O||(O=Array.prototype.slice.call(a,0,w)),O[w]=a[w]);return v.concat(O||Array.prototype.slice.call(a))},x=function(v){y(a,v);function a(){var h=v!==null&&v.apply(this,arguments)||this;return h.isHandledError=!0,h}return a}(Error),M=function(v){return v&&v.isHandledError?v.message:"Problem loading file; may be corrupt!"},H;(function(v){v.Cover="cover",v.Contain="contain",v.Fill="fill",v.FitWidth="fitWidth",v.FitHeight="fitHeight",v.None="none",v.ScaleDown="scaleDown",v.Layout="layout"})(H||(H={}));var z;(function(v){v.Center="center",v.TopLeft="topLeft",v.TopCenter="topCenter",v.TopRight="topRight",v.CenterLeft="centerLeft",v.CenterRight="centerRight",v.BottomLeft="bottomLeft",v.BottomCenter="bottomCenter",v.BottomRight="bottomRight"})(z||(z={}));var L=function(){function v(a){var h,w,S,O,D,te,se;this.fit=(h=a?.fit)!==null&&h!==void 0?h:H.Contain,this.alignment=(w=a?.alignment)!==null&&w!==void 0?w:z.Center,this.layoutScaleFactor=(S=a?.layoutScaleFactor)!==null&&S!==void 0?S:1,this.minX=(O=a?.minX)!==null&&O!==void 0?O:0,this.minY=(D=a?.minY)!==null&&D!==void 0?D:0,this.maxX=(te=a?.maxX)!==null&&te!==void 0?te:0,this.maxY=(se=a?.maxY)!==null&&se!==void 0?se:0}return v.new=function(a){var h=a.fit,w=a.alignment,S=a.minX,O=a.minY,D=a.maxX,te=a.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new v({fit:h,alignment:w,minX:S,minY:O,maxX:D,maxY:te})},v.prototype.copyWith=function(a){var h=a.fit,w=a.alignment,S=a.layoutScaleFactor,O=a.minX,D=a.minY,te=a.maxX,se=a.maxY;return new v({fit:h??this.fit,alignment:w??this.alignment,layoutScaleFactor:S??this.layoutScaleFactor,minX:O??this.minX,minY:D??this.minY,maxX:te??this.maxX,maxY:se??this.maxY})},v.prototype.runtimeFit=function(a){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var h;return this.fit===H.Cover?h=a.Fit.cover:this.fit===H.Contain?h=a.Fit.contain:this.fit===H.Fill?h=a.Fit.fill:this.fit===H.FitWidth?h=a.Fit.fitWidth:this.fit===H.FitHeight?h=a.Fit.fitHeight:this.fit===H.ScaleDown?h=a.Fit.scaleDown:this.fit===H.Layout?h=a.Fit.layout:h=a.Fit.none,this.cachedRuntimeFit=h,h},v.prototype.runtimeAlignment=function(a){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var h;return this.alignment===z.TopLeft?h=a.Alignment.topLeft:this.alignment===z.TopCenter?h=a.Alignment.topCenter:this.alignment===z.TopRight?h=a.Alignment.topRight:this.alignment===z.CenterLeft?h=a.Alignment.centerLeft:this.alignment===z.CenterRight?h=a.Alignment.centerRight:this.alignment===z.BottomLeft?h=a.Alignment.bottomLeft:this.alignment===z.BottomCenter?h=a.Alignment.bottomCenter:this.alignment===z.BottomRight?h=a.Alignment.bottomRight:h=a.Alignment.center,this.cachedRuntimeAlignment=h,h},v}(),W=function(){function v(){}return v.loadRuntime=function(){c.default({locateFile:function(){return v.wasmURL}}).then(function(a){var h;for(v.runtime=a;v.callBackQueue.length>0;)(h=v.callBackQueue.shift())===null||h===void 0||h(v.runtime)}).catch(function(a){var h={message:a?.message||"Unknown error",type:a?.name||"Error",wasmError:a instanceof WebAssembly.CompileError||a instanceof WebAssembly.RuntimeError,originalError:a};console.debug("Rive WASM load error details:",h);var w="https://cdn.jsdelivr.net/npm/".concat(f.name,"@").concat(f.version,"/rive_fallback.wasm");if(v.wasmURL.toLowerCase()!==w)console.warn("Failed to load WASM from ".concat(v.wasmURL," (").concat(h.message,"), trying jsdelivr as a backup")),v.setWasmUrl(w),v.loadRuntime();else{var S=["Could not load Rive WASM file from ".concat(v.wasmURL," or ").concat(w,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(h.type),"- Message: ".concat(h.message),"- WebAssembly-specific error: ".concat(h.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(S)}})},v.getInstance=function(a){v.isLoading||(v.isLoading=!0,v.loadRuntime()),v.runtime?a(v.runtime):v.callBackQueue.push(a)},v.awaitInstance=function(){return new Promise(function(a){return v.getInstance(function(h){return a(h)})})},v.setWasmUrl=function(a){v.wasmURL=a},v.getWasmUrl=function(){return v.wasmURL},v.isLoading=!1,v.callBackQueue=[],v.wasmURL="https://unpkg.com/".concat(f.name,"@").concat(f.version,"/rive.wasm"),v}(),ee;(function(v){v[v.Number=56]="Number",v[v.Trigger=58]="Trigger",v[v.Boolean=59]="Boolean"})(ee||(ee={}));var j=function(){function v(a,h){this.type=a,this.runtimeInput=h}return Object.defineProperty(v.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(a){this.runtimeInput.value=a},enumerable:!1,configurable:!0}),v.prototype.fire=function(){this.type===ee.Trigger&&this.runtimeInput.fire()},v.prototype.delete=function(){this.runtimeInput=null},v}(),F;(function(v){v[v.General=128]="General",v[v.OpenUrl=131]="OpenUrl"})(F||(F={}));var X=function(){function v(a){this.nativeArtboard=a}return v}(),Q=function(){function v(a,h,w,S){this.stateMachine=a,this.playing=w,this.artboard=S,this.inputs=[],this.instance=new h.StateMachineInstance(a,S),this.initInputs(h)}return Object.defineProperty(v.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"statesChanged",{get:function(){for(var a=[],h=0;h<this.instance.stateChangedCount();h++)a.push(this.instance.stateChangedNameByIndex(h));return a},enumerable:!1,configurable:!0}),v.prototype.advance=function(a){this.instance.advance(a)},v.prototype.advanceAndApply=function(a){this.instance.advanceAndApply(a)},v.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},v.prototype.reportedEventAt=function(a){return this.instance.reportedEventAt(a)},v.prototype.initInputs=function(a){for(var h=0;h<this.instance.inputCount();h++){var w=this.instance.input(h);this.inputs.push(this.mapRuntimeInput(w,a))}},v.prototype.mapRuntimeInput=function(a,h){if(a.type===h.SMIInput.bool)return new j(ee.Boolean,a.asBool());if(a.type===h.SMIInput.number)return new j(ee.Number,a.asNumber());if(a.type===h.SMIInput.trigger)return new j(ee.Trigger,a.asTrigger())},v.prototype.cleanup=function(){this.inputs.forEach(function(a){a.delete()}),this.inputs.length=0,this.instance.delete()},v.prototype.bindViewModelInstance=function(a){a.runtimeInstance!=null&&this.instance.bindViewModelInstance(a.runtimeInstance)},v}(),ae=function(){function v(a,h,w,S,O){S===void 0&&(S=[]),O===void 0&&(O=[]),this.runtime=a,this.artboard=h,this.eventManager=w,this.animations=S,this.stateMachines=O}return v.prototype.add=function(a,h,w){if(w===void 0&&(w=!0),a=ht(a),a.length===0)this.animations.forEach(function(Me){return Me.playing=h}),this.stateMachines.forEach(function(Me){return Me.playing=h});else for(var S=this.animations.map(function(Me){return Me.name}),O=this.stateMachines.map(function(Me){return Me.name}),D=0;D<a.length;D++){var te=S.indexOf(a[D]),se=O.indexOf(a[D]);if(te>=0||se>=0)te>=0?this.animations[te].playing=h:this.stateMachines[se].playing=h;else{var Z=this.artboard.animationByName(a[D]);if(Z){var fe=new p.Animation(Z,this.artboard,this.runtime,h);fe.advance(0),fe.apply(1),this.animations.push(fe)}else{var Ce=this.artboard.stateMachineByName(a[D]);if(Ce){var We=new Q(Ce,this.runtime,h,this.artboard);this.stateMachines.push(We)}}}}return w&&(h?this.eventManager.fire({type:q.Play,data:this.playing}):this.eventManager.fire({type:q.Pause,data:this.paused})),h?this.playing:this.paused},v.prototype.initLinearAnimations=function(a,h){for(var w=this.animations.map(function(se){return se.name}),S=0;S<a.length;S++){var O=w.indexOf(a[S]);if(O>=0)this.animations[O].playing=h;else{var D=this.artboard.animationByName(a[S]);if(D){var te=new p.Animation(D,this.artboard,this.runtime,h);te.advance(0),te.apply(1),this.animations.push(te)}else console.error("Animation with name ".concat(a[S]," not found."))}}},v.prototype.initStateMachines=function(a,h){for(var w=this.stateMachines.map(function(se){return se.name}),S=0;S<a.length;S++){var O=w.indexOf(a[S]);if(O>=0)this.stateMachines[O].playing=h;else{var D=this.artboard.stateMachineByName(a[S]);if(D){var te=new Q(D,this.runtime,h,this.artboard);this.stateMachines.push(te),h||te.advanceAndApply(0)}else console.warn("State Machine with name ".concat(a[S]," not found.")),this.initLinearAnimations([a[S]],h)}}},v.prototype.play=function(a){return this.add(a,!0)},v.prototype.pause=function(a){return this.add(a,!1)},v.prototype.scrub=function(a,h){var w=this.animations.filter(function(S){return a.includes(S.name)});return w.forEach(function(S){return S.scrubTo=h}),w.map(function(S){return S.name})},Object.defineProperty(v.prototype,"playing",{get:function(){return this.animations.filter(function(a){return a.playing}).map(function(a){return a.name}).concat(this.stateMachines.filter(function(a){return a.playing}).map(function(a){return a.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"paused",{get:function(){return this.animations.filter(function(a){return!a.playing}).map(function(a){return a.name}).concat(this.stateMachines.filter(function(a){return!a.playing}).map(function(a){return a.name}))},enumerable:!1,configurable:!0}),v.prototype.stop=function(a){var h=this;a=ht(a);var w=[];if(a.length===0)w=this.animations.map(function(D){return D.name}).concat(this.stateMachines.map(function(D){return D.name})),this.animations.forEach(function(D){return D.cleanup()}),this.stateMachines.forEach(function(D){return D.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var S=this.animations.filter(function(D){return a.includes(D.name)});S.forEach(function(D){D.cleanup(),h.animations.splice(h.animations.indexOf(D),1)});var O=this.stateMachines.filter(function(D){return a.includes(D.name)});O.forEach(function(D){D.cleanup(),h.stateMachines.splice(h.stateMachines.indexOf(D),1)}),w=S.map(function(D){return D.name}).concat(O.map(function(D){return D.name}))}return this.eventManager.fire({type:q.Stop,data:w}),w},Object.defineProperty(v.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(a,h){return a||h.playing},!1)||this.stateMachines.reduce(function(a,h){return a||h.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),v.prototype.atLeastOne=function(a,h){h===void 0&&(h=!0);var w;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([w=this.artboard.animationByIndex(0).name],a,h):this.artboard.stateMachineCount()>0&&this.add([w=this.artboard.stateMachineByIndex(0).name],a,h)),w},v.prototype.handleLooping=function(){for(var a=0,h=this.animations.filter(function(S){return S.playing});a<h.length;a++){var w=h[a];w.loopValue===0&&w.loopCount?(w.loopCount=0,this.stop(w.name)):w.loopValue===1&&w.loopCount?(this.eventManager.fire({type:q.Loop,data:{animation:w.name,type:ne.Loop}}),w.loopCount=0):w.loopValue===2&&w.loopCount>1&&(this.eventManager.fire({type:q.Loop,data:{animation:w.name,type:ne.PingPong}}),w.loopCount=0)}},v.prototype.handleStateChanges=function(){for(var a=[],h=0,w=this.stateMachines.filter(function(O){return O.playing});h<w.length;h++){var S=w[h];a.push.apply(a,S.statesChanged)}a.length>0&&this.eventManager.fire({type:q.StateChange,data:a})},v.prototype.handleAdvancing=function(a){this.eventManager.fire({type:q.Advance,data:a})},v}(),q;(function(v){v.Load="load",v.LoadError="loaderror",v.Play="play",v.Pause="pause",v.Stop="stop",v.Loop="loop",v.Draw="draw",v.Advance="advance",v.StateChange="statechange",v.RiveEvent="riveevent",v.AudioStatusChange="audiostatuschange"})(q||(q={}));var ne;(function(v){v.OneShot="oneshot",v.Loop="loop",v.PingPong="pingpong"})(ne||(ne={}));var Ie=function(){function v(a){a===void 0&&(a=[]),this.listeners=a}return v.prototype.getListeners=function(a){return this.listeners.filter(function(h){return h.type===a})},v.prototype.add=function(a){this.listeners.includes(a)||this.listeners.push(a)},v.prototype.remove=function(a){for(var h=0;h<this.listeners.length;h++){var w=this.listeners[h];if(w.type===a.type&&w.callback===a.callback){this.listeners.splice(h,1);break}}},v.prototype.removeAll=function(a){var h=this;a?this.listeners.filter(function(w){return w.type===a}).forEach(function(w){return h.remove(w)}):this.listeners.splice(0,this.listeners.length)},v.prototype.fire=function(a){var h=this.getListeners(a.type);h.forEach(function(w){return w.callback(a)})},v}(),xe=function(){function v(a){this.eventManager=a,this.queue=[]}return v.prototype.add=function(a){this.queue.push(a)},v.prototype.process=function(){for(;this.queue.length>0;){var a=this.queue.shift();a?.action&&a.action(),a?.event&&this.eventManager.fire(a.event)}},v}(),Ue;(function(v){v[v.AVAILABLE=0]="AVAILABLE",v[v.UNAVAILABLE=1]="UNAVAILABLE"})(Ue||(Ue={}));var Ct=function(v){y(a,v);function a(){var h=v!==null&&v.apply(this,arguments)||this;return h._started=!1,h._enabled=!1,h._status=Ue.UNAVAILABLE,h}return a.prototype.delay=function(h){return A(this,void 0,void 0,function(){return g(this,function(w){return[2,new Promise(function(S){return setTimeout(S,h)})]})})},a.prototype.timeout=function(){return A(this,void 0,void 0,function(){return g(this,function(h){return[2,new Promise(function(w,S){return setTimeout(S,50)})]})})},a.prototype.reportToListeners=function(){this.fire({type:q.AudioStatusChange}),this.removeAll()},a.prototype.enableAudio=function(){return A(this,void 0,void 0,function(){return g(this,function(h){return this._enabled||(this._enabled=!0,this._status=Ue.AVAILABLE,this.reportToListeners()),[2]})})},a.prototype.testAudio=function(){return A(this,void 0,void 0,function(){return g(this,function(h){switch(h.label){case 0:if(!(this._status===Ue.UNAVAILABLE&&this._audioContext!==null))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return h.sent(),this.enableAudio(),[3,4];case 3:return h.sent(),[3,4];case 4:return[2]}})})},a.prototype._establishAudio=function(){return A(this,void 0,void 0,function(){return g(this,function(h){switch(h.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window>"u"?(this.enableAudio(),[3,5]):[3,1]);case 1:this._audioContext=new AudioContext,this.listenForUserAction(),h.label=2;case 2:return this._status!==Ue.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return h.sent(),[4,this.delay(1e3)];case 4:return h.sent(),[3,2];case 5:return[2]}})})},a.prototype.listenForUserAction=function(){var h=this,w=function(){return A(h,void 0,void 0,function(){return g(this,function(S){return this.enableAudio(),[2]})})};document.addEventListener("pointerdown",w,{once:!0})},a.prototype.establishAudio=function(){return A(this,void 0,void 0,function(){return g(this,function(h){return this._establishAudio(),[2]})})},Object.defineProperty(a.prototype,"systemVolume",{get:function(){return this._status===Ue.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),a}(Ie),ge=new Ct,rn=function(){function v(){}return v.prototype.observe=function(){},v.prototype.unobserve=function(){},v.prototype.disconnect=function(){},v}(),$e=globalThis.ResizeObserver||rn,Re=function(){function v(){var a=this;this._elementsMap=new Map,this._onObservedEntry=function(h){var w=a._elementsMap.get(h.target);w!==null?w.onResize(h.target.clientWidth==0||h.target.clientHeight==0):a._resizeObserver.unobserve(h.target)},this._onObserved=function(h){h.forEach(a._onObservedEntry)},this._resizeObserver=new $e(this._onObserved)}return v.prototype.add=function(a,h){var w={onResize:h,element:a};return this._elementsMap.set(a,w),this._resizeObserver.observe(a),w},v.prototype.remove=function(a){this._resizeObserver.unobserve(a.element),this._elementsMap.delete(a.element)},v}(),Be=new Re,st=function(){function v(a){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=a.src,this.buffer=a.buffer,a.assetLoader&&(this.assetLoader=a.assetLoader),this.enableRiveAssetCDN=typeof a.enableRiveAssetCDN=="boolean"?a.enableRiveAssetCDN:!0,this.eventManager=new Ie,a.onLoad&&this.on(q.Load,a.onLoad),a.onLoadError&&this.on(q.LoadError,a.onLoadError)}return v.prototype.initData=function(){return A(this,void 0,void 0,function(){var a,h,w,S,O;return g(this,function(D){switch(D.label){case 0:return this.src?(a=this,[4,$r(this.src)]):[3,2];case 1:a.buffer=D.sent(),D.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(w=new _.CustomFileAssetLoaderWrapper(this.runtime,this.assetLoader),h=w.assetLoader),S=this,[4,this.runtime.load(new Uint8Array(this.buffer),h,this.enableRiveAssetCDN)]);case 3:return S.file=D.sent(),this.destroyed?((O=this.file)===null||O===void 0||O.delete(),this.file=null,[2]):(this.file!==null?this.eventManager.fire({type:q.Load,data:this}):this.fireLoadError(v.fileLoadErrorMessage),[2])}})})},v.prototype.init=function(){return A(this,void 0,void 0,function(){var a,h;return g(this,function(w){switch(w.label){case 0:if(!this.src&&!this.buffer)return this.fireLoadError(v.missingErrorMessage),[2];w.label=1;case 1:return w.trys.push([1,4,,5]),a=this,[4,W.awaitInstance()];case 2:return a.runtime=w.sent(),this.destroyed?[2]:[4,this.initData()];case 3:return w.sent(),[3,5];case 4:return h=w.sent(),this.fireLoadError(h instanceof Error?h.message:v.fileLoadErrorMessage),[3,5];case 5:return[2]}})})},v.prototype.fireLoadError=function(a){throw this.eventManager.fire({type:q.LoadError,data:a}),new Error(a)},v.prototype.on=function(a,h){this.eventManager.add({type:a,callback:h})},v.prototype.off=function(a,h){this.eventManager.remove({type:a,callback:h})},v.prototype.cleanup=function(){var a;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(a=this.file)===null||a===void 0||a.delete(),this.file=null,this.destroyed=!0)},v.prototype.removeAllRiveEventListeners=function(a){this.eventManager.removeAll(a)},v.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},v.prototype.destroyIfUnused=function(){this.referenceCount<=0&&this.cleanup()},v.prototype.getArtboard=function(a){var h=this.file.artboardByName(a);return h!=null?new X(h):null},v.missingErrorMessage="Rive source file or data buffer required",v.fileLoadErrorMessage="The file failed to load",v}(),he=function(){function v(a){var h=this,w;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this._viewModelInstance=null,this._dataEnums=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(S){var O=h._hasZeroSize!==S;h._hasZeroSize=S,S?(!h._layout.maxX||!h._layout.maxY)&&h.resizeToCanvas():O&&h.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=a.canvas,a.canvas.constructor===HTMLCanvasElement&&(this._observed=Be.add(this.canvas,this.onCanvasResize)),this.src=a.src,this.buffer=a.buffer,this.riveFile=a.riveFile,this.layout=(w=a.layout)!==null&&w!==void 0?w:new L,this.shouldDisableRiveListeners=!!a.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!a.isTouchScrollEnabled,this.automaticallyHandleEvents=!!a.automaticallyHandleEvents,this.enableRiveAssetCDN=a.enableRiveAssetCDN===void 0?!0:a.enableRiveAssetCDN,this.eventManager=new Ie,a.onLoad&&this.on(q.Load,a.onLoad),a.onLoadError&&this.on(q.LoadError,a.onLoadError),a.onPlay&&this.on(q.Play,a.onPlay),a.onPause&&this.on(q.Pause,a.onPause),a.onStop&&this.on(q.Stop,a.onStop),a.onLoop&&this.on(q.Loop,a.onLoop),a.onStateChange&&this.on(q.StateChange,a.onStateChange),a.onAdvance&&this.on(q.Advance,a.onAdvance),a.onload&&!a.onLoad&&this.on(q.Load,a.onload),a.onloaderror&&!a.onLoadError&&this.on(q.LoadError,a.onloaderror),a.onplay&&!a.onPlay&&this.on(q.Play,a.onplay),a.onpause&&!a.onPause&&this.on(q.Pause,a.onpause),a.onstop&&!a.onStop&&this.on(q.Stop,a.onstop),a.onloop&&!a.onLoop&&this.on(q.Loop,a.onloop),a.onstatechange&&!a.onStateChange&&this.on(q.StateChange,a.onstatechange),a.assetLoader&&(this.assetLoader=a.assetLoader),this.taskQueue=new xe(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:a.autoplay,autoBind:a.autoBind,animations:a.animations,stateMachines:a.stateMachines,artboard:a.artboard,useOffscreenRenderer:a.useOffscreenRenderer})}return Object.defineProperty(v.prototype,"viewModelCount",{get:function(){return this.file.viewModelCount()},enumerable:!1,configurable:!0}),v.new=function(a){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new v(a)},v.prototype.onSystemAudioChanged=function(){this.volume=this._volume},v.prototype.init=function(a){var h=this,w=a.src,S=a.buffer,O=a.riveFile,D=a.animations,te=a.stateMachines,se=a.artboard,Z=a.autoplay,fe=Z===void 0?!1:Z,Ce=a.useOffscreenRenderer,We=Ce===void 0?!1:Ce,Me=a.autoBind,Pt=Me===void 0?!1:Me;if(!this.destroyed){if(this.src=w,this.buffer=S,this.riveFile=O,!this.src&&!this.buffer&&!this.riveFile)throw new x(v.missingErrorMessage);var wt=ht(D),at=ht(te);this.loaded=!1,this.readyForPlaying=!1,W.awaitInstance().then(function(ut){h.destroyed||(h.runtime=ut,h.removeRiveListeners(),h.deleteRiveRenderer(),h.renderer=h.runtime.makeRenderer(h.canvas,We),h.canvas.width||h.canvas.height||h.resizeDrawingSurfaceToCanvas(),h.initData(se,wt,at,fe,Pt).then(function(bt){if(bt)return h.setupRiveListeners()}).catch(function(bt){console.error(bt)}))}).catch(function(ut){console.error(ut)})}},v.prototype.setupRiveListeners=function(a){var h=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var w=(this.animator.stateMachines||[]).filter(function(O){return O.playing&&h.runtime.hasListeners(O.instance)}).map(function(O){return O.instance}),S=this.isTouchScrollEnabled;a&&"isTouchScrollEnabled"in a&&(S=a.isTouchScrollEnabled),this.eventCleanup=(0,_.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:w,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:S,layoutScaleFactor:this._layout.layoutScaleFactor})}},v.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},v.prototype.initializeAudio=function(){var a=this,h;ge.status==Ue.UNAVAILABLE&&!((h=this.artboard)===null||h===void 0)&&h.hasAudio&&this._audioEventListener===null&&(this._audioEventListener={type:q.AudioStatusChange,callback:function(){return a.onSystemAudioChanged()}},ge.add(this._audioEventListener),ge.establishAudio())},v.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},v.prototype.initData=function(a,h,w,S,O){return A(this,void 0,void 0,function(){var D,te,se,Z;return g(this,function(fe){switch(fe.label){case 0:return fe.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(D=new st({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),this.riveFile=D,[4,D.init()]);case 1:if(fe.sent(),this.destroyed)return D.destroyIfUnused(),[2,!1];fe.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(a,h,w,S,O),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:q.Load,data:(Z=this.src)!==null&&Z!==void 0?Z:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,!0];case 3:return te=fe.sent(),se=M(te),console.warn(se),this.eventManager.fire({type:q.LoadError,data:se}),[2,Promise.reject(se)];case 4:return[2]}})})},v.prototype.initArtboard=function(a,h,w,S,O){if(this.file){var D=a?this.file.artboardByName(a):this.file.defaultArtboard();if(!D){var te="Invalid artboard name or no default artboard";console.warn(te),this.eventManager.fire({type:q.LoadError,data:te});return}if(this.artboard=D,D.volume=this._volume*ge.systemVolume,this.artboard.animationCount()<1){var te="Artboard has no animations";throw this.eventManager.fire({type:q.LoadError,data:te}),te}this.animator=new ae(this.runtime,this.artboard,this.eventManager);var se;if(h.length>0||w.length>0?(se=h.concat(w),this.animator.initLinearAnimations(h,S),this.animator.initStateMachines(w,S)):se=[this.animator.atLeastOne(S,!1)],this.taskQueue.add({event:{type:S?q.Play:q.Pause,data:se}}),O){var Z=this.file.defaultArtboardViewModel(D);if(Z!==null){var fe=Z.defaultInstance();if(fe!==null){var Ce=new Ke(fe,null);this.bindViewModelInstance(Ce)}}}}},v.prototype.drawFrame=function(){var a,h;!((a=document?.timeline)===null||a===void 0)&&a.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&(this._boundDraw(document.timeline.currentTime),(h=this.runtime)===null||h===void 0||h.resolveAnimationFrame()):this.startRendering()},v.prototype.draw=function(a,h){var w;this.frameRequestId=null;var S=performance.now();this.lastRenderTime||(this.lastRenderTime=a),this.renderSecondTimer+=a-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,h?.());var O=(a-this.lastRenderTime)/1e3;this.lastRenderTime=a;for(var D=this.animator.animations.filter(function(Ft){return Ft.playing||Ft.needsScrub}).sort(function(Ft){return Ft.needsScrub?-1:1}),te=0,se=D;te<se.length;te++){var Z=se[te];Z.advance(O),Z.instance.didLoop&&(Z.loopCount+=1),Z.apply(1)}for(var fe=this.animator.stateMachines.filter(function(Ft){return Ft.playing}),Ce=0,We=fe;Ce<We.length;Ce++){var Me=We[Ce],Pt=Me.reportedEventCount();if(Pt)for(var wt=0;wt<Pt;wt++){var at=Me.reportedEventAt(wt);if(at)if(at.type===F.OpenUrl){if(this.eventManager.fire({type:q.RiveEvent,data:at}),this.automaticallyHandleEvents){var ut=document.createElement("a"),bt=at,an=bt.url,un=bt.target,Lt=(0,_.sanitizeUrl)(an);an&&ut.setAttribute("href",Lt),un&&ut.setAttribute("target",un),Lt&&Lt!==_.BLANK_URL&&ut.click()}}else this.eventManager.fire({type:q.RiveEvent,data:at})}Me.advanceAndApply(O)}this.animator.stateMachines.length==0&&this.artboard.advance(O);var re=this.renderer;re.clear(),re.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(re),re.restore(),re.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(O),this.frameCount++;var Ee=performance.now();for(this.frameTimes.push(Ee),this.durations.push(Ee-S);this.frameTimes[0]<=Ee-1e3;)this.frameTimes.shift(),this.durations.shift();(w=this._viewModelInstance)===null||w===void 0||w.handleCallbacks(),this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},v.prototype.alignRenderer=function(){var a=this,h=a.renderer,w=a.runtime,S=a._layout,O=a.artboard;h.align(S.runtimeFit(w),S.runtimeAlignment(w),{minX:S.minX,minY:S.minY,maxX:S.maxX,maxY:S.maxY},O.bounds,this._devicePixelRatioUsed*S.layoutScaleFactor)},Object.defineProperty(v.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(a,h){return a+h},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),v.prototype.cleanup=function(){var a,h;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&Be.remove(this._observed),this.removeRiveListeners(),this.file&&((a=this.riveFile)===null||a===void 0||a.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(ge.remove(this._audioEventListener),this._audioEventListener=null),(h=this._viewModelInstance)===null||h===void 0||h.cleanup(),this._viewModelInstance=null,this._dataEnums=null},v.prototype.deleteRiveRenderer=function(){var a;(a=this.renderer)===null||a===void 0||a.delete(),this.renderer=null},v.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},v.prototype.retrieveTextRun=function(a){var h;if(!a){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var w=this.artboard.textRun(a);if(!w){console.warn("Could not access a text run with name '".concat(a,"' in the '").concat((h=this.artboard)===null||h===void 0?void 0:h.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return w},v.prototype.getTextRunValue=function(a){var h=this.retrieveTextRun(a);return h?h.text:void 0},v.prototype.setTextRunValue=function(a,h){var w=this.retrieveTextRun(a);w&&(w.text=h)},v.prototype.play=function(a,h){var w=this;if(a=ht(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return w.play(a,h)}});return}this.animator.play(a),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},v.prototype.pause=function(a){var h=this;if(a=ht(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return h.pause(a)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(a)},v.prototype.scrub=function(a,h){var w=this;if(a=ht(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return w.scrub(a,h)}});return}this.animator.scrub(a,h||0),this.drawFrame()},v.prototype.stop=function(a){var h=this;if(a=ht(a),!this.readyForPlaying){this.taskQueue.add({action:function(){return h.stop(a)}});return}this.animator&&this.animator.stop(a),this.eventCleanup&&this.eventCleanup()},v.prototype.reset=function(a){var h,w,S=a?.artboard,O=ht(a?.animations),D=ht(a?.stateMachines),te=(h=a?.autoplay)!==null&&h!==void 0?h:!1,se=(w=a?.autoBind)!==null&&w!==void 0?w:!1;this.cleanupInstances(),this.initArtboard(S,O,D,te,se),this.taskQueue.process()},v.prototype.load=function(a){this.file=null,this.stop(),this.init(a)},Object.defineProperty(v.prototype,"layout",{get:function(){return this._layout},set:function(a){this._layout=a,(!a.maxX||!a.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),v.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},v.prototype.resizeDrawingSurfaceToCanvas=function(a){if(this.canvas instanceof HTMLCanvasElement&&window){var h=this.canvas.getBoundingClientRect(),w=h.width,S=h.height,O=a||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=O,this.canvas.width=O*w,this.canvas.height=O*S,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===H.Layout){var D=this._layout.layoutScaleFactor;this.artboard.width=w/D,this.artboard.height=S/D}}},Object.defineProperty(v.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var a=[],h=0;h<this.artboard.animationCount();h++)a.push(this.artboard.animationByIndex(h).name);return a},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var a=[],h=0;h<this.artboard.stateMachineCount();h++)a.push(this.artboard.stateMachineByIndex(h).name);return a},enumerable:!1,configurable:!0}),v.prototype.stateMachineInputs=function(a){if(this.loaded){var h=this.animator.stateMachines.find(function(w){return w.name===a});return h?.inputs}},v.prototype.retrieveInputAtPath=function(a,h){if(!a){console.warn("No input name provided for path '".concat(h,"'"));return}if(!this.artboard){console.warn("Tried to access input: '".concat(a,"', at path: '").concat(h,"', but the Artboard is null"));return}var w=this.artboard.inputByPath(a,h);if(!w){console.warn("Could not access an input with name: '".concat(a,"', at path:'").concat(h,"'"));return}return w},v.prototype.setBooleanStateAtPath=function(a,h,w){var S=this.retrieveInputAtPath(a,w);S&&(S.type===ee.Boolean?S.asBool().value=h:console.warn("Input with name: '".concat(a,"', at path:'").concat(w,"' is not a boolean")))},v.prototype.setNumberStateAtPath=function(a,h,w){var S=this.retrieveInputAtPath(a,w);S&&(S.type===ee.Number?S.asNumber().value=h:console.warn("Input with name: '".concat(a,"', at path:'").concat(w,"' is not a number")))},v.prototype.fireStateAtPath=function(a,h){var w=this.retrieveInputAtPath(a,h);w&&(w.type===ee.Trigger?w.asTrigger().fire():console.warn("Input with name: '".concat(a,"', at path:'").concat(h,"' is not a trigger")))},v.prototype.retrieveTextAtPath=function(a,h){if(!a){console.warn("No text name provided for path '".concat(h,"'"));return}if(!h){console.warn("No path provided for text '".concat(a,"'"));return}if(!this.artboard){console.warn("Tried to access text: '".concat(a,"', at path: '").concat(h,"', but the Artboard is null"));return}var w=this.artboard.textByPath(a,h);if(!w){console.warn("Could not access text with name: '".concat(a,"', at path:'").concat(h,"'"));return}return w},v.prototype.getTextRunValueAtPath=function(a,h){var w=this.retrieveTextAtPath(a,h);if(!w){console.warn("Could not get text with name: '".concat(a,"', at path:'").concat(h,"'"));return}return w.text},v.prototype.setTextRunValueAtPath=function(a,h,w){var S=this.retrieveTextAtPath(a,w);if(!S){console.warn("Could not set text with name: '".concat(a,"', at path:'").concat(w,"'"));return}S.text=h},Object.defineProperty(v.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(a){return a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(a){return a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(a){return!a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(a){return!a.playing}).map(function(a){return a.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),v.prototype.on=function(a,h){this.eventManager.add({type:a,callback:h})},v.prototype.off=function(a,h){this.eventManager.remove({type:a,callback:h})},v.prototype.unsubscribe=function(a,h){console.warn("This function is deprecated: please use `off()` instead."),this.off(a,h)},v.prototype.removeAllRiveEventListeners=function(a){this.eventManager.removeAll(a)},v.prototype.unsubscribeAll=function(a){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(a)},v.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},v.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},v.prototype.enableFPSCounter=function(a){this.runtime.enableFPSCounter(a)},v.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(v.prototype,"contents",{get:function(){if(this.loaded){for(var a={artboards:[]},h=0;h<this.file.artboardCount();h++){for(var w=this.file.artboardByIndex(h),S={name:w.name,animations:[],stateMachines:[]},O=0;O<w.animationCount();O++){var D=w.animationByIndex(O);S.animations.push(D.name)}for(var te=0;te<w.stateMachineCount();te++){for(var se=w.stateMachineByIndex(te),Z=se.name,fe=new this.runtime.StateMachineInstance(se,w),Ce=[],We=0;We<fe.inputCount();We++){var Me=fe.input(We);Ce.push({name:Me.name,type:Me.type})}S.stateMachines.push({name:Z,inputs:Ce})}a.artboards.push(S)}return a}},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(a){this._volume=a,this.artboard&&(this.artboard.volume=a*ge.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"artboardWidth",{get:function(){var a;return this.artboard?this.artboard.width:(a=this._artboardWidth)!==null&&a!==void 0?a:0},set:function(a){this._artboardWidth=a,this.artboard&&(this.artboard.width=a)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"artboardHeight",{get:function(){var a;return this.artboard?this.artboard.height:(a=this._artboardHeight)!==null&&a!==void 0?a:0},set:function(a){this._artboardHeight=a,this.artboard&&(this.artboard.height=a)},enumerable:!1,configurable:!0}),v.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(v.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(a){this._devicePixelRatioUsed=a},enumerable:!1,configurable:!0}),v.prototype.bindViewModelInstance=function(a){var h;this.artboard&&!this.destroyed&&a&&a.runtimeInstance&&(a.internalIncrementReferenceCount(),(h=this._viewModelInstance)===null||h===void 0||h.cleanup(),this._viewModelInstance=a,this.animator.stateMachines.length>0?this.animator.stateMachines.forEach(function(w){return w.bindViewModelInstance(a)}):this.artboard.bindViewModelInstance(a.runtimeInstance))},Object.defineProperty(v.prototype,"viewModelInstance",{get:function(){return this._viewModelInstance},enumerable:!1,configurable:!0}),v.prototype.viewModelByIndex=function(a){var h=this.file.viewModelByIndex(a);return h!==null?new me(h):null},v.prototype.viewModelByName=function(a){var h=this.file.viewModelByName(a);return h!==null?new me(h):null},v.prototype.enums=function(){if(this._dataEnums===null){var a=this.file.enums();this._dataEnums=a.map(function(h){return new ct(h)})}return this._dataEnums},v.prototype.defaultViewModel=function(){if(this.artboard){var a=this.file.defaultArtboardViewModel(this.artboard);if(a)return new me(a)}return null},v.prototype.getArtboard=function(a){var h,w;return(w=(h=this.riveFile)===null||h===void 0?void 0:h.getArtboard(a))!==null&&w!==void 0?w:null},v.missingErrorMessage="Rive source file or data buffer required",v.cleanupErrorMessage="Attempt to use file after calling cleanup.",v}(),me=function(){function v(a){this._viewModel=a}return Object.defineProperty(v.prototype,"instanceCount",{get:function(){return this._viewModel.instanceCount},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"name",{get:function(){return this._viewModel.name},enumerable:!1,configurable:!0}),v.prototype.instanceByIndex=function(a){var h=this._viewModel.instanceByIndex(a);return h!==null?new Ke(h,null):null},v.prototype.instanceByName=function(a){var h=this._viewModel.instanceByName(a);return h!==null?new Ke(h,null):null},v.prototype.defaultInstance=function(){var a=this._viewModel.defaultInstance();return a!==null?new Ke(a,null):null},v.prototype.instance=function(){var a=this._viewModel.instance();return a!==null?new Ke(a,null):null},Object.defineProperty(v.prototype,"properties",{get:function(){return this._viewModel.getProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"instanceNames",{get:function(){return this._viewModel.getInstanceNames()},enumerable:!1,configurable:!0}),v}(),ct=function(){function v(a){this._dataEnum=a}return Object.defineProperty(v.prototype,"name",{get:function(){return this._dataEnum.name},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"values",{get:function(){return this._dataEnum.values},enumerable:!1,configurable:!0}),v}(),Pe;(function(v){v.Number="number",v.String="string",v.Boolean="boolean",v.Color="color",v.Trigger="trigger",v.Enum="enum",v.List="list",v.Image="image",v.Artboard="artboard"})(Pe||(Pe={}));var Ke=function(){function v(a,h){this._parents=[],this._children=[],this._viewModelInstances=new Map,this._propertiesWithCallbacks=[],this._referenceCount=0,this._runtimeInstance=a,h!==null&&this._parents.push(h)}return Object.defineProperty(v.prototype,"runtimeInstance",{get:function(){return this._runtimeInstance},enumerable:!1,configurable:!0}),v.prototype.handleCallbacks=function(){this._propertiesWithCallbacks.length!==0&&(this._propertiesWithCallbacks.forEach(function(a){a.handleCallbacks()}),this._propertiesWithCallbacks.forEach(function(a){a.clearChanges()})),this._children.forEach(function(a){return a.handleCallbacks()})},v.prototype.addParent=function(a){this._parents.includes(a)||(this._parents.push(a),(this._propertiesWithCallbacks.length>0||this._children.length>0)&&a.addToViewModelCallbacks(this))},v.prototype.removeParent=function(a){var h=this._parents.indexOf(a);if(h!==-1){var w=this._parents[h];w.removeFromViewModelCallbacks(this),this._parents.splice(h,1)}},v.prototype.addToPropertyCallbacks=function(a){var h=this;this._propertiesWithCallbacks.includes(a)||(this._propertiesWithCallbacks.push(a),this._propertiesWithCallbacks.length>0&&this._parents.forEach(function(w){w.addToViewModelCallbacks(h)}))},v.prototype.removeFromPropertyCallbacks=function(a){var h=this;this._propertiesWithCallbacks.includes(a)&&(this._propertiesWithCallbacks=this._propertiesWithCallbacks.filter(function(w){return w!==a}),this._children.length===0&&this._propertiesWithCallbacks.length===0&&this._parents.forEach(function(w){w.removeFromViewModelCallbacks(h)}))},v.prototype.addToViewModelCallbacks=function(a){var h=this;this._children.includes(a)||(this._children.push(a),this._parents.forEach(function(w){w.addToViewModelCallbacks(h)}))},v.prototype.removeFromViewModelCallbacks=function(a){var h=this;this._children.includes(a)&&(this._children=this._children.filter(function(w){return w!==a}),this._children.length===0&&this._propertiesWithCallbacks.length===0&&this._parents.forEach(function(w){w.removeFromViewModelCallbacks(h)}))},v.prototype.clearCallbacks=function(){this._propertiesWithCallbacks.forEach(function(a){a.clearCallbacks()})},v.prototype.propertyFromPath=function(a,h){var w=a.split("/");return this.propertyFromPathSegments(w,0,h)},v.prototype.viewModelFromPathSegments=function(a,h){var w=this.internalViewModelInstance(a[h]);return w!==null?h==a.length-1?w:w.viewModelFromPathSegments(a,h++):null},v.prototype.propertyFromPathSegments=function(a,h,w){var S,O,D,te,se,Z,fe,Ce,We,Me,Pt,wt,at,ut,bt,an,un,Lt;if(h<a.length-1){var re=this.internalViewModelInstance(a[h]);return re!==null?re.propertyFromPathSegments(a,h+1,w):null}var Ee=null;switch(w){case Pe.Number:if(Ee=(O=(S=this._runtimeInstance)===null||S===void 0?void 0:S.number(a[h]))!==null&&O!==void 0?O:null,Ee!==null)return new yt(Ee,this);break;case Pe.String:if(Ee=(te=(D=this._runtimeInstance)===null||D===void 0?void 0:D.string(a[h]))!==null&&te!==void 0?te:null,Ee!==null)return new _t(Ee,this);break;case Pe.Boolean:if(Ee=(Z=(se=this._runtimeInstance)===null||se===void 0?void 0:se.boolean(a[h]))!==null&&Z!==void 0?Z:null,Ee!==null)return new qt(Ee,this);break;case Pe.Color:if(Ee=(Ce=(fe=this._runtimeInstance)===null||fe===void 0?void 0:fe.color(a[h]))!==null&&Ce!==void 0?Ce:null,Ee!==null)return new sn(Ee,this);break;case Pe.Trigger:if(Ee=(Me=(We=this._runtimeInstance)===null||We===void 0?void 0:We.trigger(a[h]))!==null&&Me!==void 0?Me:null,Ee!==null)return new bn(Ee,this);break;case Pe.Enum:if(Ee=(wt=(Pt=this._runtimeInstance)===null||Pt===void 0?void 0:Pt.enum(a[h]))!==null&&wt!==void 0?wt:null,Ee!==null)return new ot(Ee,this);break;case Pe.List:if(Ee=(ut=(at=this._runtimeInstance)===null||at===void 0?void 0:at.list(a[h]))!==null&&ut!==void 0?ut:null,Ee!==null)return new St(Ee,this);break;case Pe.Image:if(Ee=(an=(bt=this._runtimeInstance)===null||bt===void 0?void 0:bt.image(a[h]))!==null&&an!==void 0?an:null,Ee!==null)return new ur(Ee,this);break;case Pe.Artboard:if(Ee=(Lt=(un=this._runtimeInstance)===null||un===void 0?void 0:un.artboard(a[h]))!==null&&Lt!==void 0?Lt:null,Ee!==null)return new zt(Ee,this);break}return null},v.prototype.internalViewModelInstance=function(a){var h;if(this._viewModelInstances.has(a))return this._viewModelInstances.get(a);var w=(h=this._runtimeInstance)===null||h===void 0?void 0:h.viewModel(a);if(w!==null){var S=new v(w,this);return S.internalIncrementReferenceCount(),this._viewModelInstances.set(a,S),S}return null},v.prototype.number=function(a){var h=this.propertyFromPath(a,Pe.Number);return h},v.prototype.string=function(a){var h=this.propertyFromPath(a,Pe.String);return h},v.prototype.boolean=function(a){var h=this.propertyFromPath(a,Pe.Boolean);return h},v.prototype.color=function(a){var h=this.propertyFromPath(a,Pe.Color);return h},v.prototype.trigger=function(a){var h=this.propertyFromPath(a,Pe.Trigger);return h},v.prototype.enum=function(a){var h=this.propertyFromPath(a,Pe.Enum);return h},v.prototype.list=function(a){var h=this.propertyFromPath(a,Pe.List);return h},v.prototype.image=function(a){var h=this.propertyFromPath(a,Pe.Image);return h},v.prototype.artboard=function(a){var h=this.propertyFromPath(a,Pe.Artboard);return h},v.prototype.viewModel=function(a){var h=a.split("/"),w=h.length>1?this.viewModelFromPathSegments(h.slice(0,h.length-1),0):this;return w!=null?w.internalViewModelInstance(h[h.length-1]):null},v.prototype.internalReplaceViewModel=function(a,h){var w;if(h.runtimeInstance!==null){var S=((w=this._runtimeInstance)===null||w===void 0?void 0:w.replaceViewModel(a,h.runtimeInstance))||!1;if(S){h.internalIncrementReferenceCount();var O=this.internalViewModelInstance(a);O!==null&&(O.removeParent(this),this._children.includes(O)&&(this._children=this._children.filter(function(D){return D!==O})),O.cleanup()),this._viewModelInstances.set(a,h),h.addParent(this)}return S}return!1},v.prototype.replaceViewModel=function(a,h){var w,S=a.split("/"),O=S.length>1?this.viewModelFromPathSegments(S.slice(0,S.length-1),0):this;return(w=O?.internalReplaceViewModel(S[S.length-1],h))!==null&&w!==void 0?w:!1},v.prototype.incrementReferenceCount=function(){var a;this._referenceCount++,(a=this._runtimeInstance)===null||a===void 0||a.incrementReferenceCount()},v.prototype.decrementReferenceCount=function(){var a;this._referenceCount--,(a=this._runtimeInstance)===null||a===void 0||a.decrementReferenceCount()},Object.defineProperty(v.prototype,"properties",{get:function(){var a;return((a=this._runtimeInstance)===null||a===void 0?void 0:a.getProperties().map(function(h){return E({},h)}))||[]},enumerable:!1,configurable:!0}),v.prototype.internalIncrementReferenceCount=function(){this._referenceCount++},v.prototype.cleanup=function(){var a=this;if(this._referenceCount--,this._referenceCount<=0){this._runtimeInstance=null,this.clearCallbacks(),this._propertiesWithCallbacks=[],this._viewModelInstances.forEach(function(S){S.cleanup()}),this._viewModelInstances.clear();var h=P([],this._children,!0);this._children.length=0;var w=P([],this._parents,!0);this._parents.length=0,h.forEach(function(S){S.removeParent(a)}),w.forEach(function(S){S.removeFromViewModelCallbacks(a)})}},v}(),Le=function(){function v(a,h){this.callbacks=[],this._viewModelInstanceValue=a,this._parentViewModel=h}return v.prototype.on=function(a){this.callbacks.length===0&&this._viewModelInstanceValue.clearChanges(),this.callbacks.includes(a)||(this.callbacks.push(a),this._parentViewModel.addToPropertyCallbacks(this))},v.prototype.off=function(a){a?this.callbacks=this.callbacks.filter(function(h){return h!==a}):this.callbacks.length=0,this.callbacks.length===0&&this._parentViewModel.removeFromPropertyCallbacks(this)},v.prototype.internalHandleCallback=function(a){},v.prototype.handleCallbacks=function(){var a=this;this._viewModelInstanceValue.hasChanged&&this.callbacks.forEach(function(h){a.internalHandleCallback(h)})},v.prototype.clearChanges=function(){this._viewModelInstanceValue.clearChanges()},v.prototype.clearCallbacks=function(){this.callbacks.length=0},Object.defineProperty(v.prototype,"name",{get:function(){return this._viewModelInstanceValue.name},enumerable:!1,configurable:!0}),v}(),_t=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(h){this._viewModelInstanceValue.value=h},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(h){h(this.value)},a}(Le),yt=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(h){this._viewModelInstanceValue.value=h},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(h){h(this.value)},a}(Le),qt=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(h){this._viewModelInstanceValue.value=h},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(h){h(this.value)},a}(Le),bn=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return a.prototype.trigger=function(){return this._viewModelInstanceValue.trigger()},a.prototype.internalHandleCallback=function(h){h()},a}(Le),ot=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(h){this._viewModelInstanceValue.value=h},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"valueIndex",{get:function(){return this._viewModelInstanceValue.valueIndex},set:function(h){this._viewModelInstanceValue.valueIndex=h},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"values",{get:function(){return this._viewModelInstanceValue.values},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(h){h(this.value)},a}(Le),St=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"length",{get:function(){return this._viewModelInstanceValue.size},enumerable:!1,configurable:!0}),a.prototype.addInstance=function(h){h.runtimeInstance!=null&&(this._viewModelInstanceValue.addInstance(h.runtimeInstance),h.addParent(this._parentViewModel))},a.prototype.addInstanceAt=function(h,w){return h.runtimeInstance!=null&&this._viewModelInstanceValue.addInstanceAt(h.runtimeInstance,w)?(h.addParent(this._parentViewModel),!0):!1},a.prototype.removeInstance=function(h){h.runtimeInstance!=null&&(this._viewModelInstanceValue.removeInstance(h.runtimeInstance),h.removeParent(this._parentViewModel))},a.prototype.removeInstanceAt=function(h){this._viewModelInstanceValue.removeInstanceAt(h)},a.prototype.instanceAt=function(h){var w=this._viewModelInstanceValue.instanceAt(h);if(w!=null){var S=new Ke(w,this._parentViewModel);return S}return null},a.prototype.swap=function(h,w){this._viewModelInstanceValue.swap(h,w)},a.prototype.internalHandleCallback=function(h){h()},a}(Le),sn=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{get:function(){return this._viewModelInstanceValue.value},set:function(h){this._viewModelInstanceValue.value=h},enumerable:!1,configurable:!0}),a.prototype.rgb=function(h,w,S){this._viewModelInstanceValue.rgb(h,w,S)},a.prototype.rgba=function(h,w,S,O){this._viewModelInstanceValue.argb(O,h,w,S)},a.prototype.argb=function(h,w,S,O){this._viewModelInstanceValue.argb(h,w,S,O)},a.prototype.alpha=function(h){this._viewModelInstanceValue.alpha(h)},a.prototype.opacity=function(h){this._viewModelInstanceValue.alpha(Math.round(Math.max(0,Math.min(1,h))*255))},a.prototype.internalHandleCallback=function(h){h(this.value)},a}(Le),ur=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{set:function(h){var w;this._viewModelInstanceValue.value((w=h?.nativeImage)!==null&&w!==void 0?w:null)},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(h){h()},a}(Le),zt=function(v){y(a,v);function a(h,w){return v.call(this,h,w)||this}return Object.defineProperty(a.prototype,"value",{set:function(h){var w;this._viewModelInstanceValue.value((w=h?.nativeArtboard)!==null&&w!==void 0?w:null)},enumerable:!1,configurable:!0}),a.prototype.internalHandleCallback=function(h){h()},a}(Le),$r=function(v){return A(void 0,void 0,void 0,function(){var a,h,w;return g(this,function(S){switch(S.label){case 0:return a=new Request(v),[4,fetch(a)];case 1:return h=S.sent(),[4,h.arrayBuffer()];case 2:return w=S.sent(),[2,w]}})})},ht=function(v){return typeof v=="string"?[v]:v instanceof Array?v:[]},Mi={EventManager:Ie,TaskQueueManager:xe},Br=function(v){return A(void 0,void 0,void 0,function(){var a,h,w;return g(this,function(S){switch(S.label){case 0:return a=new Promise(function(O){return W.getInstance(function(D){D.decodeAudio(v,O)})}),[4,a];case 1:return h=S.sent(),w=new _.AudioWrapper(h),_.finalizationRegistry.register(w,h),[2,w]}})})},Li=function(v){return A(void 0,void 0,void 0,function(){var a,h,w;return g(this,function(S){switch(S.label){case 0:return a=new Promise(function(O){return W.getInstance(function(D){D.decodeImage(v,O)})}),[4,a];case 1:return h=S.sent(),w=new _.ImageWrapper(h),_.finalizationRegistry.register(w,h),[2,w]}})})},on=function(v){return A(void 0,void 0,void 0,function(){var a,h,w;return g(this,function(S){switch(S.label){case 0:return a=new Promise(function(O){return W.getInstance(function(D){D.decodeFont(v,O)})}),[4,a];case 1:return h=S.sent(),w=new _.FontWrapper(h),_.finalizationRegistry.register(w,h),[2,w]}})})}})(),u})())}(pi)),pi.exports}var wd=yd(),bd=it('<div class="main-container"><canvas width="300" height="300"></canvas> <div class="headline"><p class="title">ÐÑÐ¸Ð²ÐµÑ!</p> <p class="headline-text">ÐÐµÐ´ÑÑÑÑ ÑÐ°Ð±Ð¾ÑÑ</p></div></div>');function Ea(n,e){Pi(e,!0);let t=tt(void 0);ki(()=>{if(!ie(t))return;const u=new wd.Rive({src:e.file,canvas:ie(t),autoplay:!0,stateMachines:"SM1"});return()=>{u.cleanup()}});var i=bd(),o=De(i);cc(o,u=>ye(t,u),()=>ie(t)),Xe(n,i),Ti()}var Ed=it('<img alt="Background"/>'),Ad=it('<div class="background-media svelte-3ndx1b"><!></div>'),kd=it('<img alt="Character"/>'),Cd=it('<div class="character-media svelte-3ndx1b"><!></div>'),Sd=(n,e,t)=>e(ie(t).nextDialogueId),Pd=it('<button class="option-button svelte-3ndx1b"> </button>'),Td=it('<div class="options-container svelte-3ndx1b"></div>'),Id=it('<div class="error-overlay svelte-3ndx1b"><p class="error-text svelte-3ndx1b"> </p></div>'),Rd=it('<div class="dialogue-container svelte-3ndx1b"><!> <!> <div class="dialogue-content svelte-3ndx1b"><div class="dialogue-text svelte-3ndx1b"> </div> <!></div> <!> <!></div>');function Od(n,e){Pi(e,!0);let t=tt(null),i=tt(null),o=tt(null);ki(async()=>{});async function u(){try{if(ye(o,null),e.dialogue.backgroundImage)try{e.dialogue.backgroundImage.endsWith(".riv")?await c(e.dialogue.backgroundImage,"background"):(ye(t,`/files/${e.dialogue.backgroundImage}`),await f(ie(t)))}catch{console.warn("Background not found:",e.dialogue.backgroundImage),ye(t,null)}if(e.dialogue.characterImage)try{e.dialogue.characterImage.endsWith(".riv")?await c(e.dialogue.characterImage,"character"):(ye(i,`/files/${e.dialogue.characterImage}`),await f(ie(i)))}catch{console.warn("Character not found:",e.dialogue.characterImage),ye(i,null)}}catch(j){ye(o,"ÐÑÐ¸Ð±ÐºÐ° Ð·Ð°Ð³ÑÑÐ·ÐºÐ¸ Ð¼ÐµÐ´Ð¸Ð°: "+j.message),console.error("Media loading error:",j),e.dialogue.backgroundImage?.endsWith(".riv")&&ye(t,null),e.dialogue.characterImage?.endsWith(".riv")&&ye(i,null)}finally{}}async function c(j,F){try{const X=await fetch(`/files/${j}`);if(!X.ok)throw new Error("Rive file not found");const Q=await X.arrayBuffer(),ae=`${F}-rive-canvas`;let q=document.getElementById(ae);if(!q){q=document.createElement("canvas"),q.id=ae,q.className=`rive-canvas ${F}-rive`,q.width=F==="background"?800:400,q.height=F==="background"?600:400;const ne=document.createElement("div");ne.className=`rive-container ${F}-rive-container`,ne.appendChild(q),F==="background"?document.querySelector(".background-media")?.appendChild(ne):document.querySelector(".character-media")?.appendChild(ne)}e.dialogue.stateMachineBackgroundRive&&F==="background"&&setTimeout(()=>{},100),e.dialogue.smTriggerBackgroundRive&&F==="background"&&setTimeout(()=>{},200)}catch(X){throw console.error("Rive loading error:",X),X}}function f(j){return new Promise((F,X)=>{const Q=new Image;Q.onload=()=>F(j),Q.onerror=()=>X(new Error(`Image not found: ${j}`)),Q.src=j})}u();function p(j){const F=new CustomEvent("dialogueChange",{detail:{nextDialogueId:j}});window.dispatchEvent(F)}var _=Rd(),y=De(_);{var E=j=>{var F=Ad(),X=De(F);{var Q=q=>{Ea(q,{get file(){return e.dialogue.backgroundImage}})},ae=q=>{var ne=Ed();let Ie;vn(xe=>{zo(ne,"src",ie(t)?ie(t):""),Ie=fs(ne,1,"background-image svelte-3ndx1b",null,Ie,xe)},[()=>({hidden:!ie(t)})]),Wo("error",ne,()=>{ye(o,"ÐÑÐ¸Ð±ÐºÐ° Ð·Ð°Ð³ÑÑÐ·ÐºÐ¸ ÑÐ¾Ð½Ð°: "+e.dialogue.backgroundImage),ye(t,null)}),Xe(q,ne)};Nt(X,q=>{e.dialogue.backgroundImage.endsWith(".riv")?q(Q):q(ae,!1)})}Xe(j,F)};Nt(y,j=>{e.dialogue.backgroundImage&&j(E)})}var A=nt(y,2);{var g=j=>{var F=Cd(),X=De(F);{var Q=q=>{Ea(q,{get file(){return e.dialogue.characterImage}})},ae=q=>{var ne=kd();let Ie;vn(xe=>{zo(ne,"src",ie(i)?ie(i):""),Ie=fs(ne,1,"character-image svelte-3ndx1b",null,Ie,xe)},[()=>({hidden:!ie(i)})]),Wo("error",ne,()=>{ye(o,"ÐÑÐ¸Ð±ÐºÐ° Ð·Ð°Ð³ÑÑÐ·ÐºÐ¸ Ð¿ÐµÑÑÐ¾Ð½Ð°Ð¶Ð°: "+e.dialogue.characterImage),ye(i,null)}),Xe(q,ne)};Nt(X,q=>{e.dialogue.characterImage.endsWith(".riv")?q(Q):q(ae,!1)})}Xe(j,F)};Nt(A,j=>{e.dialogue.characterImage&&j(g)})}var P=nt(A,2),x=De(P),M=De(x),H=nt(x,2);{var z=j=>{var F=Td();tu(F,21,()=>e.dialogue.options,X=>X.text,(X,Q)=>{var ae=Pd();ae.__click=[Sd,p,Q];var q=De(ae);vn(()=>pn(q,ie(Q).text)),Xe(X,ae)}),Xe(j,F)};Nt(H,j=>{e.dialogue.options&&e.dialogue.options.length>0&&j(z)})}var L=nt(P,2);{var W=j=>{var F=Id(),X=De(F),Q=De(X);vn(()=>pn(Q,ie(o))),Xe(j,F)};Nt(L,j=>{ie(o)&&j(W)})}var ee=nt(L,2);Nt(ee,j=>{}),vn(()=>pn(M,`"${e.dialogue.text??""}"`)),Xe(n,_),Ti()}ji(["click"]);function jd(n,e,t){ie(e)<ie(t).length-1&&Fa(e)}function xd(n,e){ie(e)>0&&Fa(e,-1)}function Aa(n,e){ye(e,0)}async function Md(n,e,t,i,o){ye(e,!0),ye(t,"");try{await i(),ye(o,0)}catch(u){ye(t,"ÐÑÐ¸Ð±ÐºÐ° Ð¿ÐµÑÐµÐ·Ð°Ð³ÑÑÐ·ÐºÐ¸: "+u.message)}finally{ye(e,!1)}}var Ld=it('<div class="loading"><p>ð ÐÐ°Ð³ÑÑÐ·ÐºÐ° Ð¸ÑÑÐ¾ÑÐ¸Ð¸ ÐÑÐ°ÐºÑÐ»Ñ...</p></div>'),Fd=it('<div class="error"> <div style="margin-top: 15px;"><button class="nav-button">ð ÐÐ¾Ð¿ÑÐ¾Ð±Ð¾Ð²Ð°ÑÑ ÑÐ½Ð¾Ð²Ð°</button></div></div>'),Ud=it("<div></div>"),Dd=it('<div class="header"><div class="user-avatar"> </div> <div class="user-info"><h3 class="user-name"> </h3> <p class="user-email"> </p></div> <button class="nav-button">ð ÐÐ°ÑÐ°ÑÑ ÑÐ½Ð°ÑÐ°Ð»Ð°</button></div> <div class="dialogues-container"><!> <div class="dots-navigation"></div> <div class="navigation"><button class="nav-button">â ÐÐ°Ð·Ð°Ð´</button> <button class="nav-button">ÐÐ¿ÐµÑÐµÐ´ â</button></div> <div class="progress-info"> </div></div>',1),$d=it('<div class="welcome-section"><h1 class="welcome-title">ð§ââï¸ ÐÑÐ°ÐºÑÐ»Ð°: ÐÐ½ÑÐµÑÐ°ÐºÑÐ¸Ð²Ð½Ð°Ñ Ð¸ÑÑÐ¾ÑÐ¸Ñ</h1> <p class="welcome-text">ÐÐ¾Ð³ÑÑÐ·Ð¸ÑÐµÑÑ Ð² Ð°ÑÐ¼Ð¾ÑÑÐµÑÐ½ÑÑ Ð³Ð¾ÑÐ¸ÑÐµÑÐºÑÑ Ð¸ÑÑÐ¾ÑÐ¸Ñ Ñ Ð¸Ð½ÑÐµÑÐ°ÐºÑÐ¸Ð²Ð½ÑÐ¼Ð¸ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð°Ð¼Ð¸.<br/> ÐÑÐ¸Ð½Ð¸Ð¼Ð°Ð¹ÑÐµ ÑÐµÑÐµÐ½Ð¸Ñ, ÐºÐ¾ÑÐ¾ÑÑÐµ Ð²Ð»Ð¸ÑÑÑ Ð½Ð° ÑÐ°Ð·Ð²Ð¸ÑÐ¸Ðµ ÑÑÐ¶ÐµÑÐ°.</p> <button class="start-button">ð­ ÐÐ°ÑÐ°ÑÑ Ð¸ÑÑÐ¾ÑÐ¸Ñ</button></div>'),Bd=it('<div class="app"><!></div>');function Nd(n,e){Pi(e,!0);let t=jn({name:"ÐÐ³ÑÐ¾Ðº"}),i=tt(!0),o=tt(""),u=tt(jn([])),c=tt(0);ki(async()=>{try{await f()}catch(P){ye(o,"ÐÑÐ¸Ð±ÐºÐ° Ð·Ð°Ð³ÑÑÐ·ÐºÐ¸ Ð¸ÑÑÐ¾ÑÐ¸Ð¸: "+P.message),console.error("Load error:",P)}finally{ye(i,!1)}});async function f(){try{console.log("ÐÐ°Ð³ÑÑÐ·ÐºÐ° Ð´Ð¸Ð°Ð»Ð¾Ð³Ð¾Ð² Ð¸Ð· /files/dracula_story.json");const P=await fetch("/files/dracula_story.json");if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);const x=await P.json();if(!x.dialogues||!Array.isArray(x.dialogues))throw new Error("ÐÐµÐ²ÐµÑÐ½ÑÐ¹ ÑÐ¾ÑÐ¼Ð°Ñ ÑÐ°Ð¹Ð»Ð° Ð¸ÑÑÐ¾ÑÐ¸Ð¸: Ð¾ÑÑÑÑÑÑÐ²ÑÐµÑ dialogues array");ye(u,x.dialogues,!0),console.log("ÐÐ¸Ð°Ð»Ð¾Ð³Ð¸ Ð·Ð°Ð³ÑÑÐ¶ÐµÐ½Ñ:",ie(u).length)}catch(P){throw ye(o,"ÐÑÐ¸Ð±ÐºÐ° Ð·Ð°Ð³ÑÑÐ·ÐºÐ¸ Ð¸ÑÑÐ¾ÑÐ¸Ð¸: "+P.message),console.error("Load dialogues error:",P),P}}function p(P){const x=P.detail.nextDialogueId,M=ie(u).findIndex(H=>H.id===x);if(M!==-1)ye(c,M,!0);else{const H=ie(u)[ie(c)];if(H.nextDialogueId){const z=ie(u).findIndex(L=>L.id===H.nextDialogueId);z!==-1&&ye(c,z,!0)}}}function _(P){ye(c,P,!0)}ki(()=>(window.addEventListener("dialogueChange",p),()=>window.removeEventListener("dialogueChange",p)));var y=Bd(),E=De(y);{var A=P=>{var x=Ld();Xe(P,x)},g=P=>{var x=Vo(),M=Zi(x);{var H=L=>{var W=Fd(),ee=De(W),j=nt(ee),F=De(j);F.__click=[Md,i,o,f,c],vn(()=>pn(ee,`â ï¸ ${ie(o)??""} `)),Xe(L,W)},z=L=>{var W=Vo(),ee=Zi(W);{var j=X=>{var Q=Dd(),ae=Zi(Q),q=De(ae),ne=De(q),Ie=nt(q,2),xe=De(Ie),Ue=De(xe),Ct=nt(xe,2),ge=De(Ct),rn=nt(Ie,2);rn.__click=[Aa,c];var $e=nt(ae,2),Re=De($e);Od(Re,{get dialogue(){return ie(u)[ie(c)]}});var Be=nt(Re,2);tu(Be,21,()=>ie(u),nc,(Ke,Le,_t)=>{var yt=Ud();yt.__click=()=>_(_t),vn(()=>fs(yt,1,`dot ${_t===ie(c)?"active":""}`)),Xe(Ke,yt)});var st=nt(Be,2),he=De(st);he.__click=[xd,c];var me=nt(he,2);me.__click=[jd,c,u];var ct=nt(st,2),Pe=De(ct);vn(Ke=>{pn(ne,Ke),pn(Ue,t.name),pn(ge,`ÐÑÐ¾Ð³ÑÐµÑÑ: ${ie(c)+1} / ${ie(u).length??""}`),he.disabled=ie(c)===0,me.disabled=ie(c)===ie(u).length-1,pn(Pe,`Ð¡ÑÐµÐ½Ð° ${ie(c)+1} Ð¸Ð· ${ie(u).length??""}`)},[()=>t.name[0].toUpperCase()]),Xe(X,Q)},F=X=>{var Q=$d(),ae=nt(De(Q),4);ae.__click=[Aa,c],Xe(X,Q)};Nt(ee,X=>{ie(u).length>0?X(j):X(F,!1)},!0)}Xe(L,W)};Nt(M,L=>{ie(o)?L(H):L(z,!1)},!0)}Xe(P,x)};Nt(E,P=>{ie(i)?P(A):P(g,!1)})}Xe(n,y),Ti()}ji(["click"]);function Wd(n){Nd(n,{})}Zl(Wd,{target:document.getElementById("app")});
